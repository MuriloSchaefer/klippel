import{b as C,n as F,o,B as L,T as W,r as p,b1 as y,b2 as S,b3 as w,bk as H,b4 as v,c as T,d as q,Z as J,e as V,R as K,a2 as Z}from"../vendor-918b8f8e.js";import{n as g,A as M}from"../kernel-f178b49f.js";const P=e=>{const a=e??(n=>n);return C(n=>n.Materials,n=>n.materials,n=>n&&a(n.materials))},U=C(e=>e.Materials,e=>e.materialTypes),Y=e=>C(t=>t.Materials,t=>t.materialTypes[e]),Q=({color:e,previewSize:t})=>{const a=F(),n=t??15;return o.jsxs(L,{sx:{display:"flex",width:"100%",alignItems:"center",gap:1,justifyContent:"space-between"},children:[o.jsx("svg",{width:n,height:n,children:o.jsx("circle",{r:n/2,cx:n/2,cy:n/2,stroke:a.palette.getContrastText(a.palette.background.default),strokeWidth:.5,fill:e.hex})}),o.jsx(W,{children:e.label??e.id})]})},X=({type:e,value:t,filter:a,onChange:n})=>{const d=g("Store"),{useAppSelector:l}=d.hooks,u=l(Y(e)),s=u.schemas[u.latestSchema].selector,N=p.useCallback(i=>!0,[]),x=l(P(i=>Object.values(i).filter(r=>r.type===e).filter(a??N).reduce((r,h)=>({...r,[h.id]:h}),{}))),b=Object.values(x).reduce((i,r)=>i[r.industry]?i[r.industry][r.externalId]?{...i,[r.industry]:{...i[r.industry],[r.externalId]:{...i[r.industry][r.externalId],extra:[...i[r.industry][r.externalId].extra,r]}}}:{...i,[r.industry]:{...i[r.industry],[r.externalId]:{label:r.attributes[s.principal],extra:[r]}}}:{...i,[r.industry]:{[r.externalId]:{label:r.attributes[s.principal],extra:[r]}}},{}),[f,$]=p.useState(Object.values(x).find(i=>i.id===t)),[m,G]=p.useState(f?`${f?.industry}-${f?.externalId}`:void 0),_=p.useCallback(i=>{typeof i.target.value!="string"&&($(Object.values(x).find(r=>r.id===i.target.value)),n&&n(i.target.value))},[x]);return o.jsxs(L,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[o.jsxs(y,{sx:{m:1,width:"100%"},fullWidth:!0,size:"small",children:[o.jsx(S,{id:"label",sx:{textTransform:"capitalize"},children:s.principal}),o.jsx(w,{labelId:"label",id:"material-name",value:m??"",onChange:i=>G(i.target.value),label:s.principal,children:Object.entries(b).map(([i,r])=>[o.jsx(H,{children:i}),...Object.entries(r).map(([h,z])=>o.jsx(v,{value:`${i}-${h}`,children:z.label},h))])})]}),o.jsxs(y,{sx:{m:1,minWidth:120,width:"fit-content"},size:"small",children:[o.jsx(S,{id:"label",sx:{textTransform:"capitalize"},children:s.extra}),o.jsx(w,{labelId:"label",id:"material-extra",value:f?.id??"",onChange:_,label:s.extra,children:m&&m.split("-")[0]in b&&m.split("-")[1]in b[m.split("-")[0]]&&b[m.split("-")[0]][m.split("-")[1]].extra.map(i=>o.jsx(v,{value:i.id,children:s.extra==="cor"?o.jsx(Q,{color:i.attributes[s.extra]}):o.jsx(o.Fragment,{children:i.attributes[s.extra]})},i.id))})]})]})},E=({filter:e,value:t,...a})=>{const n=g("Store"),{useAppSelector:d}=n.hooks,l=d(U),u=p.useCallback(s=>!0,[]);return o.jsxs(y,{sx:{m:1,minWidth:120,width:"min-content"},fullWidth:!0,size:"small",children:[o.jsx(S,{id:"label",children:"Tipo"}),o.jsx(w,{...a,labelId:"label",id:"material-type",value:t??"",label:"Tipo",children:Object.values(l).filter(e??u).map(s=>o.jsx(v,{value:s.name,children:s.label},s.name))})]})},c="Materials",ee="0.0.1",R={},A={},te={materials:A,materialTypes:R},j=T(`[${c}:Materials:${M.COMMAND}] Load material types`),I=T(`[${c}:Materials:${M.EVENT}] Material types loaded`),ae=q({name:"materialTypesSlice",initialState:R,reducers:{},extraReducers:e=>{e.addCase(I,(t,{payload:a})=>({...t,...a}))}}),k=T(`[${c}:Materials:${M.COMMAND}] Load materials`),O=T(`[${c}:Materials:${M.EVENT}] Materials loaded`),ie=q({name:"materialsSlice",initialState:A,reducers:{},extraReducers:e=>{e.addCase(O,(t,{payload:a})=>({...t,...a}))}}),re=q({name:c,initialState:te,reducers:{},extraReducers:e=>{e.addDefaultCase((t,a)=>({...t,materials:ie.reducer(t.materials,a),materialTypes:ae.reducer(t.materialTypes,a)}))}}),ne=()=>{const e=g("Store"),{useAppDispatch:t}=e.hooks,a=t();return{functions:{loadMaterialTypes:()=>{a(j({}))}}}},oe=()=>{ne();const e=p.useCallback((t,a)=>{},[]);return o.jsx(o.Fragment,{children:o.jsx(J,{onClick:()=>e("Create Material","camisa-polo/processed.svg"),children:"Create new material type"})})},B=V();B.startListening({actionCreator:j,effect:async({payload:e},t)=>{const{dispatch:a}=t;a(I({malha:{name:"malha",label:"Malha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{fornecedor:"string",categoria:"string",nome:"string",cor:"color",largura:"unitValue",gramatura:"compoundValue",rendimento:"compoundValue",trama:"string"},selector:{principal:"nome",extra:"cor"}}}},tecido:{name:"tecido",label:"Tecido",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{categoria:"string",nome:"string",cor:"color",largura:"unitValue",gramatura:"compoundValue",trama:"string"},selector:{principal:"nome",extra:"cor"}}}},linha:{name:"linha",label:"Linha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{nome:"string",cor:"color"},selector:{principal:"nome",extra:"cor"}}}},agulha:{name:"agulha",label:"Agulha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{fornecedor:"string",categoria:"string",nome:"string",espessura:"number"},selector:{principal:"nome",extra:"espessura"}}}},botao:{name:"botao",label:"Botão",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{categoria:"string",nome:"string",tamanho:"number",cor:"color"},selector:{principal:"nome",extra:"tamanho"}}}},papel:{name:"papel",label:"Papel",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{categoria:"string",nome:"string",comprimento:"number",comprimentoUnidade:"string",largura:"number",larguraUnidade:"string"},selector:{principal:"categoria",extra:"nome"}}}}}))}});const D=V();D.startListening({actionCreator:k,effect:async({payload:e},t)=>{const{dispatch:a}=t;a(O({1:{id:1,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:{amount:120,unit:"centimetros7"},gramatura:{quotient:{amount:170,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:2.5,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"01",hex:"#ffffff",label:"Branco"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},2:{id:2,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:{amount:120,unit:"centimetros7"},gramatura:{quotient:{amount:170,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:2.5,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"01",hex:"#000000",label:"Preto"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},3:{id:3,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:{amount:120,unit:"centimetros7"},gramatura:{quotient:{amount:170,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:2.5,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"03",hex:"#0000ff",label:"Royal"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},4:{id:4,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:{amount:120,unit:"centimetros7"},gramatura:{quotient:{amount:170,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:2.5,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"04",hex:"#000055",label:"Marinho"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},5:{id:5,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:{amount:120,unit:"centimetros7"},gramatura:{quotient:{amount:170,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:2.5,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"04",hex:"#ff0000",label:"Vermelho"}},composition:{PES:.67,CV:.33},caracteristics:{}},6:{id:6,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"15",externalURL:"https://mundialtextil.com.br/produto/malha-colegial/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/02/malha-CELESTE-15.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Colegial",nome:"Malha colegial",largura:{amount:152,unit:"centimetros7"},gramatura:{quotient:{amount:295,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:2.23,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"01",hex:"#ffffff",label:"Branco"}},composition:{PES:.65,CO:.35},caracteristics:{}},7:{id:7,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"15",externalURL:"https://mundialtextil.com.br/produto/malha-colegial/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/02/malha-CELESTE-15.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Colegial",nome:"Malha colegial",largura:{amount:152,unit:"centimetros7"},gramatura:{quotient:{amount:295,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:2.23,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"02",hex:"#000000",label:"Preto"}},composition:{PES:.65,CO:.35},caracteristics:{}},8:{id:8,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"13",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Piquet",nome:"Piquet ingles PA",largura:{amount:184,unit:"centimetros7"},gramatura:{quotient:{amount:165,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:3.3,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"02",hex:"#000000",label:"Preto"}},composition:{PES:.47,CO:.53},caracteristics:{}},9:{id:9,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"13",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Piquet",nome:"Piquet ingles PA",largura:{amount:184,unit:"centimetros7"},gramatura:{quotient:{amount:165,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:3.3,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"03",hex:"#0000ff",label:"Royal"}},composition:{PES:.47,CO:.53},caracteristics:{}},10:{id:10,type:"linha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"136",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{nome:"Linha mundial",cor:{id:"03",hex:"#0000ff",label:"Royal"}}},11:{id:11,type:"malha",suppliers:["Sajama"],industry:"Sajama",externalId:"05006",externalURL:"https://www.sajama.com.br/malha-30/1-penteado",images:["https://lirp.cdn-website.com/54ea075d/dms3rep/multi/opt/6494+AZUL+BB-3361c999-1920w.JPG"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha 30/1 Penteada",largura:{amount:120,unit:"centimetros7"},gramatura:{quotient:{amount:165,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:3.4,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"6494",hex:"#5eb2d9",label:"Azul BB"}},composition:{CO:1},caracteristics:{}},12:{id:12,type:"malha",suppliers:["Sajama"],industry:"Sajama",externalId:"05006",externalURL:"https://www.sajama.com.br/malha-30/1-penteado",images:["https://lirp.cdn-website.com/54ea075d/dms3rep/multi/opt/7374+LIM%C3%83O-f144e819-1920w.JPG"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha 30/1 Penteada",largura:{amount:120,unit:"centimetros7"},gramatura:{quotient:{amount:165,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},rendimento:{quotient:{amount:3.4,unit:"metros5"},dividend:{amount:1,unit:"kilogramas6"}},trama:"desconhecido",cor:{id:"7374",hex:"#84E225",label:"Limão"}},composition:{CO:1},caracteristics:{}},13:{id:13,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composição alia conforto, resistência e mobilidade com baixa manutenção, além de oferecer proteção UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline Amélie",largura:{amount:135,unit:"centimetros7"},gramatura:{quotient:{amount:139,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},trama:"Maquinetada",cor:{id:"003-01",hex:"#d4d4d4",label:"Branco"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},14:{id:14,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composição alia conforto, resistência e mobilidade com baixa manutenção, além de oferecer proteção UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline Amélie",largura:{amount:135,unit:"centimetros7"},gramatura:{quotient:{amount:139,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},trama:"Maquinetada",cor:{id:"004-8112",hex:"#eaebe7",label:"Off White"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},15:{id:15,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composição alia conforto, resistência e mobilidade com baixa manutenção, além de oferecer proteção UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline Amélie",largura:{amount:135,unit:"centimetros7"},gramatura:{quotient:{amount:139,unit:"gramas7"},dividend:{amount:1,unit:"metrosquadrados17"}},trama:"Maquinetada",cor:{id:"001-1234",hex:"#b4c1b9",label:"Ceu"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},16:{id:16,type:"botao",suppliers:["Linhas General"],industry:"Linhas General",externalId:"28",externalURL:"https://linhasgeneral.com.br/inicio/28-botao-transparente-tamanho-18-c144-un.html",images:["https://linhasgeneral.com.br/135-large_default/botao-transparente-tamanho-18-c144-un.jpg"],description:"Botão",schemaVersion:"0.0.1",attributes:{categoria:"Transparente",nome:"Botão Transparente",tamanho:18,cor:{id:"003-01",hex:"#ffffffff",label:"Transparente"}}},17:{id:17,type:"botao",suppliers:["Linhas General"],industry:"Linhas General",externalId:"28",externalURL:"https://linhasgeneral.com.br/inicio/132-botao-transparente-tamanho-18-c144-un.html",images:["https://linhasgeneral.com.br/135-large_default/botao-transparente-tamanho-18-c144-un.jpg"],description:"Botão",schemaVersion:"0.0.1",attributes:{categoria:"Transparente",nome:"Botão Transparente",tamanho:20,cor:{id:"003-01",hex:"#ffffffff",label:"Transparente"}}},18:{id:18,type:"papel",suppliers:["KGepel"],industry:"KGepel",externalId:"5902.007.110",externalURL:"https://kgepel.com.br/linha-especial/sulfite-bobina-75g-914mm-c-50mt/",images:["https://kgepel.com.br/wp-content/uploads/2023/10/BOBINAS-PLOTER-1-scaled.jpg"],description:"Descubra a excelência em impressão com nosso Sulfite em Bobina para Impressão Plotter, um produto de 75g que redefine os padrões de qualidade. Com uma largura padrão de 914mm e uma metragem linear de 50 metros, esse sulfite oferece a base perfeita para suas necessidades de impressão",schemaVersion:"0.0.1",attributes:{categoria:"Bobina Plotter",nome:"SULFITE BOBINA 75G 914MM c/ 50mt",comprimento:50,comprimentoUnidade:"m",largura:914,larguraUnidade:"mm"}}}))}});function se({dispatch:e,managers:{storeManager:t,componentRegistryManager:a,layoutManager:n,ribbonMenuManager:d,viewportManager:l}}){t.functions.loadReducer(c,re.reducer),t.functions.registerMiddleware(B),t.functions.registerMiddleware(D),e(j({})),e(k({})),a.functions.registerComponents({ribbonMenuSections:{MaterialTypeSection:K.memo(oe)}}),d.functions.addNewTab({label:"Materiais",sectionNames:["MaterialTypeSection"],type:"base"})}const le=({id:e,field:t,value:a,multiple:n=!1})=>{const d=Z(),l=u=>{d.current.setEditCellValue({id:e,field:t,value:u.target.value})};return o.jsx(E,{value:a,onChange:l,multiple:n})},ue=()=>{const e=g("Store"),{useAppSelector:t}=e.hooks;return t(U)};function de(e){const t=g("Store"),{useAppSelector:a}=t.hooks;return a(P(d=>Object.values(d).reduce((l,u)=>(e.includes(u.id)&&(l[u.id]=u),l),{})))}const pe={name:c,version:ee,depends_on:["Layout","Graph","SVG"],components:{MaterialTypeSelector:E,MaterialSelector:X,CRUDMaterialTypeCell:le},store:{actions:{},middlewares:[],reducers:{}},hooks:{useMaterialTypes:ue,useMaterials:de},constants:{},kernelCalls:{startModule:se,restartModule:()=>{},shutdownModule:()=>{}}};export{pe as m};
