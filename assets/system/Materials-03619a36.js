import{b as C,n as G,o as l,B as V,T as W,r as p,aZ as U,a_ as f,a$ as S,bk as F,b0 as w,c as M,d as j,Z as H,e as E,R as Z,a2 as Y}from"../vendor-3d8cd717.js";import{n as T,A as y}from"../kernel-18640e9b.js";const J=e=>{const r=e??(n=>n);return C(n=>n.Materials,n=>n.materials,n=>n&&r(n.materials))},P=C(e=>e.Materials,e=>e.materialTypes),K=e=>C(a=>a.Materials,a=>a.materialTypes[e]),Q=({color:e,previewSize:a})=>{const r=G(),n=a??15;return l.jsxs(V,{sx:{display:"flex",width:"100%",alignItems:"center",gap:1,justifyContent:"space-between"},children:[l.jsx("svg",{width:n,height:n,children:l.jsx("circle",{r:n/2,cx:n/2,cy:n/2,stroke:r.palette.getContrastText(r.palette.background.default),strokeWidth:.5,fill:e.hex})}),l.jsx(W,{children:e.label??e.id})]})},X=({type:e,value:a,filter:r,onChange:n})=>{const o=T("Store"),{useAppSelector:d}=o.hooks,u=d(K(e)),s=u.schemas[u.latestSchema].selector,D=p.useCallback(t=>!0,[]),h=d(J(t=>Object.values(t).filter(i=>i.type===e).filter(r??D).reduce((i,g)=>({...i,[g.id]:g}),{}))),x=Object.values(h).reduce((t,i)=>t[i.industry]?t[i.industry][i.externalId]?{...t,[i.industry]:{...t[i.industry],[i.externalId]:{...t[i.industry][i.externalId],extra:[...t[i.industry][i.externalId].extra,i]}}}:{...t,[i.industry]:{...t[i.industry],[i.externalId]:{label:i.attributes[s.principal],extra:[i]}}}:{...t,[i.industry]:{[i.externalId]:{label:i.attributes[s.principal],extra:[i]}}},{}),[b,q]=p.useState(Object.values(h).find(t=>t.id===a)),[c,N]=p.useState(b?`${b?.industry}-${b?.externalId}`:void 0),_=p.useCallback(t=>{typeof t.target.value!="string"&&(q(Object.values(h).find(i=>i.id===t.target.value)),n&&n(t.target.value))},[h]);return l.jsxs(V,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[l.jsxs(U,{sx:{m:1,width:"100%"},fullWidth:!0,size:"small",children:[l.jsx(f,{id:"label",sx:{textTransform:"capitalize"},children:s.principal}),l.jsx(S,{labelId:"label",id:"material-name",value:c??"",onChange:t=>N(t.target.value),label:s.principal,children:Object.entries(x).map(([t,i])=>[l.jsx(F,{children:t}),...Object.entries(i).map(([g,z])=>l.jsx(w,{value:`${t}-${g}`,children:z.label},g))])})]}),l.jsxs(U,{sx:{m:1,minWidth:120,width:"fit-content"},size:"small",children:[l.jsx(f,{id:"label",sx:{textTransform:"capitalize"},children:s.extra}),l.jsx(S,{labelId:"label",id:"material-extra",value:b?.id??"",onChange:_,label:s.extra,children:c&&c.split("-")[0]in x&&c.split("-")[1]in x[c.split("-")[0]]&&x[c.split("-")[0]][c.split("-")[1]].extra.map(t=>l.jsx(w,{value:t.id,children:s.extra==="cor"?l.jsx(Q,{color:t.attributes[s.extra]}):l.jsx(l.Fragment,{children:t.attributes[s.extra]})},t.id))})]})]})},R=({filter:e,value:a,...r})=>{const n=T("Store"),{useAppSelector:o}=n.hooks,d=o(P),u=p.useCallback(s=>!0,[]);return l.jsxs(U,{sx:{m:1,minWidth:120,width:"min-content"},fullWidth:!0,size:"small",children:[l.jsx(f,{id:"label",children:"Tipo"}),l.jsx(S,{...r,labelId:"label",id:"material-type",value:a??"",label:"Tipo",children:Object.values(d).filter(e??u).map(s=>l.jsx(w,{value:s.name,children:s.label},s.name))})]})},m="Materials",ee="0.0.1",L={},A={},ae={materials:A,materialTypes:L},I=M(`[${m}:Materials:${y.COMMAND}] Load material types`),k=M(`[${m}:Materials:${y.EVENT}] Material types loaded`),te=j({name:"materialTypesSlice",initialState:L,reducers:{},extraReducers:e=>{e.addCase(k,(a,{payload:r})=>({...a,...r}))}}),v=M(`[${m}:Materials:${y.COMMAND}] Load materials`),O=M(`[${m}:Materials:${y.EVENT}] Materials loaded`),ie=j({name:"materialsSlice",initialState:A,reducers:{},extraReducers:e=>{e.addCase(O,(a,{payload:r})=>({...a,...r}))}}),re=j({name:m,initialState:ae,reducers:{},extraReducers:e=>{e.addDefaultCase((a,r)=>({...a,materials:ie.reducer(a.materials,r),materialTypes:te.reducer(a.materialTypes,r)}))}}),le=()=>{const e=T("Store"),{useAppDispatch:a}=e.hooks,r=a();return{functions:{loadMaterialTypes:()=>{r(I({}))}}}},ne=()=>{le();const e=p.useCallback((a,r)=>{},[]);return l.jsx(l.Fragment,{children:l.jsx(H,{onClick:()=>e("Create Material","camisa-polo/processed.svg"),children:"Create new material type"})})},$=E();$.startListening({actionCreator:I,effect:async({payload:e},a)=>{const{dispatch:r}=a;r(k({malha:{name:"malha",label:"Malha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{fornecedor:"string",categoria:"string",nome:"string",cor:"color",largura:"number",larguraUnidade:"string",gramatura:"number",gramaturaUnidade:"string",rendimento:"number",rendimentoUInidade:"string",trama:"string"},selector:{principal:"nome",extra:"cor"}}}},tecido:{name:"tecido",label:"Tecido",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{categoria:"string",nome:"string",cor:"color",largura:"number",larguraUnidade:"string",gramatura:"number",gramaturaUnidade:"string",trama:"string"},selector:{principal:"nome",extra:"cor"}}}},linha:{name:"linha",label:"Linha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{nome:"string",cor:"color"},selector:{principal:"nome",extra:"cor"}}}},agulha:{name:"agulha",label:"Agulha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{fornecedor:"string",categoria:"string",nome:"string",espessura:"number"},selector:{principal:"nome",extra:"espessura"}}}}}))}});const B=E();B.startListening({actionCreator:v,effect:async({payload:e},a)=>{const{dispatch:r}=a;r(O({1:{id:1,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"01",hex:"#ffffff",label:"Branco"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},2:{id:2,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"01",hex:"#000000",label:"Preto"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},3:{id:3,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"03",hex:"#0000ff",label:"Royal"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},4:{id:4,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"04",hex:"#000055",label:"Marinho"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},5:{id:5,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"04",hex:"#ff0000",label:"Vermelho"}},composition:{PES:.67,CV:.33},caracteristics:{}},6:{id:6,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"15",externalURL:"https://mundialtextil.com.br/produto/malha-colegial/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/02/malha-CELESTE-15.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Colegial",nome:"Malha colegial",largura:152,larguraUnidade:"cm",gramatura:295,gramaturaUnidade:"g/m2",rendimento:2.23,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"01",hex:"#ffffff",label:"Branco"}},composition:{PES:.65,CO:.35},caracteristics:{}},7:{id:7,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"15",externalURL:"https://mundialtextil.com.br/produto/malha-colegial/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/02/malha-CELESTE-15.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Colegial",nome:"Malha colegial",largura:152,larguraUnidade:"cm",gramatura:295,gramaturaUnidade:"g/m2",rendimento:2.23,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"02",hex:"#000000",label:"Preto"}},composition:{PES:.65,CO:.35},caracteristics:{}},8:{id:8,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"13",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Piquet",nome:"Piquet ingles PA",largura:184,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.3,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"02",hex:"#000000",label:"Preto"}},composition:{PES:.47,CO:.53},caracteristics:{}},9:{id:9,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"13",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Piquet",nome:"Piquet ingles PA",largura:184,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.3,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"03",hex:"#0000ff",label:"Royal"}},composition:{PES:.47,CO:.53},caracteristics:{}},10:{id:10,type:"linha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"136",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{nome:"Linha mundial",cor:{id:"03",hex:"#0000ff",label:"Royal"}}},11:{id:11,type:"malha",suppliers:["Sajama"],industry:"Sajama",externalId:"05006/02",externalURL:"https://www.sajama.com.br/produtos.php?totReg=1&idx=4&ctg=4&sctg=0&txpesq=",images:[],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha 30/1 Penteada",largura:120,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.4,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"6494",hex:"#5eb2d9",label:"Azul BB"}},composition:{CO:1},caracteristics:{}},12:{id:12,type:"malha",suppliers:["Sajama"],industry:"Sajama",externalId:"05006/02",externalURL:"https://www.sajama.com.br/produtos.php?totReg=1&idx=4&ctg=4&sctg=0&txpesq=",images:[],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha 30/1 Penteada",largura:120,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.4,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"7375",hex:"#02420b",label:"Bandeira"}},composition:{CO:1},caracteristics:{}},13:{id:13,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composição alia conforto, resistência e mobilidade com baixa manutenção, além de oferecer proteção UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline Amélie",largura:135,larguraUnidade:"cm",gramatura:139,gramaturaUnidade:"g/m2",trama:"Maquinetada",cor:{id:"003-01",hex:"#d4d4d4",label:"Branco"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},14:{id:14,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composição alia conforto, resistência e mobilidade com baixa manutenção, além de oferecer proteção UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline Amélie",largura:135,larguraUnidade:"cm",gramatura:139,gramaturaUnidade:"g/m2",trama:"Maquinetada",cor:{id:"004-8112",hex:"#eaebe7",label:"Off White"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},15:{id:15,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composição alia conforto, resistência e mobilidade com baixa manutenção, além de oferecer proteção UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline Amélie",largura:135,larguraUnidade:"cm",gramatura:139,gramaturaUnidade:"g/m2",trama:"Maquinetada",cor:{id:"001-1234",hex:"#b4c1b9",label:"Ceu"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}}}))}});function se({dispatch:e,managers:{storeManager:a,componentRegistryManager:r,layoutManager:n,ribbonMenuManager:o,viewportManager:d}}){a.functions.loadReducer(m,re.reducer),a.functions.registerMiddleware($),a.functions.registerMiddleware(B),e(I({})),e(v({})),r.functions.registerComponents({ribbonMenuSections:{MaterialTypeSection:Z.memo(ne)}}),o.functions.addNewTab({label:"Materiais",sectionNames:["MaterialTypeSection"],type:"base"})}const oe=({id:e,field:a,value:r,multiple:n=!1})=>{const o=Y(),d=u=>{o.current.setEditCellValue({id:e,field:a,value:u.target.value})};return l.jsx(R,{value:r,onChange:d,multiple:n})},de=()=>{const e=T("Store"),{useAppSelector:a}=e.hooks;return a(P)},ue={name:m,version:ee,depends_on:["Layout","Graph","SVG"],components:{MaterialTypeSelector:R,MaterialSelector:X,CRUDMaterialTypeCell:oe},store:{actions:{},middlewares:[],reducers:{}},hooks:{useMaterials:de},constants:{},kernelCalls:{startModule:se,restartModule:()=>{},shutdownModule:()=>{}}};export{ue as m};
