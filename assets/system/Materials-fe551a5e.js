import{b as C,n as z,o as n,B as L,T as F,r as p,b0 as U,b1 as y,b2 as S,bj as W,b3 as w,c as f,d as j,Z as H,e as V,R as K,a2 as Y}from"../vendor-a3d4e7ed.js";import{n as T,A as M}from"../kernel-ffdaacf1.js";const Z=e=>{const i=e??(l=>l);return C(l=>l.Materials,l=>l.materials,l=>l&&i(l.materials))},P=C(e=>e.Materials,e=>e.materialTypes),J=e=>C(a=>a.Materials,a=>a.materialTypes[e]),Q=({color:e,previewSize:a})=>{const i=z(),l=a??15;return n.jsxs(L,{sx:{display:"flex",width:"100%",alignItems:"center",gap:1,justifyContent:"space-between"},children:[n.jsx("svg",{width:l,height:l,children:n.jsx("circle",{r:l/2,cx:l/2,cy:l/2,stroke:i.palette.getContrastText(i.palette.background.default),strokeWidth:.5,fill:e.hex})}),n.jsx(F,{children:e.label??e.id})]})},X=({type:e,value:a,filter:i,onChange:l})=>{const o=T("Store"),{useAppSelector:d}=o.hooks,u=d(J(e)),s=u.schemas[u.latestSchema].selector,D=p.useCallback(t=>!0,[]),h=d(Z(t=>Object.values(t).filter(r=>r.type===e).filter(i??D).reduce((r,g)=>({...r,[g.id]:g}),{}))),x=Object.values(h).reduce((t,r)=>t[r.industry]?t[r.industry][r.externalId]?{...t,[r.industry]:{...t[r.industry],[r.externalId]:{...t[r.industry][r.externalId],extra:[...t[r.industry][r.externalId].extra,r]}}}:{...t,[r.industry]:{...t[r.industry],[r.externalId]:{label:r.attributes[s.principal],extra:[r]}}}:{...t,[r.industry]:{[r.externalId]:{label:r.attributes[s.principal],extra:[r]}}},{}),[b,N]=p.useState(Object.values(h).find(t=>t.id===a)),[c,$]=p.useState(b?`${b?.industry}-${b?.externalId}`:void 0),G=p.useCallback(t=>{typeof t.target.value!="string"&&(N(Object.values(h).find(r=>r.id===t.target.value)),l&&l(t.target.value))},[h]);return n.jsxs(L,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[n.jsxs(U,{sx:{m:1,width:"100%"},fullWidth:!0,size:"small",children:[n.jsx(y,{id:"label",sx:{textTransform:"capitalize"},children:s.principal}),n.jsx(S,{labelId:"label",id:"material-name",value:c??"",onChange:t=>$(t.target.value),label:s.principal,children:Object.entries(x).map(([t,r])=>[n.jsx(W,{children:t}),...Object.entries(r).map(([g,_])=>n.jsx(w,{value:`${t}-${g}`,children:_.label},g))])})]}),n.jsxs(U,{sx:{m:1,minWidth:120,width:"fit-content"},size:"small",children:[n.jsx(y,{id:"label",sx:{textTransform:"capitalize"},children:s.extra}),n.jsx(S,{labelId:"label",id:"material-extra",value:b?.id??"",onChange:G,label:s.extra,children:c&&c.split("-")[0]in x&&c.split("-")[1]in x[c.split("-")[0]]&&x[c.split("-")[0]][c.split("-")[1]].extra.map(t=>n.jsx(w,{value:t.id,children:s.extra==="cor"?n.jsx(Q,{color:t.attributes[s.extra]}):n.jsx(n.Fragment,{children:t.attributes[s.extra]})},t.id))})]})]})},R=({filter:e,value:a,...i})=>{const l=T("Store"),{useAppSelector:o}=l.hooks,d=o(P),u=p.useCallback(s=>!0,[]);return n.jsxs(U,{sx:{m:1,minWidth:120,width:"min-content"},fullWidth:!0,size:"small",children:[n.jsx(y,{id:"label",children:"Tipo"}),n.jsx(S,{...i,labelId:"label",id:"material-type",value:a??"",label:"Tipo",children:Object.values(d).filter(e??u).map(s=>n.jsx(w,{value:s.name,children:s.label},s.name))})]})},m="Materials",ee="0.0.1",E={},A={},ae={materials:A,materialTypes:E},I=f(`[${m}:Materials:${M.COMMAND}] Load material types`),k=f(`[${m}:Materials:${M.EVENT}] Material types loaded`),te=j({name:"materialTypesSlice",initialState:E,reducers:{},extraReducers:e=>{e.addCase(k,(a,{payload:i})=>({...a,...i}))}}),v=f(`[${m}:Materials:${M.COMMAND}] Load materials`),O=f(`[${m}:Materials:${M.EVENT}] Materials loaded`),re=j({name:"materialsSlice",initialState:A,reducers:{},extraReducers:e=>{e.addCase(O,(a,{payload:i})=>({...a,...i}))}}),ie=j({name:m,initialState:ae,reducers:{},extraReducers:e=>{e.addDefaultCase((a,i)=>({...a,materials:re.reducer(a.materials,i),materialTypes:te.reducer(a.materialTypes,i)}))}}),ne=()=>{const e=T("Store"),{useAppDispatch:a}=e.hooks,i=a();return{functions:{loadMaterialTypes:()=>{i(I({}))}}}},le=()=>{ne();const e=p.useCallback((a,i)=>{},[]);return n.jsx(n.Fragment,{children:n.jsx(H,{onClick:()=>e("Create Material","camisa-polo/processed.svg"),children:"Create new material type"})})},B=V();B.startListening({actionCreator:I,effect:async({payload:e},a)=>{const{dispatch:i}=a;i(k({malha:{name:"malha",label:"Malha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{fornecedor:"string",categoria:"string",nome:"string",cor:"color",largura:"number",larguraUnidade:"string",gramatura:"number",gramaturaUnidade:"string",rendimento:"number",rendimentoUnidade:"string",trama:"string"},selector:{principal:"nome",extra:"cor"}}}},tecido:{name:"tecido",label:"Tecido",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{categoria:"string",nome:"string",cor:"color",largura:"number",larguraUnidade:"string",gramatura:"number",gramaturaUnidade:"string",trama:"string"},selector:{principal:"nome",extra:"cor"}}}},linha:{name:"linha",label:"Linha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{nome:"string",cor:"color"},selector:{principal:"nome",extra:"cor"}}}},agulha:{name:"agulha",label:"Agulha",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{fornecedor:"string",categoria:"string",nome:"string",espessura:"number"},selector:{principal:"nome",extra:"espessura"}}}},botao:{name:"botao",label:"BotÃ£o",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{categoria:"string",nome:"string",tamanho:"number",cor:"color"},selector:{principal:"nome",extra:"tamanho"}}}},papel:{name:"papel",label:"Papel",latestSchema:"0.0.1",schemas:{"0.0.1":{version:"0.0.1",attributes:{categoria:"string",nome:"string",comprimento:"number",comprimentoUnidade:"string",largura:"number",larguraUnidade:"string"},selector:{principal:"categoria",extra:"nome"}}}}}))}});const q=V();q.startListening({actionCreator:v,effect:async({payload:e},a)=>{const{dispatch:i}=a;i(O({1:{id:1,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"01",hex:"#ffffff",label:"Branco"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},2:{id:2,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"01",hex:"#000000",label:"Preto"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},3:{id:3,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"03",hex:"#0000ff",label:"Royal"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},4:{id:4,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"04",hex:"#000055",label:"Marinho"}},composition:{PES:.67,CV:.33},caracteristics:{"anti-pilling":!0,tubular:!0}},5:{id:5,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"05",externalURL:"https://mundialtextil.com.br/produto/malha-pv-tubular-anti-pilling/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-PV-TUBULAR.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha PV",largura:120,larguraUnidade:"cm",gramatura:170,gramaturaUnidade:"g/m2",rendimento:2.5,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"04",hex:"#ff0000",label:"Vermelho"}},composition:{PES:.67,CV:.33},caracteristics:{}},6:{id:6,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"15",externalURL:"https://mundialtextil.com.br/produto/malha-colegial/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/02/malha-CELESTE-15.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Colegial",nome:"Malha colegial",largura:152,larguraUnidade:"cm",gramatura:295,gramaturaUnidade:"g/m2",rendimento:2.23,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"01",hex:"#ffffff",label:"Branco"}},composition:{PES:.65,CO:.35},caracteristics:{}},7:{id:7,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"15",externalURL:"https://mundialtextil.com.br/produto/malha-colegial/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/02/malha-CELESTE-15.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Colegial",nome:"Malha colegial",largura:152,larguraUnidade:"cm",gramatura:295,gramaturaUnidade:"g/m2",rendimento:2.23,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"02",hex:"#000000",label:"Preto"}},composition:{PES:.65,CO:.35},caracteristics:{}},8:{id:8,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"13",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Piquet",nome:"Piquet ingles PA",largura:184,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.3,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"02",hex:"#000000",label:"Preto"}},composition:{PES:.47,CO:.53},caracteristics:{}},9:{id:9,type:"malha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"13",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{categoria:"Piquet",nome:"Piquet ingles PA",largura:184,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.3,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"03",hex:"#0000ff",label:"Royal"}},composition:{PES:.47,CO:.53},caracteristics:{}},10:{id:10,type:"linha",suppliers:["MundialTextil"],industry:"MundialTextil",externalId:"136",externalURL:"https://mundialtextil.com.br/produto/piquet-ingles-pa/",images:["https://mundialtextil.com.br/wp-content/uploads/2019/01/malha-BRANCO-INGLES-E-STRETCH.jpg"],schemaVersion:"0.0.1",attributes:{nome:"Linha mundial",cor:{id:"03",hex:"#0000ff",label:"Royal"}}},11:{id:11,type:"malha",suppliers:["Sajama"],industry:"Sajama",externalId:"05006/02",externalURL:"https://www.sajama.com.br/produtos.php?totReg=1&idx=4&ctg=4&sctg=0&txpesq=",images:[],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha 30/1 Penteada",largura:120,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.4,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"6494",hex:"#5eb2d9",label:"Azul BB"}},composition:{CO:1},caracteristics:{}},12:{id:12,type:"malha",suppliers:["Sajama"],industry:"Sajama",externalId:"05006/02",externalURL:"https://www.sajama.com.br/produtos.php?totReg=1&idx=4&ctg=4&sctg=0&txpesq=",images:[],schemaVersion:"0.0.1",attributes:{categoria:"Tubular",nome:"Malha 30/1 Penteada",largura:120,larguraUnidade:"cm",gramatura:165,gramaturaUnidade:"g/m2",rendimento:3.4,rendimentoUInidade:"m/kg",trama:"desconhecido",cor:{id:"7375",hex:"#02420b",label:"Bandeira"}},composition:{CO:1},caracteristics:{}},13:{id:13,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composiÃ§Ã£o alia conforto, resistÃªncia e mobilidade com baixa manutenÃ§Ã£o, alÃ©m de oferecer proteÃ§Ã£o UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline AmÃ©lie",largura:135,larguraUnidade:"cm",gramatura:139,gramaturaUnidade:"g/m2",trama:"Maquinetada",cor:{id:"003-01",hex:"#d4d4d4",label:"Branco"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},14:{id:14,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composiÃ§Ã£o alia conforto, resistÃªncia e mobilidade com baixa manutenÃ§Ã£o, alÃ©m de oferecer proteÃ§Ã£o UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline AmÃ©lie",largura:135,larguraUnidade:"cm",gramatura:139,gramaturaUnidade:"g/m2",trama:"Maquinetada",cor:{id:"004-8112",hex:"#eaebe7",label:"Off White"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},15:{id:15,type:"tecido",suppliers:["Doptex"],industry:"Doptex",externalId:"1231",externalURL:"https://www.doptex.com.br/produtos-e-servicos/tecidos/workwear/linha-shirting/tricoline-amelie/",images:["https://www.doptex.com.br/site/wp-content/uploads/2021/11/1231-001-1215-Dark_Tricoline-Ame%CC%81lie-folded-up.png"],description:`#Aplicabilidade

Artigo maquinetado de textura particular. Sua excelente composiÃ§Ã£o alia conforto, resistÃªncia e mobilidade com baixa manutenÃ§Ã£o, alÃ©m de oferecer proteÃ§Ã£o UV 25.`,schemaVersion:"0.0.1",attributes:{categoria:"Tricoline",nome:"Tricoline AmÃ©lie",largura:135,larguraUnidade:"cm",gramatura:139,gramaturaUnidade:"g/m2",trama:"Maquinetada",cor:{id:"001-1234",hex:"#b4c1b9",label:"Ceu"}},composition:{PES:.77,CO:.19,PUE:.04},caracteristics:{fio:40,protecaoUV:!0,agulha:"70/80 - Ponta Arredondada"}},16:{id:16,type:"botao",suppliers:["Linhas General"],industry:"Linhas General",externalId:"28",externalURL:"https://linhasgeneral.com.br/inicio/28-botao-transparente-tamanho-18-c144-un.html",images:["https://linhasgeneral.com.br/135-large_default/botao-transparente-tamanho-18-c144-un.jpg"],description:"BotÃ£o",schemaVersion:"0.0.1",attributes:{categoria:"Transparente",nome:"BotÃ£o Transparente",tamanho:18,cor:{id:"003-01",hex:"#ffffffff",label:"Transparente"}}},17:{id:17,type:"botao",suppliers:["Linhas General"],industry:"Linhas General",externalId:"28",externalURL:"https://linhasgeneral.com.br/inicio/132-botao-transparente-tamanho-18-c144-un.html",images:["https://linhasgeneral.com.br/135-large_default/botao-transparente-tamanho-18-c144-un.jpg"],description:"BotÃ£o",schemaVersion:"0.0.1",attributes:{categoria:"Transparente",nome:"BotÃ£o Transparente",tamanho:20,cor:{id:"003-01",hex:"#ffffffff",label:"Transparente"}}},18:{id:18,type:"papel",suppliers:["KGepel"],industry:"KGepel",externalId:"5902.007.110",externalURL:"https://kgepel.com.br/linha-especial/sulfite-bobina-75g-914mm-c-50mt/",images:["https://kgepel.com.br/wp-content/uploads/2023/10/BOBINAS-PLOTER-1-scaled.jpg"],description:"Descubra a excelÃªncia em impressÃ£o com nosso Sulfite em Bobina para ImpressÃ£o Plotter, um produto de 75g que redefine os padrÃµes de qualidade. Com uma largura padrÃ£o de 914mm e uma metragem linear de 50 metros, esse sulfite oferece a base perfeita para suas necessidades de impressÃ£o",schemaVersion:"0.0.1",attributes:{categoria:"Bobina Plotter",nome:"SULFITE BOBINA 75G 914MM c/ 50mt",comprimento:50,comprimentoUnidade:"m",largura:914,larguraUnidade:"mm"}}}))}});function se({dispatch:e,managers:{storeManager:a,componentRegistryManager:i,layoutManager:l,ribbonMenuManager:o,viewportManager:d}}){a.functions.loadReducer(m,ie.reducer),a.functions.registerMiddleware(B),a.functions.registerMiddleware(q),e(I({})),e(v({})),i.functions.registerComponents({ribbonMenuSections:{MaterialTypeSection:K.memo(le)}}),o.functions.addNewTab({label:"Materiais",sectionNames:["MaterialTypeSection"],type:"base"})}const oe=({id:e,field:a,value:i,multiple:l=!1})=>{const o=Y(),d=u=>{o.current.setEditCellValue({id:e,field:a,value:u.target.value})};return n.jsx(R,{value:i,onChange:d,multiple:l})},de=()=>{const e=T("Store"),{useAppSelector:a}=e.hooks;return a(P)},ue={name:m,version:ee,depends_on:["Layout","Graph","SVG"],components:{MaterialTypeSelector:R,MaterialSelector:X,CRUDMaterialTypeCell:oe},store:{actions:{},middlewares:[],reducers:{}},hooks:{useMaterials:de},constants:{},kernelCalls:{startModule:se,restartModule:()=>{},shutdownModule:()=>{}}};export{ue as m};
