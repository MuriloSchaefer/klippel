import{c as _,d as xe,b as ge,_ as Q,o as e,B as f,aZ as F,a_ as ve,a$ as z,b0 as N,r as g,aD as O,aT as W,aX as be,aS as P,aO as ye,R as w,n as fe,ba as je,P as Ie,I as V,bb as Ce,bc as Ne,bd as Se,be as Te,e as Oe,T as ie,bf as M,bg as re}from"../vendor-fbb1c590.js";import{A as U,n as p,o as Le,l as Ge}from"../kernel-db330990.js";const L="Converter",Me="0.0.1",S="conversion-graph",ke={week:"Semana",day:"Dia",h:"H",m:"m",s:"s",ms:"ms"},Ee={selectedNode:void 0},de=_(`[${L}:${U.COMMAND}] Load conversion graph`),H=_(`[${L}:${U.COMMAND}] Select node`),we=_(`[${L}:${U.EVENT}] Conversion graph loaded`),Ae=_(`[${L}:${U.COMMAND}] Node selected`),_e=xe({name:L,initialState:Ee,reducers:{},extraReducers:t=>{t.addCase(H,(o,{payload:s})=>({...o,selectedNode:s}))}}),ee=t=>t.Converter,G=t=>{const o=p("Store"),s=p("Graph"),l=p("Layout"),{useGraph:a}=s.hooks,n=a(S,c=>c),i=l.hooks.usePanelsManager(),{useAppDispatch:r,useAppSelector:u}=o.hooks,m=r(),d=ge(ee,t),j=u(d);return u(ee),{state:j,selectNode:c=>{m(H(c)),i.functions.openDetails()},addUnit:(c,k,T)=>{const b=Q.uniqueId(c.toLowerCase().replace(" ",""));n.actions.addNode({type:"UNIT",id:b,name:c,position:{x:0,y:0},abbreviation:k}),console.log(T),T&&(console.log("add scale"),n.actions.addEdge({id:`${b} -> ${T}`,type:"BELONGS_TO",sourceId:b,targetId:T}))},updateUnit:(c,k,T,b)=>{n.actions.updateNode({id:c,name:k,abbreviation:T});const I=n.state?.adjacencyList[c].outputs.filter(E=>n.state?.edges[E].type==="BELONGS_TO").map(E=>n.state?.edges[E]).pop();b?(I&&I.targetId!==b&&n.actions.removeEdge(I.id),n.actions.addEdge({id:`${c} -> ${b}`,type:"BELONGS_TO",sourceId:c,targetId:b})):I&&n.actions.removeEdge(I.id)},addScale:c=>{n.actions.addNode({type:"SCALE",id:Q.uniqueId(c.toLowerCase().replace(" ","")),name:c,position:{x:0,y:0}})}}};function le({onChange:t,value:o,...s}){const l=p("Graph"),{hooks:{useGraph:a}}=l,n=a(S,i=>i&&Object.values(i.nodes).filter(r=>r.type==="SCALE"));return n.state?e.jsx(f,{role:"scale-selector",...s,sx:{display:"flex",gap:.2},children:e.jsxs(F,{sx:{m:1,minWidth:120,width:"min-content"},children:[e.jsx(ve,{id:"label",children:"Escala"}),e.jsxs(z,{id:"scale-selector",inputProps:{id:"scale"},label:"Escala",labelId:"label",size:"small",onChange:i=>t(i.target.value),value:o??"",children:[n.state.map(i=>e.jsx(N,{value:i.id,children:i.name})),e.jsx(N,{value:"",children:"Nenhuma"})]})]})}):e.jsx(e.Fragment,{})}const te={name:void 0,abbreviation:void 0,scale:void 0},Ue=()=>{const t=p("Pointer"),{PointerContainer:o,ConfirmAndCloseButton:s}=t.components,l=G(r=>r),[a,n]=g.useState(te),i=g.useCallback(()=>{!a.name||!a.abbreviation||(l.addUnit(a.name,a.abbreviation,a.scale),n(te))},[a,l]);return e.jsx(o,{component:e.jsxs(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(O,{id:"unit-name",label:"Nome",variant:"standard",value:a.name,onChange:r=>n(u=>({...u,name:r.target.value}))}),e.jsx(O,{id:"abbreviation",label:"Abbreviation",variant:"standard",value:a.abbreviation,onChange:r=>n(u=>({...u,abbreviation:r.target.value})),sx:{alignItems:"center"}}),e.jsx(le,{value:a.scale??"",onChange:r=>n(u=>({...u,scale:r}))})]}),actions:[e.jsx(s,{handleConfirm:i},"confirm")],children:e.jsx(W,{primary:"Unidade",secondary:"Adiciona um tipo de unidade simples",sx:{cursor:"pointer",flexGrow:1}})})},oe={name:void 0},qe=()=>{const t=p("Pointer"),{PointerContainer:o,ConfirmAndCloseButton:s}=t.components,l=G(r=>r),[a,n]=g.useState(oe),i=g.useCallback(()=>{a.name&&(l.addScale(a.name),n(oe))},[a,l]);return e.jsx(o,{component:e.jsx(f,{sx:{display:"flex",flexDirection:"column",gap:1},children:e.jsx(O,{id:"part-name",label:"Nome",variant:"standard",value:a.name,onChange:r=>n(u=>({...u,name:r.target.value}))})}),actions:[e.jsx(s,{handleConfirm:i},"confirm")],children:e.jsx(W,{primary:"Escala",secondary:"Adiciona um tipo de escala",sx:{cursor:"pointer",flexGrow:1}})})},se={name:void 0,abbreviation:void 0,scale:void 0},$e=()=>{const t=p("Pointer"),{PointerContainer:o,ConfirmAndCloseButton:s}=t.components,l=G(r=>r),[a,n]=g.useState(se),i=g.useCallback(()=>{!a.name||!a.abbreviation||(l.addUnit(a.name,a.abbreviation,a.scale),n(se))},[a,l]);return e.jsx(o,{component:e.jsx(f,{sx:{display:"flex",flexDirection:"column",gap:1}}),actions:[e.jsx(s,{handleConfirm:i},"confirm")],children:e.jsx(W,{primary:"Unidade Composta",secondary:"Adiciona um tipo de unidade composta",sx:{cursor:"pointer",flexGrow:1}})})},Pe=()=>e.jsxs(be,{role:"list-options",sx:{paddingRight:5,overflow:"auto"},children:[e.jsx(P,{disableGutters:!0,children:e.jsx(Ue,{})},"unit"),e.jsx(P,{disableGutters:!0,children:e.jsx($e,{})},"compositeUnit"),e.jsx(P,{disableGutters:!0,children:e.jsx(qe,{})},"scale")]}),Be=()=>{const t=p("Layout"),{SettingsPanel:o,Accordion:s}=t.components;return e.jsxs(o,{children:[e.jsx(s,{name:"Nodos",icon:e.jsx(ye,{}),summary:"Tipos de nodos disponíveis",children:e.jsx(Pe,{})}),e.jsx(e.Fragment,{})]})},De=({graphId:t})=>{const{hooks:{useResizeObserver:o}}=p("Layout"),{hooks:{useGraph:s}}=p("Graph"),{hooks:{useD3Container:l},d3Components:{Grid:a,DependencyCircle:n}}=p("SVG"),i=G(h=>h),r=g.useRef(null),u=g.useRef(null),m=o(u),d=s(t,h=>h),j=g.useMemo(()=>{if(!d.state?.nodes)return{nodes:[],links:[]};const h=x=>{if(!d.state)return{id:"other",name:"Outros"};const C=Object.values(d.state.edges).find(y=>y.sourceId===x.id&&y.type==="BELONGS_TO");if(C){const y=d.state.nodes[C.targetId];return{id:y.id,name:y.name}}return{id:"other",name:"Outros"}};return{nodes:Object.values(d.state.nodes).map(x=>({...x,nodeLabel:"abbreviation"in x?x.abbreviation:x.name,group:h(x),radius:5,strength:10,x:x.position.x,y:x.position.y})),links:Object.values(d.state.edges).map(x=>({...x,source:x.sourceId,target:x.targetId}))}},[d]),c=fe(),[k,T]=g.useState(!0),[b,I]=[m?.width??700,m?.height??700],E=g.useCallback(h=>{i.selectNode(h)},[]),X=g.useCallback(h=>{i.selectNode(h)},[]),he=l().width(b).height(I).underlays([a({xSettings:{range:[-1,b+1],domain:[-1,b+1]},ySettings:{range:[-1,I+1],domain:[-1,I+1]},dimensions:[b,I]}).transformZoom((h,x)=>{k&&(x.translateBy(h,b/2,I/2),T(!1))}).build]).content([n().innerRadius(Math.min(b,I)/2-20).filterNode(h=>h.type==="UNIT"||h.type==="COMPOUND_UNIT").filterLink(h=>h.type==="CONVERTS_TO").renderGroup((h,x,C,y,A,Y)=>{h.selectAll("path").data([x]).join("path").attr("id",v=>v.id).on("click",v=>v.target.id!=="other"&&X(v.target.id)).attr("class","group-arc").attr("fill",v=>y(x.id)).attr("d",(v,J)=>A(C)),h.selectAll("text").data([x]).join("text").attr("class","group-text").text(v=>v.name).attr("id",v=>v.id).on("click",v=>v.target.id!=="other"&&X(v.target.id)).attr("fill",v=>y(v.id)).attr("text-anchor",(v,J)=>(C.endAngle+C.startAngle)/2>Math.PI?"end":"start").attr("transform",(v,J)=>{const[q,$]=A.centroid(C),K=Math.sqrt(q*q+$*$);return`translate(${q/K*Y*1.3}, ${$/K*Y*1.3})`})}).renderNode((h,x,C)=>{h.append("text").text(y=>y.nodeLabel).attr("fill",y=>i.state?.selectedNode===y.id?c.palette.getContrastText(c.palette.background.default):C(y.group.id)).attr("text-anchor","middle").on("pointerdown",(y,A)=>{E(A.id),y.stopPropagation()})}).theme(c.palette.mode).build]);return g.useLayoutEffect(()=>{!m||!r.current||he.render(j,r.current)},[j,m]),d.state?e.jsx("div",{ref:u,role:"conversion-graph-viewer",style:{height:"100%",width:"100%"},children:e.jsx("svg",{ref:r,id:`${d.id}`,width:"100%",height:"100%"})}):e.jsx(e.Fragment,{})},Fe=w.memo(De),Ve=()=>{const t=p("Layout"),{Accordion:o}=t.components,s=p("Graph"),{useGraph:l}=s.hooks,a=G(m=>m.selectedNode),n=l(S,m=>a.state&&m?.nodes?{...m.nodes[a.state],scale:m.adjacencyList[a.state].outputs.filter(d=>m.edges[d].type==="BELONGS_TO").map(d=>m.edges[d].targetId).pop()}:void 0),[i,r]=g.useState(n.state);g.useEffect(()=>r(n.state),[a.state]);const u=g.useCallback(()=>{a.updateUnit(a.state,i?.name,i?.abbreviation,i?.scale)},[n]);return!a?.state||!n?.state?e.jsx(e.Fragment,{}):e.jsx(o,{name:"Propriedades",icon:e.jsx(je,{}),summary:"Propriedades da unidade",children:e.jsxs(Ie,{variant:"outlined",square:!0,sx:{width:"100%",padding:1,"&:div + div":{borderTop:0},display:"flex",justifyContent:"space-between"},role:"unit-properties",children:[e.jsx(O,{id:"unit-name",label:"Nome",variant:"standard",value:i?.name??"",onChange:m=>r(d=>d&&{...d,name:m.target.value})}),e.jsx(O,{id:"abbreviation",label:"Abreviatura",variant:"standard",value:i?.abbreviation??"",onChange:m=>r(d=>d&&{...d,abbreviation:m.target.value}),sx:{alignItems:"center"}}),e.jsx(le,{value:i?.scale??"",onChange:m=>r(d=>d&&{...d,scale:m})}),e.jsxs(f,{sx:{display:"flex",flexDirection:"column",padding:0,gap:1,justifyContent:"space-between",alignContent:"space-evenly"},role:"actions",children:[e.jsx(V,{color:"success",id:"save-unit-properties",onClick:m=>u(),children:e.jsx(Ce,{})},"save"),e.jsx(V,{color:"info",id:"reset-unit-properties",onClick:m=>r(n.state),children:e.jsx(Ne,{})},"reset")]})]})})},Re=()=>{const t=p("Layout");p("Graph").hooks;const s=G(a=>a.selectedNode),{Accordion:l}=t.components;return e.jsx(l,{name:"Converte de",icon:e.jsx(Se,{}),summary:`Quais unidades podem ser convertidas em ${s.state}`,children:e.jsx(e.Fragment,{})})},ze=()=>(p("Layout").components,e.jsxs(e.Fragment,{children:[e.jsx(Ve,{}),e.jsx(Re,{})]})),We=()=>e.jsx(e.Fragment,{children:"Escala selectionada"}),He=()=>{const t=p("Layout"),o=p("Graph"),{DetailsPanel:s}=t.components,{useGraph:l}=o.hooks,a=G(i=>i.selectedNode),n=l(S,i=>a.state?i?.nodes[a.state]:void 0);return n.state?e.jsx(s,{children:e.jsxs(e.Fragment,{children:[n?.state?.type==="UNIT"&&e.jsx(ze,{}),n?.state?.type==="SCALE"&&e.jsx(We,{})]})}):e.jsx(e.Fragment,{})},Ze=({name:t})=>{const o=p("Layout"),{ViewportNotificationsTray:s}=o.components;return e.jsxs(f,{role:"converter-graph-viewport",sx:{padding:1,height:"100%",position:"relative",overflow:"hidden"},children:[e.jsx(Fe,{graphId:S}),e.jsx(s,{children:e.jsx(e.Fragment,{})}),e.jsx(Be,{}),e.jsx(He,{})]})},ce=w.memo(Ze),Xe=()=>{const t=p("Layout"),{useViewportManager:o}=t.hooks,s=o();return e.jsx(e.Fragment,{children:e.jsx(V,{onClick:()=>s.functions.addViewport("Grafo de conversão","ConverterGraphViewport",void 0,"conversion-graph"),children:e.jsx(Te,{})})})},Ye={id:"conversion-graph",nodes:{metros5:{type:"UNIT",id:"metros5",name:"metros",position:{x:0,y:0},abbreviation:"m"},comprimento6:{type:"SCALE",id:"comprimento6",name:"Comprimento",position:{x:0,y:0}},centimetros7:{type:"UNIT",id:"centimetros7",name:"centimetros",position:{x:0,y:0},abbreviation:"cm"},kilometros8:{type:"UNIT",id:"kilometros8",name:"kilometros",position:{x:0,y:0},abbreviation:"km"},milimetros9:{type:"UNIT",id:"milimetros9",name:"milimetros",position:{x:0,y:0},abbreviation:"mm"},monetaria10:{type:"SCALE",id:"monetaria10",name:"Monetaria",position:{x:0,y:0}},reais11:{type:"UNIT",id:"reais11",name:"reais",position:{x:0,y:0},abbreviation:"R$"},dolares12:{type:"UNIT",id:"dolares12",name:"dolares",position:{x:0,y:0},abbreviation:"$"},volume13:{type:"SCALE",id:"volume13",name:"Volume",position:{x:0,y:0}},litroscubicos14:{type:"UNIT",id:"litroscubicos14",name:"litros cubicos",position:{x:0,y:0},abbreviation:"l³"},metroscubicos15:{type:"UNIT",id:"metroscubicos15",name:"metros cubicos",position:{x:0,y:0},abbreviation:"m³"},area16:{type:"SCALE",id:"area16",name:"Area",position:{x:0,y:0}},metrosquadrados17:{type:"UNIT",id:"metrosquadrados17",name:"metros quadrados",position:{x:0,y:0},abbreviation:"m²"},unitario18:{type:"UNIT",id:"unitario18",name:"unitario",position:{x:0,y:0},abbreviation:"un"},capacidade5:{type:"SCALE",id:"capacidade5",name:"Capacidade",position:{x:0,y:0}},mililitros6:{type:"UNIT",id:"mililitros6",name:"mililitros",position:{x:0,y:0},abbreviation:"ml"},litros7:{type:"UNIT",id:"litros7",name:"litros",position:{x:0,y:0},abbreviation:"l"},kilometrosquadrados8:{type:"UNIT",id:"kilometrosquadrados8",name:"kilometros quadrados",position:{x:0,y:0},abbreviation:"km²"},centimetrosquadrados9:{type:"UNIT",id:"centimetrosquadrados9",name:"centimetros quadrados",position:{x:0,y:0},abbreviation:"cm²"},temporal247:{type:"SCALE",id:"temporal247",name:"Temporal",position:{x:0,y:0}},segundos248:{type:"UNIT",id:"segundos248",name:"segundos",position:{x:0,y:0},abbreviation:"s"},minutos249:{type:"UNIT",id:"minutos249",name:"minutos",position:{x:0,y:0},abbreviation:"m"},hora250:{type:"UNIT",id:"hora250",name:"hora",position:{x:0,y:0},abbreviation:"h"},dia251:{type:"UNIT",id:"dia251",name:"dia",position:{x:0,y:0},abbreviation:"d"},mes252:{type:"UNIT",id:"mes252",name:"mes",position:{x:0,y:0},abbreviation:"m"},semana253:{type:"UNIT",id:"semana253",name:"semana",position:{x:0,y:0},abbreviation:"sem"}},edges:{"metros5 -> comprimento6":{id:"metros5 -> comprimento6",type:"BELONGS_TO",sourceId:"metros5",targetId:"comprimento6"},"centimetros7 -> comprimento6":{id:"centimetros7 -> comprimento6",type:"BELONGS_TO",sourceId:"centimetros7",targetId:"comprimento6"},"kilometros8 -> comprimento6":{id:"kilometros8 -> comprimento6",type:"BELONGS_TO",sourceId:"kilometros8",targetId:"comprimento6"},"milimetros9 -> comprimento6":{id:"milimetros9 -> comprimento6",type:"BELONGS_TO",sourceId:"milimetros9",targetId:"comprimento6"},"reais11 -> monetaria10":{id:"reais11 -> monetaria10",type:"BELONGS_TO",sourceId:"reais11",targetId:"monetaria10"},"dolares12 -> monetaria10":{id:"dolares12 -> monetaria10",type:"BELONGS_TO",sourceId:"dolares12",targetId:"monetaria10"},"litroscubicos14 -> volume13":{id:"litroscubicos14 -> volume13",type:"BELONGS_TO",sourceId:"litroscubicos14",targetId:"volume13"},"metroscubicos15 -> volume13":{id:"metroscubicos15 -> volume13",type:"BELONGS_TO",sourceId:"metroscubicos15",targetId:"volume13"},"metrosquadrados17 -> area16":{id:"metrosquadrados17 -> area16",type:"BELONGS_TO",sourceId:"metrosquadrados17",targetId:"area16"},"mililitros6 -> volume13":{id:"mililitros6 -> volume13",type:"BELONGS_TO",sourceId:"mililitros6",targetId:"volume13"},"litros7 -> volume13":{id:"litros7 -> volume13",type:"BELONGS_TO",sourceId:"litros7",targetId:"volume13"},"kilometrosquadrados8 -> area16":{id:"kilometrosquadrados8 -> area16",type:"BELONGS_TO",sourceId:"kilometrosquadrados8",targetId:"area16"},"centimetrosquadrados9 -> area16":{id:"centimetrosquadrados9 -> area16",type:"BELONGS_TO",sourceId:"centimetrosquadrados9",targetId:"area16"},"segundos248 -> temporal247":{id:"segundos248 -> temporal247",type:"BELONGS_TO",sourceId:"segundos248",targetId:"temporal247"},"minutos249 -> temporal247":{id:"minutos249 -> temporal247",type:"BELONGS_TO",sourceId:"minutos249",targetId:"temporal247"},"hora250 -> temporal247":{id:"hora250 -> temporal247",type:"BELONGS_TO",sourceId:"hora250",targetId:"temporal247"},"dia251 -> temporal247":{id:"dia251 -> temporal247",type:"BELONGS_TO",sourceId:"dia251",targetId:"temporal247"},"mes252 -> temporal247":{id:"mes252 -> temporal247",type:"BELONGS_TO",sourceId:"mes252",targetId:"temporal247"},"semana253 -> temporal247":{id:"semana253 -> temporal247",type:"BELONGS_TO",sourceId:"semana253",targetId:"temporal247"}},adjacencyList:{metros5:{inputs:[],outputs:["metros5 -> comprimento6"]},comprimento6:{inputs:["metros5 -> comprimento6","centimetros7 -> comprimento6","kilometros8 -> comprimento6","milimetros9 -> comprimento6"],outputs:[]},centimetros7:{inputs:[],outputs:["centimetros7 -> comprimento6"]},kilometros8:{inputs:[],outputs:["kilometros8 -> comprimento6"]},milimetros9:{inputs:[],outputs:["milimetros9 -> comprimento6"]},monetaria10:{inputs:["reais11 -> monetaria10","dolares12 -> monetaria10"],outputs:[]},reais11:{inputs:[],outputs:["reais11 -> monetaria10"]},dolares12:{inputs:[],outputs:["dolares12 -> monetaria10"]},volume13:{inputs:["litroscubicos14 -> volume13","metroscubicos15 -> volume13","mililitros6 -> volume13","litros7 -> volume13"],outputs:[]},litroscubicos14:{inputs:[],outputs:["litroscubicos14 -> volume13"]},metroscubicos15:{inputs:[],outputs:["metroscubicos15 -> volume13"]},area16:{inputs:["metrosquadrados17 -> area16","kilometrosquadrados8 -> area16","centimetrosquadrados9 -> area16"],outputs:[]},metrosquadrados17:{inputs:[],outputs:["metrosquadrados17 -> area16"]},unitario18:{inputs:[],outputs:[]},capacidade5:{inputs:[],outputs:[]},mililitros6:{inputs:[],outputs:["mililitros6 -> volume13"]},litros7:{inputs:[],outputs:["litros7 -> volume13"]},kilometrosquadrados8:{inputs:[],outputs:["kilometrosquadrados8 -> area16"]},centimetrosquadrados9:{inputs:[],outputs:["centimetrosquadrados9 -> area16"]},temporal247:{inputs:["segundos248 -> temporal247","minutos249 -> temporal247","hora250 -> temporal247","dia251 -> temporal247","mes252 -> temporal247","semana253 -> temporal247"],outputs:[]},segundos248:{inputs:[],outputs:["segundos248 -> temporal247"]},minutos249:{inputs:[],outputs:["minutos249 -> temporal247"]},hora250:{inputs:[],outputs:["hora250 -> temporal247"]},dia251:{inputs:[],outputs:["dia251 -> temporal247"]},mes252:{inputs:[],outputs:["mes252 -> temporal247"]},semana253:{inputs:[],outputs:["semana253 -> temporal247"]}},searchResults:{}},Z=Oe();Z.startListening({actionCreator:de,effect:async(t,o)=>{const{dispatch:s}=o;s(Le({graphId:S})),s(Ge({graphId:S,graph:Ye})),s(we())}});Z.startListening({actionCreator:H,effect:async(t,o)=>{const{dispatch:s}=o;s(Ae(t.payload))}});function Je({dispatch:t,managers:{storeManager:o,componentRegistryManager:s,ribbonMenuManager:l}}){o.functions.loadReducer(L,_e.reducer),o.functions.registerMiddleware(Z),t(de()),s.functions.registerComponents({ribbonMenuSections:{ConversorGraphSection:w.memo(Xe)},viewportTypes:{ConverterGraphViewport:ce}}),l.functions.addNewTab({label:"Conversor",sectionNames:["ConversorGraphSection"],type:"base"})}function B(t){const o=ue(t);return`${o.amount} ${o.unit}`}function ue(t){const o=["centavos","R$"];let s=0,l=t;for(;l>=100&&s<o.length-1;)s+=1,l/=100;return{amount:l,unit:o[s]}}function D(t){return t<1e4?Math.round(Math.sqrt(t)):+Math.pow(t/1e3,2).toPrecision(2)}function Ke({label:t,icon:o,onChange:s,slots:l}){const[a,n]=w.useState(10),i=(r,u)=>{typeof u=="number"&&(n(u),s(ue(D(u)))),r.stopPropagation(),r.preventDefault()};return e.jsxs(f,{sx:{width:250},role:"money-slider",onPointerMove:r=>{r.stopPropagation(),r.preventDefault()},children:[e.jsxs(f,{children:[e.jsxs(ie,{id:"money-slider",gutterBottom:!0,children:[t,": ",B(D(a))]}),l?.coumpoundSelector]}),e.jsxs(M,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(M,{item:!0,children:o}),e.jsx(M,{item:!0,xs:!0,children:e.jsx(re,{value:a,min:0,step:.01,max:1e5,marks:[{value:1e4,label:"1 R$"},{value:32e3,label:"10 R$"}],scale:D,getAriaValueText:B,valueLabelFormat:B,onChange:i,valueLabelDisplay:"auto","aria-labelledby":"money-slider"})})]})]})}function ae(t){const o=me(t);return`${o.amount} ${o.unit}`}function me(t){const o=["s","m","h","d"],s=[1,60,3600,86400],l=s.findIndex(i=>i>=t),a=Math.max(l<0?3:l-1,0);return{amount:Math.round(t/s[a]),unit:o[a]}}function ne(t){let s=t;return t<108e3?s=t/120:t<2*108e3?s=t/240:t>3*108e3&&(s=t),s}function Qe({label:t,icon:o,onChange:s,slots:l}){const[a,n]=w.useState(10),i=(r,u)=>{typeof u=="number"&&(n(u),s(me(ne(u)))),r.stopPropagation(),r.preventDefault()};return e.jsxs(f,{sx:{width:"min-content"},onPointerMove:r=>{r.stopPropagation(),r.preventDefault()},children:[e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1},children:[e.jsxs(e.Fragment,{children:[e.jsx(O,{id:"quotient-number",size:"small",type:"number",sx:{minWidth:80},InputLabelProps:{shrink:!0},value:100}),e.jsxs(z,{id:"quotient-unit-selector",size:"small",sx:{width:"min-content"},children:[e.jsx(N,{value:"week",children:"Sem."}),e.jsx(N,{value:"day",children:"Dia"}),e.jsx(N,{value:"h",children:"Hr"}),e.jsx(N,{value:"m",children:"min"}),e.jsx(N,{value:"s",children:"sec"})]})]}),e.jsx("span",{children:"/"}),l?.coumpoundSelector]}),e.jsxs(M,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(M,{item:!0,children:o}),e.jsx(M,{item:!0,xs:!0,children:e.jsx(re,{value:a,min:0,step:10,max:432e3,marks:[],scale:ne,getAriaValueText:ae,valueLabelFormat:ae,onChange:i,valueLabelDisplay:"auto","aria-labelledby":"time-slider"})})]})]})}function et({scale:t,...o}){return t==="money"?e.jsx(Ke,{...o}):e.jsx(Qe,{...o})}function R({onChange:t,value:o,children:s,selectorProps:l={sx:{}},textFieldProps:a={sx:{}},...n}){return e.jsxs(f,{role:"unit-selector",...n,sx:{display:"flex",gap:.2},children:[e.jsx(F,{children:e.jsx(O,{id:"amount",size:"small",type:"number",autoComplete:"off",sx:{...l.sx,width:"100px",minWidth:80},value:o.amount,onChange:i=>t({unit:o.unit,amount:i.target.valueAsNumber})})}),e.jsx(F,{children:e.jsx(z,{id:"unit-selector",inputProps:{id:"unit"},size:"small",sx:{...a.sx,width:"max(min-content, 100px)",minWidth:100},onChange:i=>t({amount:o.amount,unit:i.target.value}),value:o.unit,children:s})})]})}function tt({label:t,value:o,onChange:s,filterQuotients:l=()=>!0,filterDividends:a=()=>!0}){const n=p("Graph"),{useGraph:i}=n.hooks,r=i(S,d=>Object.values(d?.nodes??{}).filter(j=>j.type==="UNIT").map(j=>({...j,scale:Object.values(d?.nodes??{}).filter(c=>c.type==="SCALE").find(c=>d?.adjacencyList[j.id].outputs.includes(`${j.id} -> ${c.id}`))}))),u=g.useMemo(()=>r?.state?.filter(d=>l(d,d.scale))??[],[r.state,l]),m=g.useMemo(()=>r?.state?.filter(d=>a(d,d.scale))??[],[r.state,l]);return e.jsxs(f,{role:"compound-selector",width:"min-content",sx:{display:"flex",gap:1,alignItems:"baseline"},children:[t&&e.jsx(ie,{gutterBottom:!0,sx:{minWidth:"50px"},children:t}),e.jsxs(f,{sx:{display:"flex",gap:1,alignItems:"baseline"},children:[e.jsx(R,{id:"quotient-selector",value:o.quotient,onChange:d=>s({...o,quotient:d}),selectorProps:{sx:{width:"10px"}},children:u.map(({id:d,name:j,abbreviation:c})=>e.jsx(N,{value:d,children:c},d))},"quotient"),e.jsx("span",{children:"/"}),e.jsx(R,{id:"dividend-selector",value:o.dividend,onChange:d=>s({...o,dividend:d}),sx:{width:"max-content"},children:m.map(({id:d,name:j,abbreviation:c})=>e.jsx(N,{value:d,children:c},d))},"dividend")]})]})}const ot=()=>({time:Object.entries(ke).map(([t,o])=>({value:t,label:o}))}),pe=t=>{const o=p("Graph"),{useGraph:s}=o.hooks;return s(S,a=>a&&Object.values(a.nodes).filter(n=>t.includes(n.id)).reduce((n,i)=>({...n,[i.id]:i}),{})).state},st=({icon:t,value:o})=>{const s=pe([o.quotient.unit,o.dividend.unit]);return s?e.jsxs(f,{sx:{display:"flex",gap:.3,alignItems:"center"},children:[t&&e.jsx("div",{role:"coumpound-value-icon",children:t}),e.jsxs("div",{role:"coumpound-value-value",children:[o.quotient.amount," ",s[o.quotient.unit].abbreviation," / ",o.dividend.amount," ",s[o.dividend.unit].abbreviation]})]}):e.jsx(e.Fragment,{})},it={name:L,version:Me,depends_on:["Graph"],components:{CoverterGraphViewport:ce,ScaleSlider:et,CompoundSelector:tt,UnitSelector:R,CompoundUnit:st},store:{actions:{},middlewares:[],reducers:{}},hooks:{useScales:ot,useUnits:pe},constants:{},kernelCalls:{startModule:Je,restartModule:()=>{},shutdownModule:()=>{}}};export{it as m};
