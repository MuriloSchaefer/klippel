import{c as w,d as fe,b as je,_ as se,o as e,B as y,aZ as A,a_ as Te,a$ as D,b0 as O,r as v,aD as L,aT as X,aX as Ce,aS as z,aO as Ne,R as M,n as Oe,ba as Se,P as Ee,I as Z,bb as $e,bc as Ue,bd as Le,be as ae,T as U,bf as ne,aE as ie,Z as ke,$ as Ge,bg as pe,bh as Me,e as _e,bi as G,bj as he}from"../vendor-3d8cd717.js";import{A as P,n as x,o as qe,l as Ae}from"../kernel-6b598ae7.js";const k="Converter",Re="0.0.1",S="conversion-graph",we={week:"Semana",day:"Dia",h:"H",m:"m",s:"s",ms:"ms"},De={selectedNode:void 0},xe=w(`[${k}:${P.COMMAND}] Load conversion graph`),Y=w(`[${k}:${P.COMMAND}] Select node`),Pe=w(`[${k}:${P.EVENT}] Conversion graph loaded`),Be=w(`[${k}:${P.COMMAND}] Node selected`),Ve=fe({name:k,initialState:De,reducers:{},extraReducers:o=>{o.addCase(Y,(t,{payload:s})=>({...t,selectedNode:s}))}}),re=o=>o.Converter,$=o=>{const t=x("Store"),s=x("Graph"),l=x("Layout"),{useGraph:i}=s.hooks,a=i(S,m=>m),n=l.hooks.usePanelsManager(),{useAppDispatch:d,useAppSelector:c}=t.hooks,u=d(),r=je(re,o),C=c(r);return c(re),{state:C,selectNode:m=>{u(Y(m)),n.functions.openDetails()},addUnit:(m,f,b)=>{const g=se.uniqueId(m.toLowerCase().replace(" ",""));a.actions.addNode({type:"UNIT",id:g,name:m,position:{x:0,y:0},abbreviation:f}),console.log(b),b&&(console.log("add scale"),a.actions.addEdge({id:`${g} -> ${b}`,type:"BELONGS_TO",sourceId:g,targetId:b}))},updateUnit:(m,f,b,g)=>{a.actions.updateNode({id:m,name:f,abbreviation:b});const p=a.state?.adjacencyList[m].outputs.filter(N=>a.state?.edges[N].type==="BELONGS_TO").map(N=>a.state?.edges[N]).pop();g?(p&&p.targetId!==g&&a.actions.removeEdge(p.id),a.actions.addEdge({id:`${m} -> ${g}`,type:"BELONGS_TO",sourceId:m,targetId:g})):p&&a.actions.removeEdge(p.id)},addCompoundUnit:(m,f)=>{const b=a.state?.nodes[m],g=a.state?.nodes[f],p=`${b.abbreviation} / ${g.abbreviation}`;if(a.state?.nodes[p]){console.error("unit already exists! skipping it.");return}const _={id:p,type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:m,dividendUnitId:f,abbreviation:p,name:`${b.name} per ${g.name}`},V={id:`${p}->${m}`,type:"QUOTIENT",sourceId:p,targetId:m},h={id:`${p}->${f}`,type:"DIVIDEND",sourceId:p,targetId:f};a.actions.addNode(_),a.actions.addEdge(V),a.actions.addEdge(h)},updateCompoundUnit:(m,f,b)=>{},addScale:m=>{a.actions.addNode({type:"SCALE",id:se.uniqueId(m.toLowerCase().replace(" ","")),name:m,position:{x:0,y:0}})},addConversion:(m,f,b,g,p)=>{console.log(m,f,b,g,p);let N;if(m==="factor"){if(!g){console.error("Factor required to add factor conversion! Skipping");return}N={type:"CONVERTS_TO",conversionType:"factor",factor:g,id:`${f}->${b}`,sourceId:f,targetId:b}}else{if(!p){console.error("Expression required to add expression conversion! Skipping");return}N={type:"CONVERTS_TO",conversionType:"expression",expression:p,id:`${f}->${b}`,sourceId:f,targetId:b}}a.actions.addEdge(N)}}};function ge({onChange:o,value:t,...s}){const l=x("Graph"),{hooks:{useGraph:i}}=l,a=i(S,n=>n&&Object.values(n.nodes).filter(d=>d.type==="SCALE"));return a.state?e.jsx(y,{role:"scale-selector",...s,sx:{display:"flex",gap:.2},children:e.jsxs(A,{sx:{m:1,minWidth:120,width:"min-content"},children:[e.jsx(Te,{id:"label",children:"Escala"}),e.jsxs(D,{id:"scale-selector",inputProps:{id:"scale"},label:"Escala",labelId:"label",size:"small",onChange:n=>o(n.target.value),value:t??"",children:[a.state.map(n=>e.jsx(O,{value:n.id,children:n.name})),e.jsx(O,{value:"",children:"Nenhuma"})]})]})}):e.jsx(e.Fragment,{})}const de={name:void 0,abbreviation:void 0,scale:void 0},Fe=()=>{const o=x("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:s}=o.components,l=$(d=>d),[i,a]=v.useState(de),n=v.useCallback(()=>{!i.name||!i.abbreviation||(l.addUnit(i.name,i.abbreviation,i.scale),a(de))},[i,l]);return e.jsx(t,{component:e.jsxs(y,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(L,{id:"unit-name",label:"Nome",variant:"standard",value:i.name,onChange:d=>a(c=>({...c,name:d.target.value}))}),e.jsx(L,{id:"abbreviation",label:"Abbreviation",variant:"standard",value:i.abbreviation,onChange:d=>a(c=>({...c,abbreviation:d.target.value})),sx:{alignItems:"center"}}),e.jsx(ge,{value:i.scale??"",onChange:d=>a(c=>({...c,scale:d}))})]}),actions:[e.jsx(s,{handleConfirm:n},"confirm")],children:e.jsx(X,{primary:"Unidade",secondary:"Adiciona um tipo de unidade simples",sx:{cursor:"pointer",flexGrow:1}})})},ue={name:void 0},We=()=>{const o=x("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:s}=o.components,l=$(d=>d),[i,a]=v.useState(ue),n=v.useCallback(()=>{i.name&&(l.addScale(i.name),a(ue))},[i,l]);return e.jsx(t,{component:e.jsx(y,{sx:{display:"flex",flexDirection:"column",gap:1},children:e.jsx(L,{id:"part-name",label:"Nome",variant:"standard",value:i.name,onChange:d=>a(c=>({...c,name:d.target.value}))})}),actions:[e.jsx(s,{handleConfirm:n},"confirm")],children:e.jsx(X,{primary:"Escala",secondary:"Adiciona um tipo de escala",sx:{cursor:"pointer",flexGrow:1}})})},R=({value:o,onChange:t,filterUnits:s=()=>!0,...l})=>{const i=x("Graph"),{useGraph:a}=i.hooks,n=a(S,c=>Object.values(c?.nodes??{}).filter(u=>u.type==="UNIT").map(u=>({...u,scale:Object.values(c?.nodes??{}).filter(r=>r.type==="SCALE").find(r=>c?.adjacencyList[u.id].outputs.includes(`${u.id} -> ${r.id}`))}))),d=v.useMemo(()=>n?.state?.filter(c=>s(c,c.scale))??[],[n.state,s]);return e.jsx(A,{children:e.jsx(D,{id:"unit-selector",inputProps:{id:"unit"},size:"small",sx:{width:"max(min-content, 100px)",minWidth:100},onChange:t,value:o,...l,children:d.map(({id:c,name:u,abbreviation:r})=>e.jsx(O,{value:c,children:r},c))})})},le={quotientUnit:"",dividendUnit:""},ze=()=>{const o=x("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:s}=o.components,l=$(d=>d),[i,a]=v.useState(le),n=v.useCallback(()=>{l.addCompoundUnit(i.quotientUnit,i.dividendUnit),a(le)},[i,l]);return e.jsx(t,{component:e.jsxs(y,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",gap:1},children:[e.jsx(R,{value:i.quotientUnit,onChange:(d,c)=>a(u=>({...u,quotientUnit:d.target.value}))}),e.jsx("span",{children:"/"}),e.jsx(R,{value:i.dividendUnit,onChange:(d,c)=>a(u=>({...u,dividendUnit:d.target.value}))})]}),actions:[e.jsx(s,{handleConfirm:n},"confirm")],children:e.jsx(X,{primary:"Unidade Composta",secondary:"Adiciona um tipo de unidade composta",sx:{cursor:"pointer",flexGrow:1}})})},Qe=()=>e.jsxs(Ce,{role:"list-options",sx:{paddingRight:5,overflow:"auto"},children:[e.jsx(z,{disableGutters:!0,children:e.jsx(Fe,{})},"unit"),e.jsx(z,{disableGutters:!0,children:e.jsx(ze,{})},"compositeUnit"),e.jsx(z,{disableGutters:!0,children:e.jsx(We,{})},"scale")]}),He=()=>{const o=x("Layout"),{SettingsPanel:t,Accordion:s}=o.components;return e.jsxs(t,{children:[e.jsx(s,{name:"Nodos",icon:e.jsx(Ne,{}),summary:"Tipos de nodos disponÃ­veis",children:e.jsx(Qe,{})}),e.jsx(e.Fragment,{})]})},Ze=({graphId:o})=>{const{hooks:{useResizeObserver:t}}=x("Layout"),{hooks:{useGraph:s}}=x("Graph"),{hooks:{useD3Container:l},d3Components:{Grid:i,DependencyCircle:a}}=x("SVG"),n=$(h=>h),d=v.useRef(null),c=v.useRef(null),u=t(c),r=s(o,h=>h),C=v.useMemo(()=>{if(!r.state?.nodes)return{nodes:[],links:[]};const h=I=>{if(!r.state)return{id:"other",name:"Outros"};const E=Object.values(r.state.edges).find(T=>T.sourceId===I.id&&T.type==="BELONGS_TO");if(E){const T=r.state.nodes[E.targetId];return{id:T.id,name:T.name}}return{id:"other",name:"Outros"}};return{nodes:Object.values(r.state.nodes).map(I=>({...I,nodeLabel:"abbreviation"in I?I.abbreviation:I.name,group:h(I),radius:5,strength:10,x:I.position.x,y:I.position.y})),links:Object.values(r.state.edges).map(I=>({...I,source:I.sourceId,target:I.targetId}))}},[r]),m=Oe(),[f,b]=v.useState(!0),[g,p]=[u?.width??700,u?.height??700],N=v.useCallback(h=>{n.selectNode(h)},[]),_=v.useCallback(h=>{n.selectNode(h)},[]),V=l().width(g).height(p).underlays([i({xSettings:{range:[-1,g+1],domain:[-1,g+1]},ySettings:{range:[-1,p+1],domain:[-1,p+1]},dimensions:[g,p]}).transformZoom((h,I)=>{f&&(I.translateBy(h,g/2,p/2),b(!1))}).build]).content([a().innerRadius(Math.min(g,p)/2-20).filterNode(h=>h.type==="UNIT"||h.type==="COMPOUND_UNIT").filterLink(h=>h.type==="CONVERTS_TO").renderGroup((h,I,E,T,q,ee)=>{h.selectAll("path").data([I]).join("path").attr("id",j=>j.id).on("click",j=>j.target.id!=="other"&&_(j.target.id)).attr("class","group-arc").attr("fill",j=>T(I.id)).attr("d",(j,te)=>q(E)),h.selectAll("text").data([I]).join("text").attr("class","group-text").text(j=>j.name).attr("id",j=>j.id).on("click",j=>j.target.id!=="other"&&_(j.target.id)).attr("fill",j=>T(j.id)).attr("text-anchor",(j,te)=>(E.endAngle+E.startAngle)/2>Math.PI?"end":"start").attr("transform",(j,te)=>{const[F,W]=q.centroid(E),oe=Math.sqrt(F*F+W*W);return`translate(${F/oe*ee*1.3}, ${W/oe*ee*1.3})`})}).renderNode((h,I,E)=>{h.append("text").text(T=>T.nodeLabel).attr("fill",T=>n.state?.selectedNode===T.id?m.palette.getContrastText(m.palette.background.default):E(T.group.id)).attr("text-anchor","middle").on("pointerdown",(T,q)=>{N(q.id),T.stopPropagation()})}).theme(m.palette.mode).build]);return v.useLayoutEffect(()=>{!u||!d.current||V.render(C,d.current)},[C,u]),r.state?e.jsx("div",{ref:c,role:"conversion-graph-viewer",style:{height:"100%",width:"100%"},children:e.jsx("svg",{ref:d,id:`${r.id}`,width:"100%",height:"100%"})}):e.jsx(e.Fragment,{})},Ke=M.memo(Ze),Xe=()=>{const o=x("Layout"),{Accordion:t}=o.components,s=x("Graph"),{useGraph:l}=s.hooks,i=$(u=>u.selectedNode),a=l(S,u=>i.state&&u?.nodes?{...u.nodes[i.state],scale:u.adjacencyList[i.state].outputs.filter(r=>u.edges[r].type==="BELONGS_TO").map(r=>u.edges[r].targetId).pop()}:void 0),[n,d]=v.useState(a.state);v.useEffect(()=>d(a.state),[i.state]);const c=v.useCallback(()=>{i.updateUnit(i.state,n?.name,n?.abbreviation,n?.scale)},[a]);return!i?.state||!a?.state?e.jsx(e.Fragment,{}):e.jsx(t,{name:"Propriedades",icon:e.jsx(Se,{}),summary:"Propriedades da unidade",children:e.jsxs(Ee,{variant:"outlined",square:!0,sx:{width:"100%",padding:1,"&:div + div":{borderTop:0},display:"flex",justifyContent:"space-between"},role:"unit-properties",children:[e.jsx(L,{id:"unit-name",label:"Nome",variant:"standard",value:n?.name??"",onChange:u=>d(r=>r&&{...r,name:u.target.value})}),e.jsx(L,{id:"abbreviation",label:"Abreviatura",variant:"standard",value:n?.abbreviation??"",onChange:u=>d(r=>r&&{...r,abbreviation:u.target.value}),sx:{alignItems:"center"}}),e.jsx(ge,{value:n?.scale??"",onChange:u=>d(r=>r&&{...r,scale:u})}),e.jsxs(y,{sx:{display:"flex",flexDirection:"column",padding:0,gap:1,justifyContent:"space-between",alignContent:"space-evenly"},role:"actions",children:[e.jsx(Z,{color:"success",id:"save-unit-properties",onClick:u=>c(),children:e.jsx($e,{})},"save"),e.jsx(Z,{color:"info",id:"reset-unit-properties",onClick:u=>d(a.state),children:e.jsx(Ue,{})},"reset")]})]})})},B=o=>{const t=x("Graph"),{useGraph:s}=t.hooks;return s(S,i=>i&&Object.values(i.nodes).filter(a=>o.includes(a.id)).reduce((a,n)=>({...a,[n.id]:n}),{})).state},ve=({from:o="",to:t=""})=>{const s=x("Pointer"),{PointerContainer:l,ConfirmAndCloseButton:i}=s.components,a=$(u=>u),[n,d]=v.useState({type:"factor",from:o,to:t,factor:1,expression:"quantidade * 1"});v.useEffect(()=>d(u=>({...u,from:o,to:t})),[o,t]);const c=v.useCallback(()=>{n.from&&n.to&&a.addConversion(n.type,n.from,n.to,n.factor,n.expression)},[n]);return e.jsx(l,{component:e.jsxs(y,{sx:{display:"flex",flexDirection:"column",gap:1},role:"conversion-form",children:[e.jsx(y,{role:"conversion-type",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:e.jsxs(Le,{color:"primary",value:n.type,exclusive:!0,onChange:(u,r)=>d(C=>({...C,type:r})),"aria-label":"Platform",children:[e.jsx(ae,{value:"factor",children:"Fator"}),e.jsx(ae,{value:"expresssion",children:"ExpressÃ£o"})]})}),e.jsxs(y,{role:"from-conversion",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(U,{sx:{minWidth:30},children:"De:"}),e.jsx(R,{value:n.from,disabled:!!o,filterUnits:u=>u.id!==n.to,onChange:u=>d(r=>({...r,from:u.target.value}))})]}),e.jsxs(y,{role:"to-conversion",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(U,{sx:{minWidth:30},children:"Para:"}),e.jsx(R,{value:n.to,disabled:!!t,filterUnits:u=>u.id!==n.from,onChange:u=>{console.log("changing"),d(r=>({...r,to:u.target.value}))}})]}),e.jsx(y,{children:n.type==="factor"?e.jsxs(y,{role:"factor-field",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(U,{sx:{minWidth:30},children:"Fator"}),e.jsx(ne,{value:n.factor,type:"number",onChange:u=>d(r=>({...r,factor:+u.target.value})),startAdornment:e.jsx(ie,{position:"start",children:"1:"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(y,{role:"expression-field",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(U,{sx:{minWidth:30},children:"Exp"}),e.jsx(ne,{value:n.expression,onChange:u=>d(r=>({...r,expression:u.target.value})),startAdornment:e.jsx(ie,{position:"start",children:"="})})]}),e.jsx(U,{sx:{marginTop:1},children:"quantidade Ã© a Ãºnica variÃ¡vel prÃ©-definida, Ã© utilizada para definir a quantidade a ser convertida. HÃ¡ suas variantes quantidadeQuociente e quantidadeDividendo para unidades compostas"})]})})]}),actions:[e.jsx(i,{handleConfirm:c},"confirm")],children:e.jsx(ke,{startIcon:e.jsx(Ge,{}),variant:"outlined",size:"small",sx:{marginBottom:1},children:"Adicionar ConversÃ£o"})})},Ye=()=>{const o=x("Layout"),t=$(a=>a.selectedNode),s=B([t.state]);if(!s||!t.state)throw Error("units should be available");const l=s[t.state],{Accordion:i}=o.components;return e.jsx(i,{name:"Converte de",icon:e.jsx(pe,{}),summary:`Quais unidades podem ser convertidas em ${l.name}`,children:e.jsx(ve,{to:l.id})})},Je=()=>{const o=x("Layout"),t=$(a=>a.selectedNode),s=B([t.state]);if(!s||!t.state)throw Error("units should be available");const l=s[t.state],{Accordion:i}=o.components;return e.jsx(i,{name:"Converte para",icon:e.jsx(pe,{sx:{transform:"rotate(180)"}}),summary:`${l.name} pode ser convertida em`,children:e.jsx(ve,{from:l.id})})},et=()=>e.jsxs(e.Fragment,{children:[e.jsx(Xe,{}),e.jsx(Je,{}),e.jsx(Ye,{})]}),tt=()=>e.jsx(e.Fragment,{children:"Escala selectionada"}),ot=()=>{const o=x("Layout"),t=x("Graph"),{DetailsPanel:s}=o.components,{useGraph:l}=t.hooks,i=$(n=>n.selectedNode),a=l(S,n=>i.state?n?.nodes[i.state]:void 0);return a.state?e.jsx(s,{children:e.jsxs(e.Fragment,{children:[a?.state?.type==="UNIT"&&e.jsx(et,{}),a?.state?.type==="SCALE"&&e.jsx(tt,{})]})}):e.jsx(e.Fragment,{})},st=({name:o})=>{const t=x("Layout"),{ViewportNotificationsTray:s}=t.components;return e.jsxs(y,{role:"converter-graph-viewport",sx:{padding:1,height:"100%",position:"relative",overflow:"hidden"},children:[e.jsx(Ke,{graphId:S}),e.jsx(s,{children:e.jsx(e.Fragment,{})}),e.jsx(He,{}),e.jsx(ot,{})]})},ye=M.memo(st),at=()=>{const o=x("Layout"),{useViewportManager:t}=o.hooks,s=t();return e.jsx(e.Fragment,{children:e.jsx(Z,{onClick:()=>s.functions.addViewport("Grafo de conversÃ£o","ConverterGraphViewport",void 0,"conversion-graph"),children:e.jsx(Me,{})})})},nt={id:"conversion-graph",nodes:{metros5:{type:"UNIT",id:"metros5",name:"metros",position:{x:0,y:0},abbreviation:"m"},comprimento6:{type:"SCALE",id:"comprimento6",name:"Comprimento",position:{x:0,y:0}},centimetros7:{type:"UNIT",id:"centimetros7",name:"centimetros",position:{x:0,y:0},abbreviation:"cm"},kilometros8:{type:"UNIT",id:"kilometros8",name:"kilometros",position:{x:0,y:0},abbreviation:"km"},milimetros9:{type:"UNIT",id:"milimetros9",name:"milimetros",position:{x:0,y:0},abbreviation:"mm"},monetaria10:{type:"SCALE",id:"monetaria10",name:"Monetaria",position:{x:0,y:0}},reais11:{type:"UNIT",id:"reais11",name:"reais",position:{x:0,y:0},abbreviation:"R$"},dolares12:{type:"UNIT",id:"dolares12",name:"dolares",position:{x:0,y:0},abbreviation:"$"},volume13:{type:"SCALE",id:"volume13",name:"Volume",position:{x:0,y:0}},litroscubicos14:{type:"UNIT",id:"litroscubicos14",name:"litros cubicos",position:{x:0,y:0},abbreviation:"lÂ³"},metroscubicos15:{type:"UNIT",id:"metroscubicos15",name:"metros cubicos",position:{x:0,y:0},abbreviation:"mÂ³"},area16:{type:"SCALE",id:"area16",name:"Area",position:{x:0,y:0}},metrosquadrados17:{type:"UNIT",id:"metrosquadrados17",name:"metros quadrados",position:{x:0,y:0},abbreviation:"mÂ²"},unitario18:{type:"UNIT",id:"unitario18",name:"unitario",position:{x:0,y:0},abbreviation:"un"},capacidade5:{type:"SCALE",id:"capacidade5",name:"Capacidade",position:{x:0,y:0}},mililitros6:{type:"UNIT",id:"mililitros6",name:"mililitros",position:{x:0,y:0},abbreviation:"ml"},litros7:{type:"UNIT",id:"litros7",name:"litros",position:{x:0,y:0},abbreviation:"l"},kilometrosquadrados8:{type:"UNIT",id:"kilometrosquadrados8",name:"kilometros quadrados",position:{x:0,y:0},abbreviation:"kmÂ²"},centimetrosquadrados9:{type:"UNIT",id:"centimetrosquadrados9",name:"centimetros quadrados",position:{x:0,y:0},abbreviation:"cmÂ²"},temporal247:{type:"SCALE",id:"temporal247",name:"Temporal",position:{x:0,y:0}},segundos248:{type:"UNIT",id:"segundos248",name:"segundos",position:{x:0,y:0},abbreviation:"seg"},minutos249:{type:"UNIT",id:"minutos249",name:"minutos",position:{x:0,y:0},abbreviation:"min"},hora250:{type:"UNIT",id:"hora250",name:"hora",position:{x:0,y:0},abbreviation:"h"},dia251:{type:"UNIT",id:"dia251",name:"dia",position:{x:0,y:0},abbreviation:"d"},mes252:{type:"UNIT",id:"mes252",name:"mes",position:{x:0,y:0},abbreviation:"mes"},semana253:{type:"UNIT",id:"semana253",name:"semana",position:{x:0,y:0},abbreviation:"sem"},peso5:{type:"SCALE",id:"peso5",name:"Peso",position:{x:0,y:0}},kilogramas6:{type:"UNIT",id:"kilogramas6",name:"Kilogramas",position:{x:0,y:0},abbreviation:"Kg"},gramas7:{type:"UNIT",id:"gramas7",name:"gramas",position:{x:0,y:0},abbreviation:"g"},miligramas8:{type:"UNIT",id:"miligramas8",name:"miligramas",position:{x:0,y:0},abbreviation:"mg"},"un / min":{id:"un / min",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"unitario18",dividendUnitId:"minutos249",abbreviation:"un / min",name:"unitario per minutos"},"R$ / h":{id:"R$ / h",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"reais11",dividendUnitId:"hora250",abbreviation:"R$ / h",name:"reais per hora"},"R$ / un":{id:"R$ / un",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"reais11",dividendUnitId:"unitario18",abbreviation:"R$ / un",name:"reais per unitario"},"un / h":{id:"un / h",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"unitario18",dividendUnitId:"hora250",abbreviation:"un / h",name:"unitario per hora"}},edges:{"metros5 -> comprimento6":{id:"metros5 -> comprimento6",type:"BELONGS_TO",sourceId:"metros5",targetId:"comprimento6"},"centimetros7 -> comprimento6":{id:"centimetros7 -> comprimento6",type:"BELONGS_TO",sourceId:"centimetros7",targetId:"comprimento6"},"kilometros8 -> comprimento6":{id:"kilometros8 -> comprimento6",type:"BELONGS_TO",sourceId:"kilometros8",targetId:"comprimento6"},"milimetros9 -> comprimento6":{id:"milimetros9 -> comprimento6",type:"BELONGS_TO",sourceId:"milimetros9",targetId:"comprimento6"},"reais11 -> monetaria10":{id:"reais11 -> monetaria10",type:"BELONGS_TO",sourceId:"reais11",targetId:"monetaria10"},"dolares12 -> monetaria10":{id:"dolares12 -> monetaria10",type:"BELONGS_TO",sourceId:"dolares12",targetId:"monetaria10"},"litroscubicos14 -> volume13":{id:"litroscubicos14 -> volume13",type:"BELONGS_TO",sourceId:"litroscubicos14",targetId:"volume13"},"metroscubicos15 -> volume13":{id:"metroscubicos15 -> volume13",type:"BELONGS_TO",sourceId:"metroscubicos15",targetId:"volume13"},"metrosquadrados17 -> area16":{id:"metrosquadrados17 -> area16",type:"BELONGS_TO",sourceId:"metrosquadrados17",targetId:"area16"},"mililitros6 -> volume13":{id:"mililitros6 -> volume13",type:"BELONGS_TO",sourceId:"mililitros6",targetId:"volume13"},"litros7 -> volume13":{id:"litros7 -> volume13",type:"BELONGS_TO",sourceId:"litros7",targetId:"volume13"},"kilometrosquadrados8 -> area16":{id:"kilometrosquadrados8 -> area16",type:"BELONGS_TO",sourceId:"kilometrosquadrados8",targetId:"area16"},"centimetrosquadrados9 -> area16":{id:"centimetrosquadrados9 -> area16",type:"BELONGS_TO",sourceId:"centimetrosquadrados9",targetId:"area16"},"segundos248 -> temporal247":{id:"segundos248 -> temporal247",type:"BELONGS_TO",sourceId:"segundos248",targetId:"temporal247"},"minutos249 -> temporal247":{id:"minutos249 -> temporal247",type:"BELONGS_TO",sourceId:"minutos249",targetId:"temporal247"},"hora250 -> temporal247":{id:"hora250 -> temporal247",type:"BELONGS_TO",sourceId:"hora250",targetId:"temporal247"},"dia251 -> temporal247":{id:"dia251 -> temporal247",type:"BELONGS_TO",sourceId:"dia251",targetId:"temporal247"},"mes252 -> temporal247":{id:"mes252 -> temporal247",type:"BELONGS_TO",sourceId:"mes252",targetId:"temporal247"},"semana253 -> temporal247":{id:"semana253 -> temporal247",type:"BELONGS_TO",sourceId:"semana253",targetId:"temporal247"},"kilogramas6 -> peso5":{id:"kilogramas6 -> peso5",type:"BELONGS_TO",sourceId:"kilogramas6",targetId:"peso5"},"gramas7 -> peso5":{id:"gramas7 -> peso5",type:"BELONGS_TO",sourceId:"gramas7",targetId:"peso5"},"miligramas8 -> peso5":{id:"miligramas8 -> peso5",type:"BELONGS_TO",sourceId:"miligramas8",targetId:"peso5"},"un / min->unitario18":{id:"un / min->unitario18",type:"QUOTIENT",sourceId:"un / min",targetId:"unitario18"},"un / min->minutos249":{id:"un / min->minutos249",type:"DIVIDEND",sourceId:"un / min",targetId:"minutos249"},"R$ / h->reais11":{id:"R$ / h->reais11",type:"QUOTIENT",sourceId:"R$ / h",targetId:"reais11"},"R$ / h->hora250":{id:"R$ / h->hora250",type:"DIVIDEND",sourceId:"R$ / h",targetId:"hora250"},"R$ / un->reais11":{id:"R$ / un->reais11",type:"QUOTIENT",sourceId:"R$ / un",targetId:"reais11"},"R$ / un->unitario18":{id:"R$ / un->unitario18",type:"DIVIDEND",sourceId:"R$ / un",targetId:"unitario18"},"un / h->unitario18":{id:"un / h->unitario18",type:"QUOTIENT",sourceId:"un / h",targetId:"unitario18"},"un / h->hora250":{id:"un / h->hora250",type:"DIVIDEND",sourceId:"un / h",targetId:"hora250"},"metrosquadrados17->kilogramas6":{type:"CONVERTS_TO",conversionType:"expression",expression:"quantidade * rendimento",id:"metrosquadrados17->kilogramas6",sourceId:"metrosquadrados17",targetId:"kilogramas6"},"mes252->semana253":{type:"CONVERTS_TO",conversionType:"factor",factor:4,id:"mes252->semana253",sourceId:"mes252",targetId:"semana253"},"mes252->dia251":{type:"CONVERTS_TO",conversionType:"factor",factor:30,id:"mes252->dia251",sourceId:"mes252",targetId:"dia251"},"dia251->hora250":{type:"CONVERTS_TO",conversionType:"factor",factor:24,id:"dia251->hora250",sourceId:"dia251",targetId:"hora250"},"hora250->minutos249":{type:"CONVERTS_TO",conversionType:"factor",factor:60,id:"hora250->minutos249",sourceId:"hora250",targetId:"minutos249"},"semana253->dia251":{type:"CONVERTS_TO",conversionType:"factor",factor:7,id:"semana253->dia251",sourceId:"semana253",targetId:"dia251"},"minutos249->segundos248":{type:"CONVERTS_TO",conversionType:"factor",factor:60,id:"minutos249->segundos248",sourceId:"minutos249",targetId:"segundos248"}},adjacencyList:{metros5:{inputs:[],outputs:["metros5 -> comprimento6"]},comprimento6:{inputs:["metros5 -> comprimento6","centimetros7 -> comprimento6","kilometros8 -> comprimento6","milimetros9 -> comprimento6"],outputs:[]},centimetros7:{inputs:[],outputs:["centimetros7 -> comprimento6"]},kilometros8:{inputs:[],outputs:["kilometros8 -> comprimento6"]},milimetros9:{inputs:[],outputs:["milimetros9 -> comprimento6"]},monetaria10:{inputs:["reais11 -> monetaria10","dolares12 -> monetaria10"],outputs:[]},reais11:{inputs:["R$ / h->reais11","R$ / un->reais11"],outputs:["reais11 -> monetaria10"]},dolares12:{inputs:[],outputs:["dolares12 -> monetaria10"]},volume13:{inputs:["litroscubicos14 -> volume13","metroscubicos15 -> volume13","mililitros6 -> volume13","litros7 -> volume13"],outputs:[]},litroscubicos14:{inputs:[],outputs:["litroscubicos14 -> volume13"]},metroscubicos15:{inputs:[],outputs:["metroscubicos15 -> volume13"]},area16:{inputs:["metrosquadrados17 -> area16","kilometrosquadrados8 -> area16","centimetrosquadrados9 -> area16"],outputs:[]},metrosquadrados17:{inputs:[],outputs:["metrosquadrados17 -> area16","metrosquadrados17->kilogramas6"]},unitario18:{inputs:["un / min->unitario18","R$ / un->unitario18","un / h->unitario18"],outputs:[]},capacidade5:{inputs:[],outputs:[]},mililitros6:{inputs:[],outputs:["mililitros6 -> volume13"]},litros7:{inputs:[],outputs:["litros7 -> volume13"]},kilometrosquadrados8:{inputs:[],outputs:["kilometrosquadrados8 -> area16"]},centimetrosquadrados9:{inputs:[],outputs:["centimetrosquadrados9 -> area16"]},temporal247:{inputs:["segundos248 -> temporal247","minutos249 -> temporal247","hora250 -> temporal247","dia251 -> temporal247","mes252 -> temporal247","semana253 -> temporal247"],outputs:[]},segundos248:{inputs:["minutos249->segundos248"],outputs:["segundos248 -> temporal247"]},minutos249:{inputs:["un / min->minutos249","hora250->minutos249"],outputs:["minutos249 -> temporal247","minutos249->segundos248"]},hora250:{inputs:["R$ / h->hora250","un / h->hora250","dia251->hora250"],outputs:["hora250 -> temporal247","hora250->minutos249"]},dia251:{inputs:["mes252->dia251","semana253->dia251"],outputs:["dia251 -> temporal247","dia251->hora250"]},mes252:{inputs:[],outputs:["mes252 -> temporal247","mes252->semana253","mes252->dia251"]},semana253:{inputs:["mes252->semana253"],outputs:["semana253 -> temporal247","semana253->dia251"]},peso5:{inputs:["kilogramas6 -> peso5","gramas7 -> peso5","miligramas8 -> peso5"],outputs:[]},kilogramas6:{inputs:["metrosquadrados17->kilogramas6"],outputs:["kilogramas6 -> peso5"]},gramas7:{inputs:[],outputs:["gramas7 -> peso5"]},miligramas8:{inputs:[],outputs:["miligramas8 -> peso5"]},"un / min":{inputs:[],outputs:["un / min->unitario18","un / min->minutos249"]},"R$ / h":{inputs:[],outputs:["R$ / h->reais11","R$ / h->hora250"]},"R$ / un":{inputs:[],outputs:["R$ / un->reais11","R$ / un->unitario18"]},"un / h":{inputs:[],outputs:["un / h->unitario18","un / h->hora250"]}},searchResults:{}},J=_e();J.startListening({actionCreator:xe,effect:async(o,t)=>{const{dispatch:s}=t;s(qe({graphId:S})),s(Ae({graphId:S,graph:nt})),s(Pe())}});J.startListening({actionCreator:Y,effect:async(o,t)=>{const{dispatch:s}=t;s(Be(o.payload))}});function it({dispatch:o,managers:{storeManager:t,componentRegistryManager:s,ribbonMenuManager:l}}){t.functions.loadReducer(k,Ve.reducer),t.functions.registerMiddleware(J),o(xe()),s.functions.registerComponents({ribbonMenuSections:{ConversorGraphSection:M.memo(at)},viewportTypes:{ConverterGraphViewport:ye}}),l.functions.addNewTab({label:"Conversor",sectionNames:["ConversorGraphSection"],type:"base"})}function Q(o){const t=Ie(o);return`${t.amount} ${t.unit}`}function Ie(o){const t=["centavos","R$"];let s=0,l=o;for(;l>=100&&s<t.length-1;)s+=1,l/=100;return{amount:l,unit:t[s]}}function H(o){return o<1e4?Math.round(Math.sqrt(o)):+Math.pow(o/1e3,2).toPrecision(2)}function rt({label:o,icon:t,onChange:s,slots:l}){const[i,a]=M.useState(10),n=(d,c)=>{typeof c=="number"&&(a(c),s(Ie(H(c)))),d.stopPropagation(),d.preventDefault()};return e.jsxs(y,{sx:{width:250},role:"money-slider",onPointerMove:d=>{d.stopPropagation(),d.preventDefault()},children:[e.jsxs(y,{children:[e.jsxs(U,{id:"money-slider",gutterBottom:!0,children:[o,": ",Q(H(i))]}),l?.coumpoundSelector]}),e.jsxs(G,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(G,{item:!0,children:t}),e.jsx(G,{item:!0,xs:!0,children:e.jsx(he,{value:i,min:0,step:.01,max:1e5,marks:[{value:1e4,label:"1 R$"},{value:32e3,label:"10 R$"}],scale:H,getAriaValueText:Q,valueLabelFormat:Q,onChange:n,valueLabelDisplay:"auto","aria-labelledby":"money-slider"})})]})]})}function ce(o){const t=be(o);return`${t.amount} ${t.unit}`}function be(o){const t=["s","m","h","d"],s=[1,60,3600,86400],l=s.findIndex(n=>n>=o),i=Math.max(l<0?3:l-1,0);return{amount:Math.round(o/s[i]),unit:t[i]}}function me(o){let s=o;return o<108e3?s=o/120:o<2*108e3?s=o/240:o>3*108e3&&(s=o),s}function dt({label:o,icon:t,onChange:s,slots:l}){const[i,a]=M.useState(10),n=(d,c)=>{typeof c=="number"&&(a(c),s(be(me(c)))),d.stopPropagation(),d.preventDefault()};return e.jsxs(y,{sx:{width:"min-content"},onPointerMove:d=>{d.stopPropagation(),d.preventDefault()},children:[e.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1},children:[e.jsxs(e.Fragment,{children:[e.jsx(L,{id:"quotient-number",size:"small",type:"number",sx:{minWidth:80},InputLabelProps:{shrink:!0},value:100}),e.jsxs(D,{id:"quotient-unit-selector",size:"small",sx:{width:"min-content"},children:[e.jsx(O,{value:"week",children:"Sem."}),e.jsx(O,{value:"day",children:"Dia"}),e.jsx(O,{value:"h",children:"Hr"}),e.jsx(O,{value:"m",children:"min"}),e.jsx(O,{value:"s",children:"sec"})]})]}),e.jsx("span",{children:"/"}),l?.coumpoundSelector]}),e.jsxs(G,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(G,{item:!0,children:t}),e.jsx(G,{item:!0,xs:!0,children:e.jsx(he,{value:i,min:0,step:10,max:432e3,marks:[],scale:me,getAriaValueText:ce,valueLabelFormat:ce,onChange:n,valueLabelDisplay:"auto","aria-labelledby":"time-slider"})})]})]})}function ut({scale:o,...t}){return o==="money"?e.jsx(rt,{...t}):e.jsx(dt,{...t})}function K({onChange:o,value:t,children:s,selectorProps:l={sx:{}},textFieldProps:i={sx:{}},...a}){return e.jsxs(y,{role:"unit-selector",...a,sx:{display:"flex",gap:.2},children:[e.jsx(A,{children:e.jsx(L,{id:"amount",size:"small",type:"number",autoComplete:"off",sx:{...l.sx,width:"100px",minWidth:80},value:t.amount,onChange:n=>o({unit:t.unit,amount:n.target.valueAsNumber})})}),e.jsx(A,{children:e.jsx(D,{id:"unit-selector",inputProps:{id:"unit"},size:"small",sx:{...i.sx,width:"max(min-content, 100px)",minWidth:100},onChange:n=>o({amount:t.amount,unit:n.target.value}),value:t.unit,children:s})})]})}function lt({label:o,value:t,onChange:s,filterQuotients:l=()=>!0,filterDividends:i=()=>!0}){const a=x("Graph"),{useGraph:n}=a.hooks,d=n(S,r=>Object.values(r?.nodes??{}).filter(C=>C.type==="UNIT").map(C=>({...C,scale:Object.values(r?.nodes??{}).filter(m=>m.type==="SCALE").find(m=>r?.adjacencyList[C.id].outputs.includes(`${C.id} -> ${m.id}`))}))),c=v.useMemo(()=>d?.state?.filter(r=>l(r,r.scale))??[],[d.state,l]),u=v.useMemo(()=>d?.state?.filter(r=>i(r,r.scale))??[],[d.state,l]);return e.jsxs(y,{role:"compound-selector",width:"min-content",sx:{display:"flex",gap:1,alignItems:"baseline"},children:[o&&e.jsx(U,{gutterBottom:!0,sx:{minWidth:"50px"},children:o}),e.jsxs(y,{sx:{display:"flex",gap:1,alignItems:"baseline"},children:[e.jsx(K,{id:"quotient-selector",value:t.quotient,onChange:r=>s({...t,quotient:r}),selectorProps:{sx:{width:"10px"}},children:c.map(({id:r,name:C,abbreviation:m})=>e.jsx(O,{value:r,children:m},r))},"quotient"),e.jsx("span",{children:"/"}),e.jsx(K,{id:"dividend-selector",value:t.dividend,onChange:r=>s({...t,dividend:r}),sx:{width:"max-content"},children:u.map(({id:r,name:C,abbreviation:m})=>e.jsx(O,{value:r,children:m},r))},"dividend")]})]})}const ct=()=>({time:Object.entries(we).map(([o,t])=>({value:o,label:t}))}),mt=({icon:o,value:t})=>{const s=B([t.quotient.unit,t.dividend.unit]);return s?e.jsxs(y,{sx:{display:"flex",gap:.3,alignItems:"center"},children:[o&&e.jsx("div",{role:"coumpound-value-icon",children:o}),e.jsxs("div",{role:"coumpound-value-value",children:[t.quotient.amount," ",s[t.quotient.unit].abbreviation," / ",t.dividend.amount," ",s[t.dividend.unit].abbreviation]})]}):e.jsx(e.Fragment,{})},xt={name:k,version:Re,depends_on:["Graph"],components:{CoverterGraphViewport:ye,ScaleSlider:ut,CompoundSelector:lt,UnitAmountSelector:K,CompoundUnit:mt},store:{actions:{},middlewares:[],reducers:{}},hooks:{useScales:ct,useUnits:B},constants:{},kernelCalls:{startModule:it,restartModule:()=>{},shutdownModule:()=>{}}};export{xt as m};
