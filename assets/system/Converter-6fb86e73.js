import{c as P,d as Ne,b as Oe,_ as ie,o as e,B as y,aZ as D,a_ as Se,a$ as V,b0 as E,r as h,aD as k,aT as J,aX as Ee,aS as H,aO as $e,R as M,n as ke,ba as ge,P as ve,I as G,bb as ye,bc as Ie,bd as qe,be as re,T as q,bf as de,aE as ue,Z as Ue,$ as Le,bg as B,bh as Re,e as Ge,bi as L,bj as be}from"../vendor-3d8cd717.js";import{A as F,n as p,o as Me,l as _e}from"../kernel-18640e9b.js";const U="Converter",we="0.0.1",O="conversion-graph",De={week:"Semana",day:"Dia",h:"H",m:"m",s:"s",ms:"ms"},Ae={selectedNode:void 0},fe=P(`[${U}:${F.COMMAND}] Load conversion graph`),ee=P(`[${U}:${F.COMMAND}] Select node`),Pe=P(`[${U}:${F.EVENT}] Conversion graph loaded`),Ve=P(`[${U}:${F.COMMAND}] Node selected`),Be=Ne({name:U,initialState:Ae,reducers:{},extraReducers:o=>{o.addCase(ee,(t,{payload:n})=>({...t,selectedNode:n}))}}),ce=o=>o.Converter,N=o=>{const t=p("Store"),n=p("Graph"),c=p("Layout"),{useGraph:i}=n.hooks,s=i(O,l=>l),r=c.hooks.usePanelsManager(),{useAppDispatch:u,useAppSelector:m}=t.hooks,d=u(),a=Oe(ce,o),I=m(a);return m(ce),{state:I,selectNode:l=>{d(ee(l)),r.functions.openDetails()},addUnit:(l,j,f)=>{const v=ie.uniqueId(l.toLowerCase().replace(" ",""));s.actions.addNode({type:"UNIT",id:v,name:l,position:{x:0,y:0},abbreviation:j}),console.log(f),f&&(console.log("add scale"),s.actions.addEdge({id:`${v} -> ${f}`,type:"BELONGS_TO",sourceId:v,targetId:f}))},updateUnit:(l,j,f,v)=>{s.actions.updateNode({id:l,name:j,abbreviation:f});const x=s.state?.adjacencyList[l].outputs.filter(S=>s.state?.edges[S].type==="BELONGS_TO").map(S=>s.state?.edges[S]).pop();v?(x&&x.targetId!==v&&s.actions.removeEdge(x.id),s.actions.addEdge({id:`${l} -> ${v}`,type:"BELONGS_TO",sourceId:l,targetId:v})):x&&s.actions.removeEdge(x.id)},addCompoundUnit:(l,j)=>{const f=s.state?.nodes[l],v=s.state?.nodes[j],x=`${f.abbreviation} / ${v.abbreviation}`;if(s.state?.nodes[x]){console.error("unit already exists! skipping it.");return}const _={id:x,type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:l,dividendUnitId:j,abbreviation:x,name:`${f.name} per ${v.name}`},Q={id:`${x}->${l}`,type:"QUOTIENT",sourceId:x,targetId:l},g={id:`${x}->${j}`,type:"DIVIDEND",sourceId:x,targetId:j};s.actions.addNode(_),s.actions.addEdge(Q),s.actions.addEdge(g)},updateCompoundUnit:(l,j,f)=>{},addScale:l=>{s.actions.addNode({type:"SCALE",id:ie.uniqueId(l.toLowerCase().replace(" ","")),name:l,position:{x:0,y:0}})},addConversion:(l,j,f,v,x)=>{console.log(l,j,f,v,x);let S;if(l==="factor"){if(!v){console.error("Factor required to add factor conversion! Skipping");return}S={type:"CONVERTS_TO",conversionType:"factor",factor:v,id:`${j}->${f}`,sourceId:j,targetId:f}}else{if(!x){console.error("Expression required to add expression conversion! Skipping");return}S={type:"CONVERTS_TO",conversionType:"expression",expression:x,id:`${j}-[conv]->${f}`,sourceId:j,targetId:f}}s.actions.addEdge(S)}}};function te({onChange:o,value:t,...n}){const c=p("Graph"),{hooks:{useGraph:i}}=c,s=i(O,r=>r&&Object.values(r.nodes).filter(u=>u.type==="SCALE"));return s.state?e.jsx(y,{role:"scale-selector",...n,sx:{display:"flex",gap:.2},children:e.jsxs(D,{sx:{m:1,minWidth:120,width:"min-content"},children:[e.jsx(Se,{id:"label",children:"Escala"}),e.jsxs(V,{id:"scale-selector",inputProps:{id:"scale"},label:"Escala",labelId:"label",size:"small",onChange:r=>o(r.target.value),value:t??"",children:[s.state.map(r=>e.jsx(E,{value:r.id,children:r.name})),e.jsx(E,{value:"",children:"Nenhuma"})]})]})}):e.jsx(e.Fragment,{})}const le={name:void 0,abbreviation:void 0,scale:void 0},Fe=()=>{const o=p("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:n}=o.components,c=N(u=>u),[i,s]=h.useState(le),r=h.useCallback(()=>{!i.name||!i.abbreviation||(c.addUnit(i.name,i.abbreviation,i.scale),s(le))},[i,c]);return e.jsx(t,{component:e.jsxs(y,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(k,{id:"unit-name",label:"Nome",variant:"standard",value:i.name,onChange:u=>s(m=>({...m,name:u.target.value}))}),e.jsx(k,{id:"abbreviation",label:"Abbreviation",variant:"standard",value:i.abbreviation,onChange:u=>s(m=>({...m,abbreviation:u.target.value})),sx:{alignItems:"center"}}),e.jsx(te,{value:i.scale??"",onChange:u=>s(m=>({...m,scale:u}))})]}),actions:[e.jsx(n,{handleConfirm:r},"confirm")],children:e.jsx(J,{primary:"Unidade",secondary:"Adiciona um tipo de unidade simples",sx:{cursor:"pointer",flexGrow:1}})})},me={name:void 0},Ke=()=>{const o=p("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:n}=o.components,c=N(u=>u),[i,s]=h.useState(me),r=h.useCallback(()=>{i.name&&(c.addScale(i.name),s(me))},[i,c]);return e.jsx(t,{component:e.jsx(y,{sx:{display:"flex",flexDirection:"column",gap:1},children:e.jsx(k,{id:"part-name",label:"Nome",variant:"standard",value:i.name,onChange:u=>s(m=>({...m,name:u.target.value}))})}),actions:[e.jsx(n,{handleConfirm:r},"confirm")],children:e.jsx(J,{primary:"Escala",secondary:"Adiciona um tipo de escala",sx:{cursor:"pointer",flexGrow:1}})})},A=({value:o,onChange:t,filterUnits:n=()=>!0,formControlProps:c,...i})=>{const s=p("Graph"),{useGraph:r}=s.hooks,u=r(O,d=>Object.values(d?.nodes??{}).filter(a=>a.type==="UNIT"||a.type==="COMPOUND_UNIT").map(a=>({...a,scale:Object.values(d?.nodes??{}).filter(I=>I.type==="SCALE").find(I=>d?.adjacencyList[a.id].outputs.includes(`${a.id} -> ${I.id}`))}))),m=h.useMemo(()=>u?.state?.filter(d=>n(d,d.scale))??[],[u.state,n]);return e.jsx(D,{...c,children:e.jsx(V,{id:"unit-selector",inputProps:{id:"unit"},size:"small",sx:{width:"max(min-content, 100px)",minWidth:100},onChange:t,value:o,...i,children:m.map(({id:d,name:a,abbreviation:I})=>e.jsx(E,{value:d,children:I},d))})})},pe={quotientUnit:"",dividendUnit:""},Qe=()=>{const o=p("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:n}=o.components,c=N(u=>u),[i,s]=h.useState(pe),r=h.useCallback(()=>{c.addCompoundUnit(i.quotientUnit,i.dividendUnit),s(pe)},[i,c]);return e.jsx(t,{component:e.jsxs(y,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",gap:1},children:[e.jsx(A,{value:i.quotientUnit,onChange:(u,m)=>s(d=>({...d,quotientUnit:u.target.value}))}),e.jsx("span",{children:"/"}),e.jsx(A,{value:i.dividendUnit,onChange:(u,m)=>s(d=>({...d,dividendUnit:u.target.value}))})]}),actions:[e.jsx(n,{handleConfirm:r},"confirm")],children:e.jsx(J,{primary:"Unidade Composta",secondary:"Adiciona um tipo de unidade composta",sx:{cursor:"pointer",flexGrow:1}})})},We=()=>e.jsxs(Ee,{role:"list-options",sx:{paddingRight:5,overflow:"auto"},children:[e.jsx(H,{disableGutters:!0,children:e.jsx(Fe,{})},"unit"),e.jsx(H,{disableGutters:!0,children:e.jsx(Qe,{})},"compositeUnit"),e.jsx(H,{disableGutters:!0,children:e.jsx(Ke,{})},"scale")]}),ze=()=>{const o=p("Layout"),{SettingsPanel:t,Accordion:n}=o.components;return e.jsxs(t,{children:[e.jsx(n,{name:"Nodos",icon:e.jsx($e,{}),summary:"Tipos de nodos disponíveis",children:e.jsx(We,{})}),e.jsx(e.Fragment,{})]})},He=({graphId:o})=>{const{hooks:{useResizeObserver:t}}=p("Layout"),{hooks:{useGraph:n}}=p("Graph"),{hooks:{useD3Container:c},d3Components:{Grid:i,DependencyCircle:s}}=p("SVG"),r=N(g=>g),u=h.useRef(null),m=h.useRef(null),d=t(m),a=n(o,g=>g),I=h.useMemo(()=>{if(!a.state?.nodes)return{nodes:[],links:[]};const g=b=>{if(!a.state)return{id:"other",name:"Outros"};const $=Object.values(a.state.edges).find(C=>C.sourceId===b.id&&C.type==="BELONGS_TO");if($){const C=a.state.nodes[$.targetId];return{id:C.id,name:C.name}}return{id:"other",name:"Outros"}};return{nodes:Object.values(a.state.nodes).map(b=>({...b,nodeLabel:"abbreviation"in b?b.abbreviation:b.name,group:g(b),radius:5,strength:10,x:b.position.x,y:b.position.y})),links:Object.values(a.state.edges).map(b=>({...b,source:b.sourceId,target:b.targetId}))}},[a]),l=ke(),[j,f]=h.useState(!0),[v,x]=[d?.width??700,d?.height??700],S=h.useCallback(g=>{r.selectNode(g)},[]),_=h.useCallback(g=>{r.selectNode(g)},[]),Q=c().width(v).height(x).underlays([i({xSettings:{range:[-1,v+1],domain:[-1,v+1]},ySettings:{range:[-1,x+1],domain:[-1,x+1]},dimensions:[v,x]}).transformZoom((g,b)=>{j&&(b.translateBy(g,v/2,x/2),f(!1))}).build]).content([s().innerRadius(Math.min(v,x)/2-20).filterNode(g=>g.type==="UNIT"||g.type==="COMPOUND_UNIT").filterLink(g=>g.type==="CONVERTS_TO").renderGroup((g,b,$,C,w,ne)=>{g.selectAll("path").data([b]).join("path").attr("id",T=>T.id).on("click",T=>T.target.id!=="other"&&_(T.target.id)).attr("class","group-arc").attr("fill",T=>C(b.id)).attr("d",(T,se)=>w($)),g.selectAll("text").data([b]).join("text").attr("class","group-text").text(T=>T.name).attr("id",T=>T.id).on("click",T=>T.target.id!=="other"&&_(T.target.id)).attr("fill",T=>C(T.id)).attr("text-anchor",(T,se)=>($.endAngle+$.startAngle)/2>Math.PI?"end":"start").attr("transform",(T,se)=>{const[W,z]=w.centroid($),ae=Math.sqrt(W*W+z*z);return`translate(${W/ae*ne*1.3}, ${z/ae*ne*1.3})`})}).renderNode((g,b,$)=>{g.append("text").text(C=>C.nodeLabel).attr("fill",C=>r.state?.selectedNode===C.id?l.palette.getContrastText(l.palette.background.default):$(C.group.id)).attr("text-anchor","middle").on("pointerdown",(C,w)=>{S(w.id),C.stopPropagation()})}).theme(l.palette.mode).build]);return h.useLayoutEffect(()=>{!d||!u.current||Q.render(I,u.current)},[I,d]),a.state?e.jsx("div",{ref:m,role:"conversion-graph-viewer",style:{height:"100%",width:"100%"},children:e.jsx("svg",{ref:u,id:`${a.id}`,width:"100%",height:"100%"})}):e.jsx(e.Fragment,{})},Ze=M.memo(He),Xe=()=>{const o=p("Layout"),{Accordion:t}=o.components,n=p("Graph"),{useGraph:c}=n.hooks,i=N(d=>d.selectedNode),s=c(O,d=>i.state&&d?.nodes?{...d.nodes[i.state],scale:d.adjacencyList[i.state].outputs.filter(a=>d.edges[a].type==="BELONGS_TO").map(a=>d.edges[a].targetId).pop()}:void 0),[r,u]=h.useState(s.state);h.useEffect(()=>u(s.state),[i.state]);const m=h.useCallback(()=>{i.updateUnit(i.state,r?.name,r?.abbreviation,r?.scale)},[s]);return!i?.state||!s?.state?e.jsx(e.Fragment,{}):e.jsx(t,{name:"Propriedades",icon:e.jsx(ge,{}),summary:"Propriedades da unidade",children:e.jsxs(ve,{variant:"outlined",square:!0,sx:{width:"100%",padding:1,"&:div + div":{borderTop:0},display:"flex",justifyContent:"space-between"},role:"unit-properties",children:[e.jsx(k,{id:"unit-name",label:"Nome",variant:"standard",value:r?.name??"",onChange:d=>u(a=>a&&{...a,name:d.target.value})}),e.jsx(k,{id:"abbreviation",label:"Abreviatura",variant:"standard",value:r?.abbreviation??"",onChange:d=>u(a=>a&&{...a,abbreviation:d.target.value}),sx:{alignItems:"center"}}),e.jsx(te,{value:r?.scale??"",onChange:d=>u(a=>a&&{...a,scale:d})}),e.jsxs(y,{sx:{display:"flex",flexDirection:"column",padding:0,gap:1,justifyContent:"space-between",alignContent:"space-evenly"},role:"actions",children:[e.jsx(G,{color:"success",id:"save-unit-properties",onClick:d=>m(),children:e.jsx(ye,{})},"save"),e.jsx(G,{color:"info",id:"reset-unit-properties",onClick:d=>u(s.state),children:e.jsx(Ie,{})},"reset")]})]})})},R=o=>{const t=p("Graph"),{useGraph:n}=t.hooks;return n(O,i=>i&&Object.values(i.nodes).filter(s=>o.includes(s.id)).reduce((s,r)=>({...s,[r.id]:r}),{})).state},K=({from:o="",to:t=""})=>{const n=p("Pointer"),{PointerContainer:c,ConfirmAndCloseButton:i}=n.components,s=N(d=>d),[r,u]=h.useState({type:"factor",from:o,to:t,factor:1,expression:"quantidade * 1"});h.useEffect(()=>u(d=>({...d,from:o,to:t})),[o,t]);const m=h.useCallback(()=>{r.from&&r.to&&s.addConversion(r.type,r.from,r.to,r.factor,r.expression)},[r]);return e.jsx(c,{component:e.jsxs(y,{sx:{display:"flex",flexDirection:"column",gap:1},role:"conversion-form",children:[e.jsx(y,{role:"conversion-type",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:e.jsxs(qe,{color:"primary",value:r.type,exclusive:!0,onChange:(d,a)=>u(I=>({...I,type:a})),"aria-label":"Platform",children:[e.jsx(re,{value:"factor",children:"Fator"}),e.jsx(re,{value:"expresssion",children:"Expressão"})]})}),e.jsxs(y,{role:"from-conversion",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(q,{sx:{minWidth:30},children:"De:"}),e.jsx(A,{value:r.from,disabled:!!o,filterUnits:d=>d.id!==r.to,onChange:d=>u(a=>({...a,from:d.target.value})),formControlProps:{sx:{flexGrow:1}}})]}),e.jsxs(y,{role:"to-conversion",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(q,{sx:{minWidth:30},children:"Para:"}),e.jsx(A,{value:r.to,disabled:!!t,filterUnits:d=>d.id!==r.from,formControlProps:{sx:{flexGrow:1}},onChange:d=>{console.log("changing"),u(a=>({...a,to:d.target.value}))}})]}),e.jsx(y,{children:r.type==="factor"?e.jsxs(y,{role:"factor-field",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(q,{sx:{minWidth:30},children:"Fator"}),e.jsx(de,{value:r.factor,type:"number",sx:{width:"max-content",flexGrow:1},onChange:d=>u(a=>({...a,factor:+d.target.value})),startAdornment:e.jsx(ue,{position:"start",children:"1:"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(y,{role:"expression-field",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(q,{sx:{minWidth:30},children:"Exp"}),e.jsx(de,{value:r.expression,onChange:d=>u(a=>({...a,expression:d.target.value})),sx:{width:"max-content",flexGrow:1},startAdornment:e.jsx(ue,{position:"start",children:"="})})]}),e.jsx(q,{sx:{marginTop:1},children:"quantidade é a única variável pré-definida, é utilizada para definir a quantidade a ser convertida. Há suas variantes quantidadeQuociente e quantidadeDividendo para unidades compostas"})]})})]}),actions:[e.jsx(i,{handleConfirm:m},"confirm")],children:e.jsx(Ue,{startIcon:e.jsx(Le,{}),variant:"outlined",size:"small",sx:{marginBottom:1},children:"Adicionar Conversão"})})},Ye=()=>{const o=p("Layout"),t=N(s=>s.selectedNode),n=R([t.state]);if(!n||!t.state)throw Error("units should be available");const c=n[t.state],{Accordion:i}=o.components;return e.jsx(i,{name:"Converte de",icon:e.jsx(B,{}),summary:`Quais unidades podem ser convertidas em ${c.name}`,children:e.jsx(K,{to:c.id})})},Je=()=>{const o=p("Layout"),t=N(s=>s.selectedNode),n=R([t.state]);if(!n||!t.state)throw Error("units should be available");const c=n[t.state],{Accordion:i}=o.components;return e.jsx(i,{name:"Converte para",icon:e.jsx(B,{sx:{transform:"rotate(180)"}}),summary:`${c.name} pode ser convertida em`,children:e.jsx(K,{from:c.id})})},et=()=>e.jsxs(e.Fragment,{children:[e.jsx(Xe,{}),e.jsx(Je,{}),e.jsx(Ye,{})]}),tt=()=>{const o=p("Layout"),{Accordion:t}=o.components,n=p("Graph"),{useGraph:c}=n.hooks,i=N(d=>d.selectedNode),s=c(O,d=>i.state&&d?.nodes?{...d.nodes[i.state],scale:d.adjacencyList[i.state].outputs.filter(a=>d.edges[a].type==="BELONGS_TO").map(a=>d.edges[a].targetId).pop()}:void 0),[r,u]=h.useState(s.state);h.useEffect(()=>u(s.state),[i.state]);const m=h.useCallback(()=>{i.updateUnit(i.state,r?.name,r?.abbreviation,r?.scale)},[s]);return!i?.state||!s?.state?e.jsx(e.Fragment,{}):e.jsx(t,{name:"Propriedades",icon:e.jsx(ge,{}),summary:"Propriedades da unidade",children:e.jsxs(ve,{variant:"outlined",square:!0,sx:{width:"100%",padding:1,"&:div + div":{borderTop:0},display:"flex",justifyContent:"space-between"},role:"unit-properties",children:[e.jsx(k,{id:"unit-name",label:"Nome",variant:"standard",value:r?.name??"",onChange:d=>u(a=>a&&{...a,name:d.target.value})}),e.jsx(k,{id:"abbreviation",label:"Abreviatura",variant:"standard",value:r?.abbreviation??"",onChange:d=>u(a=>a&&{...a,abbreviation:d.target.value}),sx:{alignItems:"center"}}),e.jsx(te,{value:r?.scale??"",onChange:d=>u(a=>a&&{...a,scale:d})}),e.jsxs(y,{sx:{display:"flex",flexDirection:"column",padding:0,gap:1,justifyContent:"space-between",alignContent:"space-evenly"},role:"actions",children:[e.jsx(G,{color:"success",id:"save-unit-properties",onClick:d=>m(),children:e.jsx(ye,{})},"save"),e.jsx(G,{color:"info",id:"reset-unit-properties",onClick:d=>u(s.state),children:e.jsx(Ie,{})},"reset")]})]})})},ot=()=>{const o=p("Layout"),t=N(s=>s.selectedNode),n=R([t.state]);if(!n||!t.state)throw Error("units should be available");const c=n[t.state],{Accordion:i}=o.components;return e.jsx(i,{name:"Converte de",icon:e.jsx(B,{}),summary:`Quais unidades podem ser convertidas em ${c.name}`,children:e.jsx(K,{to:c.id})})},nt=()=>{const o=p("Layout"),t=N(s=>s.selectedNode),n=R([t.state]);if(!n||!t.state)throw Error("units should be available");const c=n[t.state],{Accordion:i}=o.components;return e.jsx(i,{name:"Converte para",icon:e.jsx(B,{sx:{transform:"rotate(180)"}}),summary:`${c.name} pode ser convertida em`,children:e.jsx(K,{from:c.id})})},st=()=>e.jsxs(e.Fragment,{children:[e.jsx(tt,{}),e.jsx(nt,{}),e.jsx(ot,{})]}),at=()=>e.jsx(e.Fragment,{children:"Escala selectionada"}),it=()=>{const o=p("Layout"),t=p("Graph"),{DetailsPanel:n}=o.components,{useGraph:c}=t.hooks,i=N(r=>r.selectedNode),s=c(O,r=>i.state?r?.nodes[i.state]:void 0);return s.state?e.jsx(n,{children:e.jsxs(e.Fragment,{children:[s?.state?.type==="UNIT"&&e.jsx(et,{}),s?.state?.type==="SCALE"&&e.jsx(at,{}),s?.state?.type==="COMPOUND_UNIT"&&e.jsx(st,{})]})}):e.jsx(e.Fragment,{})},rt=({name:o})=>{const t=p("Layout"),{ViewportNotificationsTray:n}=t.components;return e.jsxs(y,{role:"converter-graph-viewport",sx:{padding:1,height:"100%",position:"relative",overflow:"hidden"},children:[e.jsx(Ze,{graphId:O}),e.jsx(n,{children:e.jsx(e.Fragment,{})}),e.jsx(ze,{}),e.jsx(it,{})]})},je=M.memo(rt),dt=()=>{const o=p("Layout"),{useViewportManager:t}=o.hooks,n=t();return e.jsx(e.Fragment,{children:e.jsx(G,{onClick:()=>n.functions.addViewport("Grafo de conversão","ConverterGraphViewport",void 0,"conversion-graph"),children:e.jsx(Re,{})})})},ut={id:"conversion-graph",nodes:{metros5:{type:"UNIT",id:"metros5",name:"metros",position:{x:0,y:0},abbreviation:"m"},comprimento6:{type:"SCALE",id:"comprimento6",name:"Comprimento",position:{x:0,y:0}},centimetros7:{type:"UNIT",id:"centimetros7",name:"centimetros",position:{x:0,y:0},abbreviation:"cm"},kilometros8:{type:"UNIT",id:"kilometros8",name:"kilometros",position:{x:0,y:0},abbreviation:"km"},milimetros9:{type:"UNIT",id:"milimetros9",name:"milimetros",position:{x:0,y:0},abbreviation:"mm"},monetaria10:{type:"SCALE",id:"monetaria10",name:"Monetaria",position:{x:0,y:0}},reais11:{type:"UNIT",id:"reais11",name:"reais",position:{x:0,y:0},abbreviation:"R$"},dolares12:{type:"UNIT",id:"dolares12",name:"dolares",position:{x:0,y:0},abbreviation:"$"},volume13:{type:"SCALE",id:"volume13",name:"Volume",position:{x:0,y:0}},litroscubicos14:{type:"UNIT",id:"litroscubicos14",name:"litros cubicos",position:{x:0,y:0},abbreviation:"l³"},metroscubicos15:{type:"UNIT",id:"metroscubicos15",name:"metros cubicos",position:{x:0,y:0},abbreviation:"m³"},area16:{type:"SCALE",id:"area16",name:"Area",position:{x:0,y:0}},metrosquadrados17:{type:"UNIT",id:"metrosquadrados17",name:"metros quadrados",position:{x:0,y:0},abbreviation:"m²"},unitario18:{type:"UNIT",id:"unitario18",name:"unitario",position:{x:0,y:0},abbreviation:"un"},capacidade5:{type:"SCALE",id:"capacidade5",name:"Capacidade",position:{x:0,y:0}},mililitros6:{type:"UNIT",id:"mililitros6",name:"mililitros",position:{x:0,y:0},abbreviation:"ml"},litros7:{type:"UNIT",id:"litros7",name:"litros",position:{x:0,y:0},abbreviation:"l"},kilometrosquadrados8:{type:"UNIT",id:"kilometrosquadrados8",name:"kilometros quadrados",position:{x:0,y:0},abbreviation:"km²"},centimetrosquadrados9:{type:"UNIT",id:"centimetrosquadrados9",name:"centimetros quadrados",position:{x:0,y:0},abbreviation:"cm²"},temporal247:{type:"SCALE",id:"temporal247",name:"Temporal",position:{x:0,y:0}},segundos248:{type:"UNIT",id:"segundos248",name:"segundos",position:{x:0,y:0},abbreviation:"seg"},minutos249:{type:"UNIT",id:"minutos249",name:"minutos",position:{x:0,y:0},abbreviation:"min"},hora250:{type:"UNIT",id:"hora250",name:"hora",position:{x:0,y:0},abbreviation:"h"},dia251:{type:"UNIT",id:"dia251",name:"dia",position:{x:0,y:0},abbreviation:"d"},mes252:{type:"UNIT",id:"mes252",name:"mes",position:{x:0,y:0},abbreviation:"mes"},semana253:{type:"UNIT",id:"semana253",name:"semana",position:{x:0,y:0},abbreviation:"sem"},peso5:{type:"SCALE",id:"peso5",name:"Peso",position:{x:0,y:0}},kilogramas6:{type:"UNIT",id:"kilogramas6",name:"Kilogramas",position:{x:0,y:0},abbreviation:"Kg"},gramas7:{type:"UNIT",id:"gramas7",name:"gramas",position:{x:0,y:0},abbreviation:"g"},miligramas8:{type:"UNIT",id:"miligramas8",name:"miligramas",position:{x:0,y:0},abbreviation:"mg"},"un / min":{id:"un / min",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"unitario18",dividendUnitId:"minutos249",abbreviation:"un / min",name:"unitario per minutos"},"R$ / h":{id:"R$ / h",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"reais11",dividendUnitId:"hora250",abbreviation:"R$ / h",name:"reais per hora"},"R$ / un":{id:"R$ / un",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"reais11",dividendUnitId:"unitario18",abbreviation:"R$ / un",name:"reais per unitario"},"un / h":{id:"un / h",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"unitario18",dividendUnitId:"hora250",abbreviation:"un / h",name:"unitario per hora"},"m² / Kg":{id:"m² / Kg",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"metrosquadrados17",dividendUnitId:"kilogramas6",abbreviation:"m² / Kg",name:"metros quadrados per Kilogramas"}},edges:{"metros5 -> comprimento6":{id:"metros5 -> comprimento6",type:"BELONGS_TO",sourceId:"metros5",targetId:"comprimento6"},"centimetros7 -> comprimento6":{id:"centimetros7 -> comprimento6",type:"BELONGS_TO",sourceId:"centimetros7",targetId:"comprimento6"},"kilometros8 -> comprimento6":{id:"kilometros8 -> comprimento6",type:"BELONGS_TO",sourceId:"kilometros8",targetId:"comprimento6"},"milimetros9 -> comprimento6":{id:"milimetros9 -> comprimento6",type:"BELONGS_TO",sourceId:"milimetros9",targetId:"comprimento6"},"reais11 -> monetaria10":{id:"reais11 -> monetaria10",type:"BELONGS_TO",sourceId:"reais11",targetId:"monetaria10"},"dolares12 -> monetaria10":{id:"dolares12 -> monetaria10",type:"BELONGS_TO",sourceId:"dolares12",targetId:"monetaria10"},"litroscubicos14 -> volume13":{id:"litroscubicos14 -> volume13",type:"BELONGS_TO",sourceId:"litroscubicos14",targetId:"volume13"},"metroscubicos15 -> volume13":{id:"metroscubicos15 -> volume13",type:"BELONGS_TO",sourceId:"metroscubicos15",targetId:"volume13"},"metrosquadrados17 -> area16":{id:"metrosquadrados17 -> area16",type:"BELONGS_TO",sourceId:"metrosquadrados17",targetId:"area16"},"mililitros6 -> volume13":{id:"mililitros6 -> volume13",type:"BELONGS_TO",sourceId:"mililitros6",targetId:"volume13"},"litros7 -> volume13":{id:"litros7 -> volume13",type:"BELONGS_TO",sourceId:"litros7",targetId:"volume13"},"kilometrosquadrados8 -> area16":{id:"kilometrosquadrados8 -> area16",type:"BELONGS_TO",sourceId:"kilometrosquadrados8",targetId:"area16"},"centimetrosquadrados9 -> area16":{id:"centimetrosquadrados9 -> area16",type:"BELONGS_TO",sourceId:"centimetrosquadrados9",targetId:"area16"},"segundos248 -> temporal247":{id:"segundos248 -> temporal247",type:"BELONGS_TO",sourceId:"segundos248",targetId:"temporal247"},"minutos249 -> temporal247":{id:"minutos249 -> temporal247",type:"BELONGS_TO",sourceId:"minutos249",targetId:"temporal247"},"hora250 -> temporal247":{id:"hora250 -> temporal247",type:"BELONGS_TO",sourceId:"hora250",targetId:"temporal247"},"dia251 -> temporal247":{id:"dia251 -> temporal247",type:"BELONGS_TO",sourceId:"dia251",targetId:"temporal247"},"mes252 -> temporal247":{id:"mes252 -> temporal247",type:"BELONGS_TO",sourceId:"mes252",targetId:"temporal247"},"semana253 -> temporal247":{id:"semana253 -> temporal247",type:"BELONGS_TO",sourceId:"semana253",targetId:"temporal247"},"kilogramas6 -> peso5":{id:"kilogramas6 -> peso5",type:"BELONGS_TO",sourceId:"kilogramas6",targetId:"peso5"},"gramas7 -> peso5":{id:"gramas7 -> peso5",type:"BELONGS_TO",sourceId:"gramas7",targetId:"peso5"},"miligramas8 -> peso5":{id:"miligramas8 -> peso5",type:"BELONGS_TO",sourceId:"miligramas8",targetId:"peso5"},"un / min->unitario18":{id:"un / min->unitario18",type:"QUOTIENT",sourceId:"un / min",targetId:"unitario18"},"un / min->minutos249":{id:"un / min->minutos249",type:"DIVIDEND",sourceId:"un / min",targetId:"minutos249"},"R$ / h->reais11":{id:"R$ / h->reais11",type:"QUOTIENT",sourceId:"R$ / h",targetId:"reais11"},"R$ / h->hora250":{id:"R$ / h->hora250",type:"DIVIDEND",sourceId:"R$ / h",targetId:"hora250"},"R$ / un->reais11":{id:"R$ / un->reais11",type:"QUOTIENT",sourceId:"R$ / un",targetId:"reais11"},"R$ / un->unitario18":{id:"R$ / un->unitario18",type:"DIVIDEND",sourceId:"R$ / un",targetId:"unitario18"},"un / h->unitario18":{id:"un / h->unitario18",type:"QUOTIENT",sourceId:"un / h",targetId:"unitario18"},"un / h->hora250":{id:"un / h->hora250",type:"DIVIDEND",sourceId:"un / h",targetId:"hora250"},"metrosquadrados17->kilogramas6":{type:"CONVERTS_TO",conversionType:"expression",expression:"quantidade * rendimento",id:"metrosquadrados17->kilogramas6",sourceId:"metrosquadrados17",targetId:"kilogramas6"},"mes252->semana253":{type:"CONVERTS_TO",conversionType:"factor",factor:4,id:"mes252->semana253",sourceId:"mes252",targetId:"semana253"},"mes252->dia251":{type:"CONVERTS_TO",conversionType:"factor",factor:30,id:"mes252->dia251",sourceId:"mes252",targetId:"dia251"},"dia251->hora250":{type:"CONVERTS_TO",conversionType:"factor",factor:24,id:"dia251->hora250",sourceId:"dia251",targetId:"hora250"},"hora250->minutos249":{type:"CONVERTS_TO",conversionType:"factor",factor:60,id:"hora250->minutos249",sourceId:"hora250",targetId:"minutos249"},"semana253->dia251":{type:"CONVERTS_TO",conversionType:"factor",factor:7,id:"semana253->dia251",sourceId:"semana253",targetId:"dia251"},"minutos249->segundos248":{type:"CONVERTS_TO",conversionType:"factor",factor:60,id:"minutos249->segundos248",sourceId:"minutos249",targetId:"segundos248"},"un / h-[conv]->hora250":{type:"CONVERTS_TO",conversionType:"expression",expression:"unidades * (quantidadeQuociente / quantidadeDividendo)",id:"un / h-[conv]->hora250",sourceId:"un / h",targetId:"hora250"},"R$ / un-[conv]->reais11":{type:"CONVERTS_TO",conversionType:"expression",expression:"unidades * (quantidadeQuociente / quantidadeDividendo)",id:"R$ / un-[conv]->reais11",sourceId:"R$ / un",targetId:"reais11"},"R$ / un-[conv]->unitario18":{type:"CONVERTS_TO",conversionType:"expression",expression:"reais / (quantidadeQuociente / quantidadeDividendo)",id:"R$ / un-[conv]->unitario18",sourceId:"R$ / un",targetId:"unitario18"},"un / min-[conv]->un / h":{type:"CONVERTS_TO",conversionType:"expression",expression:"(quantidadeQuociente / quantidadeDividendo) * 60",id:"un / min-[conv]->un / h",sourceId:"un / min",targetId:"un / h"},"R$ / h-[conv]->reais11":{type:"CONVERTS_TO",conversionType:"expression",expression:"horas * (quantidadeQuociente / quantidadeDividendo)",id:"R$ / h-[conv]->reais11",sourceId:"R$ / h",targetId:"reais11"},"un / h-[conv]->unitario18":{type:"CONVERTS_TO",conversionType:"expression",expression:"horas / (quantidadeQuociente / quantidadeDividendo)",id:"un / h-[conv]->unitario18",sourceId:"un / h",targetId:"unitario18"},"m² / Kg->metrosquadrados17":{id:"m² / Kg->metrosquadrados17",type:"QUOTIENT",sourceId:"m² / Kg",targetId:"metrosquadrados17"},"m² / Kg->kilogramas6":{id:"m² / Kg->kilogramas6",type:"DIVIDEND",sourceId:"m² / Kg",targetId:"kilogramas6"},"m² / Kg-[conv]->kilogramas6":{type:"CONVERTS_TO",conversionType:"expression",expression:"metros * (quantidadeQuociente / quantidadeDividendo)",id:"m² / Kg-[conv]->kilogramas6",sourceId:"m² / Kg",targetId:"kilogramas6"},"m² / Kg-[conv]->metrosquadrados17":{type:"CONVERTS_TO",conversionType:"expression",expression:"kilos / (quantidadeQuociente / quantidadeDividendo)",id:"m² / Kg-[conv]->metrosquadrados17",sourceId:"m² / Kg",targetId:"metrosquadrados17"}},adjacencyList:{metros5:{inputs:[],outputs:["metros5 -> comprimento6"]},comprimento6:{inputs:["metros5 -> comprimento6","centimetros7 -> comprimento6","kilometros8 -> comprimento6","milimetros9 -> comprimento6"],outputs:[]},centimetros7:{inputs:[],outputs:["centimetros7 -> comprimento6"]},kilometros8:{inputs:[],outputs:["kilometros8 -> comprimento6"]},milimetros9:{inputs:[],outputs:["milimetros9 -> comprimento6"]},monetaria10:{inputs:["reais11 -> monetaria10","dolares12 -> monetaria10"],outputs:[]},reais11:{inputs:["R$ / h->reais11","R$ / un->reais11","R$ / un-[conv]->reais11","R$ / h-[conv]->reais11"],outputs:["reais11 -> monetaria10"]},dolares12:{inputs:[],outputs:["dolares12 -> monetaria10"]},volume13:{inputs:["litroscubicos14 -> volume13","metroscubicos15 -> volume13","mililitros6 -> volume13","litros7 -> volume13"],outputs:[]},litroscubicos14:{inputs:[],outputs:["litroscubicos14 -> volume13"]},metroscubicos15:{inputs:[],outputs:["metroscubicos15 -> volume13"]},area16:{inputs:["metrosquadrados17 -> area16","kilometrosquadrados8 -> area16","centimetrosquadrados9 -> area16"],outputs:[]},metrosquadrados17:{inputs:["m² / Kg->metrosquadrados17","m² / Kg-[conv]->metrosquadrados17"],outputs:["metrosquadrados17 -> area16","metrosquadrados17->kilogramas6"]},unitario18:{inputs:["un / min->unitario18","R$ / un->unitario18","un / h->unitario18","R$ / un-[conv]->unitario18","un / h-[conv]->unitario18"],outputs:[]},capacidade5:{inputs:[],outputs:[]},mililitros6:{inputs:[],outputs:["mililitros6 -> volume13"]},litros7:{inputs:[],outputs:["litros7 -> volume13"]},kilometrosquadrados8:{inputs:[],outputs:["kilometrosquadrados8 -> area16"]},centimetrosquadrados9:{inputs:[],outputs:["centimetrosquadrados9 -> area16"]},temporal247:{inputs:["segundos248 -> temporal247","minutos249 -> temporal247","hora250 -> temporal247","dia251 -> temporal247","mes252 -> temporal247","semana253 -> temporal247"],outputs:[]},segundos248:{inputs:["minutos249->segundos248"],outputs:["segundos248 -> temporal247"]},minutos249:{inputs:["un / min->minutos249","hora250->minutos249"],outputs:["minutos249 -> temporal247","minutos249->segundos248"]},hora250:{inputs:["R$ / h->hora250","un / h->hora250","dia251->hora250","un / h-[conv]->hora250"],outputs:["hora250 -> temporal247","hora250->minutos249"]},dia251:{inputs:["mes252->dia251","semana253->dia251"],outputs:["dia251 -> temporal247","dia251->hora250"]},mes252:{inputs:[],outputs:["mes252 -> temporal247","mes252->semana253","mes252->dia251"]},semana253:{inputs:["mes252->semana253"],outputs:["semana253 -> temporal247","semana253->dia251"]},peso5:{inputs:["kilogramas6 -> peso5","gramas7 -> peso5","miligramas8 -> peso5"],outputs:[]},kilogramas6:{inputs:["metrosquadrados17->kilogramas6","m² / Kg->kilogramas6","m² / Kg-[conv]->kilogramas6"],outputs:["kilogramas6 -> peso5"]},gramas7:{inputs:[],outputs:["gramas7 -> peso5"]},miligramas8:{inputs:[],outputs:["miligramas8 -> peso5"]},"un / min":{inputs:[],outputs:["un / min->unitario18","un / min->minutos249","un / min-[conv]->un / h"]},"R$ / h":{inputs:[],outputs:["R$ / h->reais11","R$ / h->hora250","R$ / h-[conv]->reais11"]},"R$ / un":{inputs:[],outputs:["R$ / un->reais11","R$ / un->unitario18","R$ / un-[conv]->reais11","R$ / un-[conv]->unitario18"]},"un / h":{inputs:["un / min-[conv]->un / h"],outputs:["un / h->unitario18","un / h->hora250","un / h-[conv]->hora250","un / h-[conv]->unitario18"]},"m² / Kg":{inputs:[],outputs:["m² / Kg->metrosquadrados17","m² / Kg->kilogramas6","m² / Kg-[conv]->kilogramas6","m² / Kg-[conv]->metrosquadrados17"]}},searchResults:{}},oe=Ge();oe.startListening({actionCreator:fe,effect:async(o,t)=>{const{dispatch:n}=t;n(Me({graphId:O})),n(_e({graphId:O,graph:ut})),n(Pe())}});oe.startListening({actionCreator:ee,effect:async(o,t)=>{const{dispatch:n}=t;n(Ve(o.payload))}});function ct({dispatch:o,managers:{storeManager:t,componentRegistryManager:n,ribbonMenuManager:c}}){t.functions.loadReducer(U,Be.reducer),t.functions.registerMiddleware(oe),o(fe()),n.functions.registerComponents({ribbonMenuSections:{ConversorGraphSection:M.memo(dt)},viewportTypes:{ConverterGraphViewport:je}}),c.functions.addNewTab({label:"Conversor",sectionNames:["ConversorGraphSection"],type:"base"})}function Z(o){const t=Te(o);return`${t.amount} ${t.unit}`}function Te(o){const t=["centavos","R$"];let n=0,c=o;for(;c>=100&&n<t.length-1;)n+=1,c/=100;return{amount:c,unit:t[n]}}function X(o){return o<1e4?Math.round(Math.sqrt(o)):+Math.pow(o/1e3,2).toPrecision(2)}function lt({label:o,icon:t,onChange:n,slots:c}){const[i,s]=M.useState(10),r=(u,m)=>{typeof m=="number"&&(s(m),n(Te(X(m)))),u.stopPropagation(),u.preventDefault()};return e.jsxs(y,{sx:{width:250},role:"money-slider",onPointerMove:u=>{u.stopPropagation(),u.preventDefault()},children:[e.jsxs(y,{children:[e.jsxs(q,{id:"money-slider",gutterBottom:!0,children:[o,": ",Z(X(i))]}),c?.coumpoundSelector]}),e.jsxs(L,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(L,{item:!0,children:t}),e.jsx(L,{item:!0,xs:!0,children:e.jsx(be,{value:i,min:0,step:.01,max:1e5,marks:[{value:1e4,label:"1 R$"},{value:32e3,label:"10 R$"}],scale:X,getAriaValueText:Z,valueLabelFormat:Z,onChange:r,valueLabelDisplay:"auto","aria-labelledby":"money-slider"})})]})]})}function he(o){const t=Ce(o);return`${t.amount} ${t.unit}`}function Ce(o){const t=["s","m","h","d"],n=[1,60,3600,86400],c=n.findIndex(r=>r>=o),i=Math.max(c<0?3:c-1,0);return{amount:Math.round(o/n[i]),unit:t[i]}}function xe(o){let n=o;return o<108e3?n=o/120:o<2*108e3?n=o/240:o>3*108e3&&(n=o),n}function mt({label:o,icon:t,onChange:n,slots:c}){const[i,s]=M.useState(10),r=(u,m)=>{typeof m=="number"&&(s(m),n(Ce(xe(m)))),u.stopPropagation(),u.preventDefault()};return e.jsxs(y,{sx:{width:"min-content"},onPointerMove:u=>{u.stopPropagation(),u.preventDefault()},children:[e.jsxs(y,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1},children:[e.jsxs(e.Fragment,{children:[e.jsx(k,{id:"quotient-number",size:"small",type:"number",sx:{minWidth:80},InputLabelProps:{shrink:!0},value:100}),e.jsxs(V,{id:"quotient-unit-selector",size:"small",sx:{width:"min-content"},children:[e.jsx(E,{value:"week",children:"Sem."}),e.jsx(E,{value:"day",children:"Dia"}),e.jsx(E,{value:"h",children:"Hr"}),e.jsx(E,{value:"m",children:"min"}),e.jsx(E,{value:"s",children:"sec"})]})]}),e.jsx("span",{children:"/"}),c?.coumpoundSelector]}),e.jsxs(L,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(L,{item:!0,children:t}),e.jsx(L,{item:!0,xs:!0,children:e.jsx(be,{value:i,min:0,step:10,max:432e3,marks:[],scale:xe,getAriaValueText:he,valueLabelFormat:he,onChange:r,valueLabelDisplay:"auto","aria-labelledby":"time-slider"})})]})]})}function pt({scale:o,...t}){return o==="money"?e.jsx(lt,{...t}):e.jsx(mt,{...t})}function Y({onChange:o,value:t,children:n,selectorProps:c={sx:{}},textFieldProps:i={sx:{}},...s}){return e.jsxs(y,{role:"unit-selector",...s,sx:{display:"flex",gap:.2},children:[e.jsx(D,{children:e.jsx(k,{id:"amount",size:"small",type:"number",autoComplete:"off",sx:{...c.sx,width:"100px",minWidth:80},value:t.amount,onChange:r=>o({unit:t.unit,amount:r.target.valueAsNumber})})}),e.jsx(D,{children:e.jsx(V,{id:"unit-selector",inputProps:{id:"unit"},size:"small",sx:{...i.sx,width:"max(min-content, 100px)",minWidth:100},onChange:r=>o({amount:t.amount,unit:r.target.value}),value:t.unit,children:n})})]})}function ht({label:o,value:t,onChange:n,filterQuotients:c=()=>!0,filterDividends:i=()=>!0}){const s=p("Graph"),{useGraph:r}=s.hooks,u=r(O,a=>Object.values(a?.nodes??{}).filter(I=>I.type==="UNIT").map(I=>({...I,scale:Object.values(a?.nodes??{}).filter(l=>l.type==="SCALE").find(l=>a?.adjacencyList[I.id].outputs.includes(`${I.id} -> ${l.id}`))}))),m=h.useMemo(()=>u?.state?.filter(a=>c(a,a.scale))??[],[u.state,c]),d=h.useMemo(()=>u?.state?.filter(a=>i(a,a.scale))??[],[u.state,c]);return e.jsxs(y,{role:"compound-selector",width:"min-content",sx:{display:"flex",gap:1,alignItems:"baseline"},children:[o&&e.jsx(q,{gutterBottom:!0,sx:{minWidth:"50px"},children:o}),e.jsxs(y,{sx:{display:"flex",gap:1,alignItems:"baseline"},children:[e.jsx(Y,{id:"quotient-selector",value:t.quotient,onChange:a=>n({...t,quotient:a}),selectorProps:{sx:{width:"10px"}},children:m.map(({id:a,name:I,abbreviation:l})=>e.jsx(E,{value:a,children:l},a))},"quotient"),e.jsx("span",{children:"/"}),e.jsx(Y,{id:"dividend-selector",value:t.dividend,onChange:a=>n({...t,dividend:a}),sx:{width:"max-content"},children:d.map(({id:a,name:I,abbreviation:l})=>e.jsx(E,{value:a,children:l},a))},"dividend")]})]})}const xt=()=>({time:Object.entries(De).map(([o,t])=>({value:o,label:t}))}),gt=({icon:o,value:t})=>{const n=R([t.quotient.unit,t.dividend.unit]);return n?e.jsxs(y,{sx:{display:"flex",gap:.3,alignItems:"center"},children:[o&&e.jsx("div",{role:"coumpound-value-icon",children:o}),e.jsxs("div",{role:"coumpound-value-value",children:[t.quotient.amount," ",n[t.quotient.unit].abbreviation," / ",t.dividend.amount," ",n[t.dividend.unit].abbreviation]})]}):e.jsx(e.Fragment,{})},It={name:U,version:we,depends_on:["Graph"],components:{CoverterGraphViewport:je,ScaleSlider:pt,CompoundSelector:ht,UnitAmountSelector:Y,CompoundUnit:gt},store:{actions:{},middlewares:[],reducers:{}},hooks:{useScales:xt,useUnits:R},constants:{},kernelCalls:{startModule:ct,restartModule:()=>{},shutdownModule:()=>{}}};export{It as m};
