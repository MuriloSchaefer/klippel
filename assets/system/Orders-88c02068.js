import{d as O,c as x,e as L,_ as P,r as h,o as e,B as S,aF as T,Z as v,bj as D,bk as V,bl as $,bm as F,P as I,bn as R,bo as _,b2 as A}from"../vendor-14971a7b.js";import{A as C,n as i}from"../kernel-47e54a14.js";const u="Orders",G="0.0.1",z={budgets:{},orders:{}},U=O({name:u,initialState:z,reducers:{},extraReducers:t=>{}}),k=x(`[${u}:Compositions:${C.COMMAND}] Create budget`),q=x(`[${u}:Compositions:${C.COMMAND}] Delete budget`),Y=x(`[${u}:Compositions:${C.EVENT}] Budget created`),Z=x(`[${u}:Compositions:${C.EVENT}] Budget deleted`),w=L();w.startListening({actionCreator:k,effect:async({payload:t},o)=>{const{dispatch:n}=o;n(Y({id:t.id}))}});w.startListening({actionCreator:q,effect:async({payload:t},o)=>{const{dispatch:n,getState:r}=o,{Orders:{budgets:a}}=r(),d=a[t.id];n(Z(d))}});function H({managers:{storeManager:t,componentRegistryManager:o,layoutManager:n,ribbonMenuManager:r,viewportManager:a}}){t.functions.loadReducer(u,U.reducer),t.functions.registerMiddleware(w)}function J(){const t=i("Store"),o=i("Layout"),{useAppDispatch:n,useAppSelector:r}=t.hooks,{useViewportManager:a}=o.hooks,{selectActiveViewport:d}=o.store.selectors,p=n(),m=a(),b=r(d);return{createBudget(g,l){if(!b)throw Error("No active viewport");const s=P.uniqueId("budget-");m.functions.createGroup(s,l),m.functions.addToGroup(b,s),p(k({id:s,label:g,viewportGroup:s}))}}}const f={"create-budget":"Criar orçamento","add-to-budget":"Adicionar ao orçamento","transform-to-order":"Transformar em pedido","delete-budget":"Deletar orçamento"};function K(){const t=i("Pointer"),{PointerContainer:o,ConfirmAndCloseButton:n}=t.components,[r,a]=h.useState({label:"",color:""});return e.jsx(o,{actions:[e.jsx(n,{type:"submit",value:"Submit",color:"success",handleConfirm:()=>console.log("create budget")},"accept")],component:e.jsx(S,{children:e.jsx(T,{id:"part-name",label:"Nome",variant:"standard",value:r.label,onChange:d=>a(p=>({...p,label:d.target.value}))})}),children:e.jsx(v,{children:f["create-budget"]})})}function Q(){const t=i("Pointer"),{PointerContainer:o,ConfirmAndCloseButton:n}=t.components;return e.jsx(o,{actions:[e.jsx(n,{type:"submit",value:"Submit",color:"success",handleConfirm:()=>console.log("add to budget")},"accept")],component:e.jsx(e.Fragment,{children:"test"}),children:e.jsx(v,{children:f["add-to-budget"]})})}function W(){const t=i("Store"),o=i("Layout"),n=i("Composer"),{useAppSelector:r}=t.hooks,{useComposition:a}=n.hooks,{selectActiveViewport:d}=o.store.selectors,p=r(d),m=a({viewportName:p},c=>c),[b,g]=h.useState(!1),l=h.useRef(null),[s,y]=h.useState("create-budget"),B=(c,M)=>{y(M),g(!1)},E=()=>{g(c=>!c)},N=c=>{l.current&&l.current.contains(c.target)||g(!1)};return m.state?e.jsxs(S,{sx:{position:"absolute",bottom:10,right:10},children:[e.jsxs(D,{variant:"contained",ref:l,"aria-label":"budget button",children:[s==="create-budget"&&e.jsx(K,{}),s==="add-to-budget"&&e.jsx(Q,{}),e.jsx(v,{size:"small","aria-haspopup":"menu",onClick:E,children:e.jsx(V,{})})]}),e.jsx($,{sx:{zIndex:1},open:b,anchorEl:l.current,role:"budget-floating-buttons",transition:!0,disablePortal:!0,children:({TransitionProps:c,placement:M})=>e.jsx(F,{...c,style:{transformOrigin:M==="bottom"?"center top":"center bottom"},children:e.jsx(I,{children:e.jsx(R,{onClickAway:N,children:e.jsxs(_,{id:"split-button-menu",autoFocusItem:!0,children:[e.jsx(A,{selected:s==="create-budget",onClick:j=>B(j,"create-budget"),children:f["create-budget"]},"create-budget"),e.jsx(A,{selected:s==="add-to-budget",onClick:j=>B(j,"add-to-budget"),children:f["add-to-budget"]},"add-to-budget")]})})})})})]}):e.jsx(e.Fragment,{})}const te={name:u,version:G,depends_on:["Composer"],components:{BudgetFloatingButton:W},hooks:{useBudgetManager:J},kernelCalls:{startModule:H,restartModule(){},shutdownModule(){}}};export{te as m};
