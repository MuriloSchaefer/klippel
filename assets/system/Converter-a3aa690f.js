import{c as R,d as ve,b as be,_ as se,o as e,B as b,aZ as w,a_ as Ie,a$ as q,b0 as T,r as x,aD as L,aT as X,aX as fe,aS as W,aO as je,R as G,n as Ne,ba as Ce,P as Te,I as Z,bb as Se,bc as Oe,bd as Ee,be as ne,T as _,Z as Le,$ as $e,bf as ce,bg as Ue,e as ke,bh as k,bi as me}from"../vendor-45e5b32e.js";import{A as P,n as h,o as Ge,l as Me}from"../kernel-28f3b0f3.js";const $="Converter",Ae="0.0.1",S="conversion-graph",we={week:"Semana",day:"Dia",h:"H",m:"m",s:"s",ms:"ms"},_e={selectedNode:void 0},pe=R(`[${$}:${P.COMMAND}] Load conversion graph`),Y=R(`[${$}:${P.COMMAND}] Select node`),De=R(`[${$}:${P.EVENT}] Conversion graph loaded`),Re=R(`[${$}:${P.COMMAND}] Node selected`),qe=ve({name:$,initialState:_e,reducers:{},extraReducers:o=>{o.addCase(Y,(t,{payload:s})=>({...t,selectedNode:s}))}}),ae=o=>o.Converter,E=o=>{const t=h("Store"),s=h("Graph"),u=h("Layout"),{useGraph:a}=s.hooks,n=a(S,m=>m),d=u.hooks.usePanelsManager(),{useAppDispatch:i,useAppSelector:l}=t.hooks,c=i(),r=be(ae,o),j=l(r);return l(ae),{state:j,selectNode:m=>{c(Y(m)),d.functions.openDetails()},addUnit:(m,C,N)=>{const v=se.uniqueId(m.toLowerCase().replace(" ",""));n.actions.addNode({type:"UNIT",id:v,name:m,position:{x:0,y:0},abbreviation:C}),console.log(N),N&&(console.log("add scale"),n.actions.addEdge({id:`${v} -> ${N}`,type:"BELONGS_TO",sourceId:v,targetId:N}))},updateUnit:(m,C,N,v)=>{n.actions.updateNode({id:m,name:C,abbreviation:N});const g=n.state?.adjacencyList[m].outputs.filter(U=>n.state?.edges[U].type==="BELONGS_TO").map(U=>n.state?.edges[U]).pop();v?(g&&g.targetId!==v&&n.actions.removeEdge(g.id),n.actions.addEdge({id:`${m} -> ${v}`,type:"BELONGS_TO",sourceId:m,targetId:v})):g&&n.actions.removeEdge(g.id)},addCompoundUnit:(m,C)=>{const N=n.state?.nodes[m],v=n.state?.nodes[C],g=`${N.abbreviation} / ${v.abbreviation}`;if(n.state?.nodes[g]){console.error("unit already exists! skipping it.");return}const M={id:g,type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:m,dividendUnitId:C,abbreviation:g,name:`${N.name} per ${v.name}`},V={id:`${g}->${m}`,type:"QUOTIENT",sourceId:g,targetId:m},p={id:`${g}->${C}`,type:"DIVIDEND",sourceId:g,targetId:C};n.actions.addNode(M),n.actions.addEdge(V),n.actions.addEdge(p)},updateCompoundUnit:(m,C,N)=>{},addScale:m=>{n.actions.addNode({type:"SCALE",id:se.uniqueId(m.toLowerCase().replace(" ","")),name:m,position:{x:0,y:0}})}}};function he({onChange:o,value:t,...s}){const u=h("Graph"),{hooks:{useGraph:a}}=u,n=a(S,d=>d&&Object.values(d.nodes).filter(i=>i.type==="SCALE"));return n.state?e.jsx(b,{role:"scale-selector",...s,sx:{display:"flex",gap:.2},children:e.jsxs(w,{sx:{m:1,minWidth:120,width:"min-content"},children:[e.jsx(Ie,{id:"label",children:"Escala"}),e.jsxs(q,{id:"scale-selector",inputProps:{id:"scale"},label:"Escala",labelId:"label",size:"small",onChange:d=>o(d.target.value),value:t??"",children:[n.state.map(d=>e.jsx(T,{value:d.id,children:d.name})),e.jsx(T,{value:"",children:"Nenhuma"})]})]})}):e.jsx(e.Fragment,{})}const ie={name:void 0,abbreviation:void 0,scale:void 0},Pe=()=>{const o=h("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:s}=o.components,u=E(i=>i),[a,n]=x.useState(ie),d=x.useCallback(()=>{!a.name||!a.abbreviation||(u.addUnit(a.name,a.abbreviation,a.scale),n(ie))},[a,u]);return e.jsx(t,{component:e.jsxs(b,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(L,{id:"unit-name",label:"Nome",variant:"standard",value:a.name,onChange:i=>n(l=>({...l,name:i.target.value}))}),e.jsx(L,{id:"abbreviation",label:"Abbreviation",variant:"standard",value:a.abbreviation,onChange:i=>n(l=>({...l,abbreviation:i.target.value})),sx:{alignItems:"center"}}),e.jsx(he,{value:a.scale??"",onChange:i=>n(l=>({...l,scale:i}))})]}),actions:[e.jsx(s,{handleConfirm:d},"confirm")],children:e.jsx(X,{primary:"Unidade",secondary:"Adiciona um tipo de unidade simples",sx:{cursor:"pointer",flexGrow:1}})})},re={name:void 0},Be=()=>{const o=h("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:s}=o.components,u=E(i=>i),[a,n]=x.useState(re),d=x.useCallback(()=>{a.name&&(u.addScale(a.name),n(re))},[a,u]);return e.jsx(t,{component:e.jsx(b,{sx:{display:"flex",flexDirection:"column",gap:1},children:e.jsx(L,{id:"part-name",label:"Nome",variant:"standard",value:a.name,onChange:i=>n(l=>({...l,name:i.target.value}))})}),actions:[e.jsx(s,{handleConfirm:d},"confirm")],children:e.jsx(X,{primary:"Escala",secondary:"Adiciona um tipo de escala",sx:{cursor:"pointer",flexGrow:1}})})},D=({value:o,onChange:t,filterUnits:s=()=>!0,...u})=>{const a=h("Graph"),{useGraph:n}=a.hooks,d=n(S,l=>Object.values(l?.nodes??{}).filter(c=>c.type==="UNIT").map(c=>({...c,scale:Object.values(l?.nodes??{}).filter(r=>r.type==="SCALE").find(r=>l?.adjacencyList[c.id].outputs.includes(`${c.id} -> ${r.id}`))}))),i=x.useMemo(()=>d?.state?.filter(l=>s(l,l.scale))??[],[d.state,s]);return e.jsx(w,{children:e.jsx(q,{id:"unit-selector",inputProps:{id:"unit"},size:"small",sx:{width:"max(min-content, 100px)",minWidth:100},onChange:t,value:o,...u,children:i.map(({id:l,name:c,abbreviation:r})=>e.jsx(T,{value:l,children:r},l))})})},de={quotientUnit:"",dividendUnit:""},Ve=()=>{const o=h("Pointer"),{PointerContainer:t,ConfirmAndCloseButton:s}=o.components,u=E(i=>i),[a,n]=x.useState(de),d=x.useCallback(()=>{u.addCompoundUnit(a.quotientUnit,a.dividendUnit),n(de)},[a,u]);return e.jsx(t,{component:e.jsxs(b,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",gap:1},children:[e.jsx(D,{value:a.quotientUnit,onChange:(i,l)=>n(c=>({...c,quotientUnit:i.target.value}))}),e.jsx("span",{children:"/"}),e.jsx(D,{value:a.dividendUnit,onChange:(i,l)=>n(c=>({...c,dividendUnit:i.target.value}))})]}),actions:[e.jsx(s,{handleConfirm:d},"confirm")],children:e.jsx(X,{primary:"Unidade Composta",secondary:"Adiciona um tipo de unidade composta",sx:{cursor:"pointer",flexGrow:1}})})},Fe=()=>e.jsxs(fe,{role:"list-options",sx:{paddingRight:5,overflow:"auto"},children:[e.jsx(W,{disableGutters:!0,children:e.jsx(Pe,{})},"unit"),e.jsx(W,{disableGutters:!0,children:e.jsx(Ve,{})},"compositeUnit"),e.jsx(W,{disableGutters:!0,children:e.jsx(Be,{})},"scale")]}),ze=()=>{const o=h("Layout"),{SettingsPanel:t,Accordion:s}=o.components;return e.jsxs(t,{children:[e.jsx(s,{name:"Nodos",icon:e.jsx(je,{}),summary:"Tipos de nodos disponíveis",children:e.jsx(Fe,{})}),e.jsx(e.Fragment,{})]})},We=({graphId:o})=>{const{hooks:{useResizeObserver:t}}=h("Layout"),{hooks:{useGraph:s}}=h("Graph"),{hooks:{useD3Container:u},d3Components:{Grid:a,DependencyCircle:n}}=h("SVG"),d=E(p=>p),i=x.useRef(null),l=x.useRef(null),c=t(l),r=s(o,p=>p),j=x.useMemo(()=>{if(!r.state?.nodes)return{nodes:[],links:[]};const p=y=>{if(!r.state)return{id:"other",name:"Outros"};const O=Object.values(r.state.edges).find(f=>f.sourceId===y.id&&f.type==="BELONGS_TO");if(O){const f=r.state.nodes[O.targetId];return{id:f.id,name:f.name}}return{id:"other",name:"Outros"}};return{nodes:Object.values(r.state.nodes).map(y=>({...y,nodeLabel:"abbreviation"in y?y.abbreviation:y.name,group:p(y),radius:5,strength:10,x:y.position.x,y:y.position.y})),links:Object.values(r.state.edges).map(y=>({...y,source:y.sourceId,target:y.targetId}))}},[r]),m=Ne(),[C,N]=x.useState(!0),[v,g]=[c?.width??700,c?.height??700],U=x.useCallback(p=>{d.selectNode(p)},[]),M=x.useCallback(p=>{d.selectNode(p)},[]),V=u().width(v).height(g).underlays([a({xSettings:{range:[-1,v+1],domain:[-1,v+1]},ySettings:{range:[-1,g+1],domain:[-1,g+1]},dimensions:[v,g]}).transformZoom((p,y)=>{C&&(y.translateBy(p,v/2,g/2),N(!1))}).build]).content([n().innerRadius(Math.min(v,g)/2-20).filterNode(p=>p.type==="UNIT"||p.type==="COMPOUND_UNIT").filterLink(p=>p.type==="CONVERTS_TO").renderGroup((p,y,O,f,A,ee)=>{p.selectAll("path").data([y]).join("path").attr("id",I=>I.id).on("click",I=>I.target.id!=="other"&&M(I.target.id)).attr("class","group-arc").attr("fill",I=>f(y.id)).attr("d",(I,te)=>A(O)),p.selectAll("text").data([y]).join("text").attr("class","group-text").text(I=>I.name).attr("id",I=>I.id).on("click",I=>I.target.id!=="other"&&M(I.target.id)).attr("fill",I=>f(I.id)).attr("text-anchor",(I,te)=>(O.endAngle+O.startAngle)/2>Math.PI?"end":"start").attr("transform",(I,te)=>{const[F,z]=A.centroid(O),oe=Math.sqrt(F*F+z*z);return`translate(${F/oe*ee*1.3}, ${z/oe*ee*1.3})`})}).renderNode((p,y,O)=>{p.append("text").text(f=>f.nodeLabel).attr("fill",f=>d.state?.selectedNode===f.id?m.palette.getContrastText(m.palette.background.default):O(f.group.id)).attr("text-anchor","middle").on("pointerdown",(f,A)=>{U(A.id),f.stopPropagation()})}).theme(m.palette.mode).build]);return x.useLayoutEffect(()=>{!c||!i.current||V.render(j,i.current)},[j,c]),r.state?e.jsx("div",{ref:l,role:"conversion-graph-viewer",style:{height:"100%",width:"100%"},children:e.jsx("svg",{ref:i,id:`${r.id}`,width:"100%",height:"100%"})}):e.jsx(e.Fragment,{})},Qe=G.memo(We),He=()=>{const o=h("Layout"),{Accordion:t}=o.components,s=h("Graph"),{useGraph:u}=s.hooks,a=E(c=>c.selectedNode),n=u(S,c=>a.state&&c?.nodes?{...c.nodes[a.state],scale:c.adjacencyList[a.state].outputs.filter(r=>c.edges[r].type==="BELONGS_TO").map(r=>c.edges[r].targetId).pop()}:void 0),[d,i]=x.useState(n.state);x.useEffect(()=>i(n.state),[a.state]);const l=x.useCallback(()=>{a.updateUnit(a.state,d?.name,d?.abbreviation,d?.scale)},[n]);return!a?.state||!n?.state?e.jsx(e.Fragment,{}):e.jsx(t,{name:"Propriedades",icon:e.jsx(Ce,{}),summary:"Propriedades da unidade",children:e.jsxs(Te,{variant:"outlined",square:!0,sx:{width:"100%",padding:1,"&:div + div":{borderTop:0},display:"flex",justifyContent:"space-between"},role:"unit-properties",children:[e.jsx(L,{id:"unit-name",label:"Nome",variant:"standard",value:d?.name??"",onChange:c=>i(r=>r&&{...r,name:c.target.value})}),e.jsx(L,{id:"abbreviation",label:"Abreviatura",variant:"standard",value:d?.abbreviation??"",onChange:c=>i(r=>r&&{...r,abbreviation:c.target.value}),sx:{alignItems:"center"}}),e.jsx(he,{value:d?.scale??"",onChange:c=>i(r=>r&&{...r,scale:c})}),e.jsxs(b,{sx:{display:"flex",flexDirection:"column",padding:0,gap:1,justifyContent:"space-between",alignContent:"space-evenly"},role:"actions",children:[e.jsx(Z,{color:"success",id:"save-unit-properties",onClick:c=>l(),children:e.jsx(Se,{})},"save"),e.jsx(Z,{color:"info",id:"reset-unit-properties",onClick:c=>i(n.state),children:e.jsx(Oe,{})},"reset")]})]})})},B=o=>{const t=h("Graph"),{useGraph:s}=t.hooks;return s(S,a=>a&&Object.values(a.nodes).filter(n=>o.includes(n.id)).reduce((n,d)=>({...n,[d.id]:d}),{})).state},Ze=({from:o,to:t})=>{const s=h("Pointer"),{PointerContainer:u,ConfirmAndCloseButton:a}=s.components,[n,d]=x.useState({type:"factor",from:o,to:t}),i=x.useCallback(()=>{console.log("test")},[]);return e.jsx(u,{component:e.jsxs(b,{sx:{display:"flex",flexDirection:"column",gap:1},role:"conversion-form",children:[e.jsx(b,{role:"conversion-type",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:e.jsxs(Ee,{color:"primary",value:n.type,exclusive:!0,onChange:(l,c)=>d(r=>({...r,type:c})),"aria-label":"Platform",children:[e.jsx(ne,{value:"",children:"Fator"}),e.jsx(ne,{value:"expresssion",children:"Expressão"})]})}),e.jsxs(b,{role:"from-conversion",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(_,{sx:{minWidth:30},children:"De:"}),e.jsx(D,{})]}),e.jsxs(b,{role:"to-conversion",sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[e.jsx(_,{sx:{minWidth:30},children:"Para:"}),e.jsx(D,{value:n.to,disabled:!!t})]})]}),actions:[e.jsx(a,{handleConfirm:i},"confirm")],children:e.jsx(Le,{startIcon:e.jsx($e,{}),variant:"outlined",size:"small",sx:{marginBottom:1},children:"Adicionar Conversão"})})},Ke=()=>{const o=h("Layout"),t=E(n=>n.selectedNode),s=B([t.state]);if(!s||!t.state)throw Error("units should be available");const u=s[t.state],{Accordion:a}=o.components;return e.jsx(a,{name:"Converte de",icon:e.jsx(ce,{}),summary:`Quais unidades podem ser convertidas em ${u.name}`,children:e.jsx(Ze,{to:u.id})})},Xe=()=>{const o=h("Layout"),t=E(n=>n.selectedNode),s=B([t.state]);if(!s||!t.state)throw Error("units should be available");const u=s[t.state],{Accordion:a}=o.components;return e.jsx(a,{name:"Converte para",icon:e.jsx(ce,{sx:{transform:"rotate(180)"}}),summary:`${u.name} pode ser convertida em`,children:e.jsx(e.Fragment,{})})},Ye=()=>e.jsxs(e.Fragment,{children:[e.jsx(He,{}),e.jsx(Ke,{}),e.jsx(Xe,{})]}),Je=()=>e.jsx(e.Fragment,{children:"Escala selectionada"}),et=()=>{const o=h("Layout"),t=h("Graph"),{DetailsPanel:s}=o.components,{useGraph:u}=t.hooks,a=E(d=>d.selectedNode),n=u(S,d=>a.state?d?.nodes[a.state]:void 0);return n.state?e.jsx(s,{children:e.jsxs(e.Fragment,{children:[n?.state?.type==="UNIT"&&e.jsx(Ye,{}),n?.state?.type==="SCALE"&&e.jsx(Je,{})]})}):e.jsx(e.Fragment,{})},tt=({name:o})=>{const t=h("Layout"),{ViewportNotificationsTray:s}=t.components;return e.jsxs(b,{role:"converter-graph-viewport",sx:{padding:1,height:"100%",position:"relative",overflow:"hidden"},children:[e.jsx(Qe,{graphId:S}),e.jsx(s,{children:e.jsx(e.Fragment,{})}),e.jsx(ze,{}),e.jsx(et,{})]})},xe=G.memo(tt),ot=()=>{const o=h("Layout"),{useViewportManager:t}=o.hooks,s=t();return e.jsx(e.Fragment,{children:e.jsx(Z,{onClick:()=>s.functions.addViewport("Grafo de conversão","ConverterGraphViewport",void 0,"conversion-graph"),children:e.jsx(Ue,{})})})},st={id:"conversion-graph",nodes:{metros5:{type:"UNIT",id:"metros5",name:"metros",position:{x:0,y:0},abbreviation:"m"},comprimento6:{type:"SCALE",id:"comprimento6",name:"Comprimento",position:{x:0,y:0}},centimetros7:{type:"UNIT",id:"centimetros7",name:"centimetros",position:{x:0,y:0},abbreviation:"cm"},kilometros8:{type:"UNIT",id:"kilometros8",name:"kilometros",position:{x:0,y:0},abbreviation:"km"},milimetros9:{type:"UNIT",id:"milimetros9",name:"milimetros",position:{x:0,y:0},abbreviation:"mm"},monetaria10:{type:"SCALE",id:"monetaria10",name:"Monetaria",position:{x:0,y:0}},reais11:{type:"UNIT",id:"reais11",name:"reais",position:{x:0,y:0},abbreviation:"R$"},dolares12:{type:"UNIT",id:"dolares12",name:"dolares",position:{x:0,y:0},abbreviation:"$"},volume13:{type:"SCALE",id:"volume13",name:"Volume",position:{x:0,y:0}},litroscubicos14:{type:"UNIT",id:"litroscubicos14",name:"litros cubicos",position:{x:0,y:0},abbreviation:"l³"},metroscubicos15:{type:"UNIT",id:"metroscubicos15",name:"metros cubicos",position:{x:0,y:0},abbreviation:"m³"},area16:{type:"SCALE",id:"area16",name:"Area",position:{x:0,y:0}},metrosquadrados17:{type:"UNIT",id:"metrosquadrados17",name:"metros quadrados",position:{x:0,y:0},abbreviation:"m²"},unitario18:{type:"UNIT",id:"unitario18",name:"unitario",position:{x:0,y:0},abbreviation:"un"},capacidade5:{type:"SCALE",id:"capacidade5",name:"Capacidade",position:{x:0,y:0}},mililitros6:{type:"UNIT",id:"mililitros6",name:"mililitros",position:{x:0,y:0},abbreviation:"ml"},litros7:{type:"UNIT",id:"litros7",name:"litros",position:{x:0,y:0},abbreviation:"l"},kilometrosquadrados8:{type:"UNIT",id:"kilometrosquadrados8",name:"kilometros quadrados",position:{x:0,y:0},abbreviation:"km²"},centimetrosquadrados9:{type:"UNIT",id:"centimetrosquadrados9",name:"centimetros quadrados",position:{x:0,y:0},abbreviation:"cm²"},temporal247:{type:"SCALE",id:"temporal247",name:"Temporal",position:{x:0,y:0}},segundos248:{type:"UNIT",id:"segundos248",name:"segundos",position:{x:0,y:0},abbreviation:"seg"},minutos249:{type:"UNIT",id:"minutos249",name:"minutos",position:{x:0,y:0},abbreviation:"min"},hora250:{type:"UNIT",id:"hora250",name:"hora",position:{x:0,y:0},abbreviation:"h"},dia251:{type:"UNIT",id:"dia251",name:"dia",position:{x:0,y:0},abbreviation:"d"},mes252:{type:"UNIT",id:"mes252",name:"mes",position:{x:0,y:0},abbreviation:"mes"},semana253:{type:"UNIT",id:"semana253",name:"semana",position:{x:0,y:0},abbreviation:"sem"},peso5:{type:"SCALE",id:"peso5",name:"Peso",position:{x:0,y:0}},kilogramas6:{type:"UNIT",id:"kilogramas6",name:"Kilogramas",position:{x:0,y:0},abbreviation:"Kg"},gramas7:{type:"UNIT",id:"gramas7",name:"gramas",position:{x:0,y:0},abbreviation:"g"},miligramas8:{type:"UNIT",id:"miligramas8",name:"miligramas",position:{x:0,y:0},abbreviation:"mg"},"un / min":{id:"un / min",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"unitario18",dividendUnitId:"minutos249",abbreviation:"un / min",name:"unitario per minutos"},"R$ / h":{id:"R$ / h",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"reais11",dividendUnitId:"hora250",abbreviation:"R$ / h",name:"reais per hora"},"R$ / un":{id:"R$ / un",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"reais11",dividendUnitId:"unitario18",abbreviation:"R$ / un",name:"reais per unitario"},"un / h":{id:"un / h",type:"COMPOUND_UNIT",position:{x:0,y:0},quotientUnitId:"unitario18",dividendUnitId:"hora250",abbreviation:"un / h",name:"unitario per hora"}},edges:{"metros5 -> comprimento6":{id:"metros5 -> comprimento6",type:"BELONGS_TO",sourceId:"metros5",targetId:"comprimento6"},"centimetros7 -> comprimento6":{id:"centimetros7 -> comprimento6",type:"BELONGS_TO",sourceId:"centimetros7",targetId:"comprimento6"},"kilometros8 -> comprimento6":{id:"kilometros8 -> comprimento6",type:"BELONGS_TO",sourceId:"kilometros8",targetId:"comprimento6"},"milimetros9 -> comprimento6":{id:"milimetros9 -> comprimento6",type:"BELONGS_TO",sourceId:"milimetros9",targetId:"comprimento6"},"reais11 -> monetaria10":{id:"reais11 -> monetaria10",type:"BELONGS_TO",sourceId:"reais11",targetId:"monetaria10"},"dolares12 -> monetaria10":{id:"dolares12 -> monetaria10",type:"BELONGS_TO",sourceId:"dolares12",targetId:"monetaria10"},"litroscubicos14 -> volume13":{id:"litroscubicos14 -> volume13",type:"BELONGS_TO",sourceId:"litroscubicos14",targetId:"volume13"},"metroscubicos15 -> volume13":{id:"metroscubicos15 -> volume13",type:"BELONGS_TO",sourceId:"metroscubicos15",targetId:"volume13"},"metrosquadrados17 -> area16":{id:"metrosquadrados17 -> area16",type:"BELONGS_TO",sourceId:"metrosquadrados17",targetId:"area16"},"mililitros6 -> volume13":{id:"mililitros6 -> volume13",type:"BELONGS_TO",sourceId:"mililitros6",targetId:"volume13"},"litros7 -> volume13":{id:"litros7 -> volume13",type:"BELONGS_TO",sourceId:"litros7",targetId:"volume13"},"kilometrosquadrados8 -> area16":{id:"kilometrosquadrados8 -> area16",type:"BELONGS_TO",sourceId:"kilometrosquadrados8",targetId:"area16"},"centimetrosquadrados9 -> area16":{id:"centimetrosquadrados9 -> area16",type:"BELONGS_TO",sourceId:"centimetrosquadrados9",targetId:"area16"},"segundos248 -> temporal247":{id:"segundos248 -> temporal247",type:"BELONGS_TO",sourceId:"segundos248",targetId:"temporal247"},"minutos249 -> temporal247":{id:"minutos249 -> temporal247",type:"BELONGS_TO",sourceId:"minutos249",targetId:"temporal247"},"hora250 -> temporal247":{id:"hora250 -> temporal247",type:"BELONGS_TO",sourceId:"hora250",targetId:"temporal247"},"dia251 -> temporal247":{id:"dia251 -> temporal247",type:"BELONGS_TO",sourceId:"dia251",targetId:"temporal247"},"mes252 -> temporal247":{id:"mes252 -> temporal247",type:"BELONGS_TO",sourceId:"mes252",targetId:"temporal247"},"semana253 -> temporal247":{id:"semana253 -> temporal247",type:"BELONGS_TO",sourceId:"semana253",targetId:"temporal247"},"kilogramas6 -> peso5":{id:"kilogramas6 -> peso5",type:"BELONGS_TO",sourceId:"kilogramas6",targetId:"peso5"},"gramas7 -> peso5":{id:"gramas7 -> peso5",type:"BELONGS_TO",sourceId:"gramas7",targetId:"peso5"},"miligramas8 -> peso5":{id:"miligramas8 -> peso5",type:"BELONGS_TO",sourceId:"miligramas8",targetId:"peso5"},"un / min->unitario18":{id:"un / min->unitario18",type:"QUOTIENT",sourceId:"un / min",targetId:"unitario18"},"un / min->minutos249":{id:"un / min->minutos249",type:"DIVIDEND",sourceId:"un / min",targetId:"minutos249"},"R$ / h->reais11":{id:"R$ / h->reais11",type:"QUOTIENT",sourceId:"R$ / h",targetId:"reais11"},"R$ / h->hora250":{id:"R$ / h->hora250",type:"DIVIDEND",sourceId:"R$ / h",targetId:"hora250"},"R$ / un->reais11":{id:"R$ / un->reais11",type:"QUOTIENT",sourceId:"R$ / un",targetId:"reais11"},"R$ / un->unitario18":{id:"R$ / un->unitario18",type:"DIVIDEND",sourceId:"R$ / un",targetId:"unitario18"},"un / h->unitario18":{id:"un / h->unitario18",type:"QUOTIENT",sourceId:"un / h",targetId:"unitario18"},"un / h->hora250":{id:"un / h->hora250",type:"DIVIDEND",sourceId:"un / h",targetId:"hora250"}},adjacencyList:{metros5:{inputs:[],outputs:["metros5 -> comprimento6"]},comprimento6:{inputs:["metros5 -> comprimento6","centimetros7 -> comprimento6","kilometros8 -> comprimento6","milimetros9 -> comprimento6"],outputs:[]},centimetros7:{inputs:[],outputs:["centimetros7 -> comprimento6"]},kilometros8:{inputs:[],outputs:["kilometros8 -> comprimento6"]},milimetros9:{inputs:[],outputs:["milimetros9 -> comprimento6"]},monetaria10:{inputs:["reais11 -> monetaria10","dolares12 -> monetaria10"],outputs:[]},reais11:{inputs:["R$ / h->reais11","R$ / un->reais11"],outputs:["reais11 -> monetaria10"]},dolares12:{inputs:[],outputs:["dolares12 -> monetaria10"]},volume13:{inputs:["litroscubicos14 -> volume13","metroscubicos15 -> volume13","mililitros6 -> volume13","litros7 -> volume13"],outputs:[]},litroscubicos14:{inputs:[],outputs:["litroscubicos14 -> volume13"]},metroscubicos15:{inputs:[],outputs:["metroscubicos15 -> volume13"]},area16:{inputs:["metrosquadrados17 -> area16","kilometrosquadrados8 -> area16","centimetrosquadrados9 -> area16"],outputs:[]},metrosquadrados17:{inputs:[],outputs:["metrosquadrados17 -> area16"]},unitario18:{inputs:["un / min->unitario18","R$ / un->unitario18","un / h->unitario18"],outputs:[]},capacidade5:{inputs:[],outputs:[]},mililitros6:{inputs:[],outputs:["mililitros6 -> volume13"]},litros7:{inputs:[],outputs:["litros7 -> volume13"]},kilometrosquadrados8:{inputs:[],outputs:["kilometrosquadrados8 -> area16"]},centimetrosquadrados9:{inputs:[],outputs:["centimetrosquadrados9 -> area16"]},temporal247:{inputs:["segundos248 -> temporal247","minutos249 -> temporal247","hora250 -> temporal247","dia251 -> temporal247","mes252 -> temporal247","semana253 -> temporal247"],outputs:[]},segundos248:{inputs:[],outputs:["segundos248 -> temporal247"]},minutos249:{inputs:["un / min->minutos249"],outputs:["minutos249 -> temporal247"]},hora250:{inputs:["R$ / h->hora250","un / h->hora250"],outputs:["hora250 -> temporal247"]},dia251:{inputs:[],outputs:["dia251 -> temporal247"]},mes252:{inputs:[],outputs:["mes252 -> temporal247"]},semana253:{inputs:[],outputs:["semana253 -> temporal247"]},peso5:{inputs:["kilogramas6 -> peso5","gramas7 -> peso5","miligramas8 -> peso5"],outputs:[]},kilogramas6:{inputs:[],outputs:["kilogramas6 -> peso5"]},gramas7:{inputs:[],outputs:["gramas7 -> peso5"]},miligramas8:{inputs:[],outputs:["miligramas8 -> peso5"]},"un / min":{inputs:[],outputs:["un / min->unitario18","un / min->minutos249"]},"R$ / h":{inputs:[],outputs:["R$ / h->reais11","R$ / h->hora250"]},"R$ / un":{inputs:[],outputs:["R$ / un->reais11","R$ / un->unitario18"]},"un / h":{inputs:[],outputs:["un / h->unitario18","un / h->hora250"]}},searchResults:{}},J=ke();J.startListening({actionCreator:pe,effect:async(o,t)=>{const{dispatch:s}=t;s(Ge({graphId:S})),s(Me({graphId:S,graph:st})),s(De())}});J.startListening({actionCreator:Y,effect:async(o,t)=>{const{dispatch:s}=t;s(Re(o.payload))}});function nt({dispatch:o,managers:{storeManager:t,componentRegistryManager:s,ribbonMenuManager:u}}){t.functions.loadReducer($,qe.reducer),t.functions.registerMiddleware(J),o(pe()),s.functions.registerComponents({ribbonMenuSections:{ConversorGraphSection:G.memo(ot)},viewportTypes:{ConverterGraphViewport:xe}}),u.functions.addNewTab({label:"Conversor",sectionNames:["ConversorGraphSection"],type:"base"})}function Q(o){const t=ge(o);return`${t.amount} ${t.unit}`}function ge(o){const t=["centavos","R$"];let s=0,u=o;for(;u>=100&&s<t.length-1;)s+=1,u/=100;return{amount:u,unit:t[s]}}function H(o){return o<1e4?Math.round(Math.sqrt(o)):+Math.pow(o/1e3,2).toPrecision(2)}function at({label:o,icon:t,onChange:s,slots:u}){const[a,n]=G.useState(10),d=(i,l)=>{typeof l=="number"&&(n(l),s(ge(H(l)))),i.stopPropagation(),i.preventDefault()};return e.jsxs(b,{sx:{width:250},role:"money-slider",onPointerMove:i=>{i.stopPropagation(),i.preventDefault()},children:[e.jsxs(b,{children:[e.jsxs(_,{id:"money-slider",gutterBottom:!0,children:[o,": ",Q(H(a))]}),u?.coumpoundSelector]}),e.jsxs(k,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(k,{item:!0,children:t}),e.jsx(k,{item:!0,xs:!0,children:e.jsx(me,{value:a,min:0,step:.01,max:1e5,marks:[{value:1e4,label:"1 R$"},{value:32e3,label:"10 R$"}],scale:H,getAriaValueText:Q,valueLabelFormat:Q,onChange:d,valueLabelDisplay:"auto","aria-labelledby":"money-slider"})})]})]})}function ue(o){const t=ye(o);return`${t.amount} ${t.unit}`}function ye(o){const t=["s","m","h","d"],s=[1,60,3600,86400],u=s.findIndex(d=>d>=o),a=Math.max(u<0?3:u-1,0);return{amount:Math.round(o/s[a]),unit:t[a]}}function le(o){let s=o;return o<108e3?s=o/120:o<2*108e3?s=o/240:o>3*108e3&&(s=o),s}function it({label:o,icon:t,onChange:s,slots:u}){const[a,n]=G.useState(10),d=(i,l)=>{typeof l=="number"&&(n(l),s(ye(le(l)))),i.stopPropagation(),i.preventDefault()};return e.jsxs(b,{sx:{width:"min-content"},onPointerMove:i=>{i.stopPropagation(),i.preventDefault()},children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:1},children:[e.jsxs(e.Fragment,{children:[e.jsx(L,{id:"quotient-number",size:"small",type:"number",sx:{minWidth:80},InputLabelProps:{shrink:!0},value:100}),e.jsxs(q,{id:"quotient-unit-selector",size:"small",sx:{width:"min-content"},children:[e.jsx(T,{value:"week",children:"Sem."}),e.jsx(T,{value:"day",children:"Dia"}),e.jsx(T,{value:"h",children:"Hr"}),e.jsx(T,{value:"m",children:"min"}),e.jsx(T,{value:"s",children:"sec"})]})]}),e.jsx("span",{children:"/"}),u?.coumpoundSelector]}),e.jsxs(k,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(k,{item:!0,children:t}),e.jsx(k,{item:!0,xs:!0,children:e.jsx(me,{value:a,min:0,step:10,max:432e3,marks:[],scale:le,getAriaValueText:ue,valueLabelFormat:ue,onChange:d,valueLabelDisplay:"auto","aria-labelledby":"time-slider"})})]})]})}function rt({scale:o,...t}){return o==="money"?e.jsx(at,{...t}):e.jsx(it,{...t})}function K({onChange:o,value:t,children:s,selectorProps:u={sx:{}},textFieldProps:a={sx:{}},...n}){return e.jsxs(b,{role:"unit-selector",...n,sx:{display:"flex",gap:.2},children:[e.jsx(w,{children:e.jsx(L,{id:"amount",size:"small",type:"number",autoComplete:"off",sx:{...u.sx,width:"100px",minWidth:80},value:t.amount,onChange:d=>o({unit:t.unit,amount:d.target.valueAsNumber})})}),e.jsx(w,{children:e.jsx(q,{id:"unit-selector",inputProps:{id:"unit"},size:"small",sx:{...a.sx,width:"max(min-content, 100px)",minWidth:100},onChange:d=>o({amount:t.amount,unit:d.target.value}),value:t.unit,children:s})})]})}function dt({label:o,value:t,onChange:s,filterQuotients:u=()=>!0,filterDividends:a=()=>!0}){const n=h("Graph"),{useGraph:d}=n.hooks,i=d(S,r=>Object.values(r?.nodes??{}).filter(j=>j.type==="UNIT").map(j=>({...j,scale:Object.values(r?.nodes??{}).filter(m=>m.type==="SCALE").find(m=>r?.adjacencyList[j.id].outputs.includes(`${j.id} -> ${m.id}`))}))),l=x.useMemo(()=>i?.state?.filter(r=>u(r,r.scale))??[],[i.state,u]),c=x.useMemo(()=>i?.state?.filter(r=>a(r,r.scale))??[],[i.state,u]);return e.jsxs(b,{role:"compound-selector",width:"min-content",sx:{display:"flex",gap:1,alignItems:"baseline"},children:[o&&e.jsx(_,{gutterBottom:!0,sx:{minWidth:"50px"},children:o}),e.jsxs(b,{sx:{display:"flex",gap:1,alignItems:"baseline"},children:[e.jsx(K,{id:"quotient-selector",value:t.quotient,onChange:r=>s({...t,quotient:r}),selectorProps:{sx:{width:"10px"}},children:l.map(({id:r,name:j,abbreviation:m})=>e.jsx(T,{value:r,children:m},r))},"quotient"),e.jsx("span",{children:"/"}),e.jsx(K,{id:"dividend-selector",value:t.dividend,onChange:r=>s({...t,dividend:r}),sx:{width:"max-content"},children:c.map(({id:r,name:j,abbreviation:m})=>e.jsx(T,{value:r,children:m},r))},"dividend")]})]})}const ut=()=>({time:Object.entries(we).map(([o,t])=>({value:o,label:t}))}),lt=({icon:o,value:t})=>{const s=B([t.quotient.unit,t.dividend.unit]);return s?e.jsxs(b,{sx:{display:"flex",gap:.3,alignItems:"center"},children:[o&&e.jsx("div",{role:"coumpound-value-icon",children:o}),e.jsxs("div",{role:"coumpound-value-value",children:[t.quotient.amount," ",s[t.quotient.unit].abbreviation," / ",t.dividend.amount," ",s[t.dividend.unit].abbreviation]})]}):e.jsx(e.Fragment,{})},pt={name:$,version:Ae,depends_on:["Graph"],components:{CoverterGraphViewport:xe,ScaleSlider:rt,CompoundSelector:dt,UnitAmountSelector:K,CompoundUnit:lt},store:{actions:{},middlewares:[],reducers:{}},hooks:{useScales:ut,useUnits:B},constants:{},kernelCalls:{startModule:nt,restartModule:()=>{},shutdownModule:()=>{}}};export{pt as m};
